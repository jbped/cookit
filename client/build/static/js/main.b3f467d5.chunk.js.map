{"version":3,"sources":["theme.js","utils/globalSlice.js","components/ConfirmLeavePage/index.js","components/NewRecipeComponents/NewRecipeTitle/index.js","components/NewRecipeComponents/RecipeTime/index.js","components/NewRecipeComponents/ServingSize/index.js","components/NewRecipeComponents/PublicSwitch/index.js","components/NewRecipeComponents/RecipeDescription/index.js","components/NewRecipeComponents/EditableIngredient/index.js","components/NewRecipeComponents/IngredientsSection/index.js","components/NewRecipeComponents/EditableStep/index.js","components/NewRecipeComponents/DirectionsSection/index.js","utils/mutations.js","pages/NewRecipe.js","utils/queries.js","utils/auth.js","components/Loader/index.js","components/UpvoteHeart/index.js","pages/ViewRecipe.js","components/EditRecipeComponents/DeleteDialog/index.js","components/EditRecipeComponents/EditRecipeTitle/index.js","components/EditRecipeComponents/RecipeTime/index.js","components/EditRecipeComponents/ServingSize/index.js","components/EditRecipeComponents/PublicSwitch/index.js","components/EditRecipeComponents/RecipeDescription/index.js","components/EditRecipeComponents/EditableIngredient/index.js","components/EditRecipeComponents/IngredientsSection/index.js","components/EditRecipeComponents/EditableStep/index.js","components/EditRecipeComponents/DirectionsSection/index.js","pages/EditRecipe.js","components/RecipeCard/index.js","components/RecipeListItem/index.js","pages/MyKit.js","components/LoginForm/index.js","components/SignupForm/index.js","components/LandingPage/index.js","pages/LoginSignup.js","pages/RecipeFeed.js","components/Header/index.js","components/Sidenav/index.js","components/404/index.js","App.js","app/store.js","serviceWorker.js","index.js"],"names":["theme","createTheme","palette","mode","primary","main","light","dark","contrastText","secondary","backdrop","grey","text","tertiary","background","default","paper","components","MuiAppBar","defaultProps","enableColorOnDark","color","typography","fontFamily","join","button","textTransform","initialState","darkMode","newRecipe","recipeTitle","type","cookTime","servings","isPublic","recipeDescription","ingredients","directions","columns","ingredientsCol","id","title","itemIds","directionsCol","deleteIngCol","deletedIds","deleteDirCol","ingredientErrors","directionErrors","formCleared","editRecipe","deleteDialog","currentRecipe","easyCookView","easyCookStep","myKitView","discoverView","sideNavVisible","globalSlice","createSlice","name","reducers","toggleDarkMode","state","action","Object","keys","payload","forEach","key","editThisRecipe","toggleDeleteDialog","createEditRecipe","toggleEasyCookView","setEasyCookStep","toggleMyKitView","toggleDiscoverView","actions","reducer","ConfirmLeavePage","cleared","useSelector","global","useState","locations","setLocations","history","useHistory","useEffect","listen","location","alertUser","window","addEventListener","removeEventListener","e","preventDefault","returnValue","when","message","NewRecipeTitle","setRecipeName","recipeForm","dispatch","useDispatch","Box","sx","display","alignItems","pt","borderBottom","borderColor","length","TextField","label","size","defaultValue","InputLabelProps","shrink","margin","onBlur","target","value","IconButton","onClick","ml","Typography","variant","fontWeight","marginLeft","RecipeTime","style","marginRight","select","placeholder","onChange","flexGrow","map","option","MenuItem","ServingSize","handleCounter","innerText","count","mt","Button","borderTopRightRadius","borderBottomRightRadius","height","minWidth","maxWidth","boxShadow","fontSize","className","width","inputProps","inputMode","pattern","min","textAlign","borderTopLeftRadius","borderBottomLeftRadius","PublicSwitch","ToggleButtonGroup","exclusive","ToggleButton","RecipeDescription","Paper","p","multiline","fullWidth","EditableIngredient","ing","index","ingObj","ingredientId","quantity","measurementTypeShort","ingredient","notes","errors","measurementTypes","short","handleChange","editedIngObj","find","measurement","measurementType","draggableId","provided","draggableProps","ref","innerRef","py","border","borderRadius","mx","error","SelectProps","renderValue","component","dragHandleProps","px","DeleteDiv","styled","div","props","isDraggingOver","hasItem","IngredientsSection","newIngredient","setNewIngredient","cancelDelete","deleteIds","Array","from","newIngredientIds","concat","newState","handleDelete","a","editedIngredients","newDeletedIds","item","newColState","onDragEnd","result","destination","source","droppableId","start","finish","startItemIds","splice","newStart","finishItemId","newFinish","newItemIds","newColumn","droppableProps","i","snapshot","flexWrap","justifyContent","fontStyle","padding","newIngIdArr","EditableStep","step","dirObj","stepId","stepText","editedDirObj","DirectionsSection","newStep","setNewStep","newStepIds","editedSteps","console","log","newStepIdArr","ADD_USER","gql","LOGIN","ADD_RECIPE","SAVE_RECIPE","DELETE_RECIPE","EDIT_RECIPE","UPVOTE_RECIPE","DELETE_UPVOTE_RECIPE","HideOnScroll","children","trigger","useScrollTrigger","Slide","appear","direction","in","NewRecipePage","useMutation","addRecipe","softComplete","setSoftComplete","softChecks","ingredientsOrder","directionsOrder","ingredientsLength","directionsLength","dispatchHandler","batch","createNewRecipe","newRecipeObj","ingredientsArr","directionsArr","publicBool","trimmedIngredient","ingredientName","preparationNotes","push","trimmedStep","variables","data","initGlobalState","assign","_id","onSubmit","editedIngredient","includes","editedErrors","filter","editedDirection","md","xl","Grid","container","spacing","xs","AppBar","top","bottom","Toolbar","left","right","endIcon","QUERY_ME","QUERY_ME_BASIC","QUERY_RECIPES","QUERY_RECIPE","decode","this","getToken","localStorage","getItem","idToken","setItem","removeItem","Loader","flexDirection","alignContent","CircularProgress","disableShrink","animationDuration","thickness","UpvoteHeart","defaultHeart","recipeId","upvotes","upvoteRecipe","deleteUpvoteRecipe","username","Auth","getProfile","users","upvote","setUpvote","handleUpvote","Transition","React","forwardRef","ViewRecipe","saveForkedRecipe","useParams","useQuery","loading","refetch","recipe","forked","creator","createdAt","orderedIngredients","orderedDirections","editedDateArr","col1","col2","undefined","split","quantityText","prepNotesText","mid","Math","ceil","slice","forkRecipe","pushToGlobal","recipeObj","loggedIn","profile","loggedInCreator","openStep","selectedStep","parseInt","dataset","stepIndex","toggleEasyView","marginTop","mr","lg","List","m","pb","ListItem","ListItemText","Divider","my","pl","borderLeft","Dialog","fullScreen","open","onClose","TransitionComponent","position","edge","flex","flexFlow","square","elevation","bgcolor","MobileStepper","steps","activeStep","nextButton","disabled","backButton","DeleteDialog","deleteRecipe","handleClose","handleDeleteRecipe","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","EditRecipeTitle","sm","mb","borderRight","paddingRight","numArray","ingId","pop","sort","b","startNumber","EditRecipePage","editRecipeMutation","editRecipeObj","dispatchRedirect","goBack","RecipeReviewCard","Card","Link","to","CardHeader","subheader","CardContent","RecipeListItem","discover","useLocation","pathname","MyKit","view","tab","setTab","myData","me","recipeKit","savedRecipes","recipes","forkedRecipes","Tabs","event","newValue","textColor","indicatorColor","Tab","borderTop","rowSpacing","columnSpacing","LoginForm","usernameError","password","passwordError","showPassword","errorText","values","setValues","login","errorHandler","prevState","loginUser","Username","Password","mutationResponse","token","toString","autoComplete","FormControl","InputLabel","htmlFor","OutlinedInput","endAdornment","InputAdornment","onMouseDown","SignupForm","serverError","email","emailError","addUser","prop","signup","Email","test","LandingPage","pr","LoginSignup","page","textDecoration","textShadow","RecipeFeed","Header","onNewRecipe","visibility","Sidenav","toggleDrawer","userData","imageData","img","Drawer","anchor","ModalProps","keepMounted","minHeight","role","onKeyDown","MenuList","ListItemIcon","ImageList","cols","gap","ImageListItem","src","alt","opacity","logout","UnknownPage","App","hideHeader","ThemeProvider","CssBaseline","zIndex","exact","path","EditRecipe","store","configureStore","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","httpLink","createHttpLink","uri","authorizationLink","setContext","_","headers","authorization","client","ApolloClient","link","cache","InMemoryCache","ReactDOM","render","ApolloProvider","document","getElementById","URL","process","href","origin","fetch","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.b3f467d5.chunk.js","sourcesContent":["import { createTheme } from '@mui/material/styles';\n\nconst theme = createTheme({\n  palette: {\n    mode: 'dark',\n    primary: {\n      main: '#e76f51',\n      light: '#EB8B73',\n      dark: '#A14D38',\n      contrastText: '#f5f5f5',\n    },\n    secondary: {\n      main: '#ffca3a',\n      light: '#FFD461',\n      dark: '#B28D28',\n      contrastText: '#000000',\n    },\n    backdrop: {\n      main: '#046e8f',\n      light: '#368BA5',\n      dark: '#024D64',\n      contrastText: '#f5f5f5',\n    },\n    light: {\n      main: '#f5f5f5',\n      contrastText: '#000000'\n    },\n    grey: {\n      main: '#e0e0e0'\n    },\n    text: {\n      primary: '#f5f5f5',\n      secondary: '#ffca3a',\n      tertiary: '#e76f51',\n      light: '#f5f5f5'\n    },\n    background: {\n      default: '#022f40',\n      paper: '#03435b',\n    },\n  },\n  components: {\n    MuiAppBar: {\n      defaultProps: {\n        enableColorOnDark: true,\n        color: 'backdrop'\n      },\n    },\n  },\n  typography: {\n    fontFamily: ['Poppins'].join(','),\n    button: {\n      textTransform: 'none'\n    }\n    \n  },\n\n  \n});\n\nexport default theme;","import { createSlice } from '@reduxjs/toolkit';\n\nexport const initialState = {\n  darkMode: false, \n  newRecipe: {\n    recipeTitle: 'New Recipe',\n    type: [],\n    cookTime: '',\n    servings: 1,\n    isPublic: 'private',\n    recipeDescription: '',\n    ingredients: {},\n    directions: {},\n    columns: {\n      ingredientsCol: {\n        id: 'ingredientsCol',\n        title: 'Ingredients',\n        itemIds: [] // ingredientsOrder in DB\n      },\n      directionsCol: {\n        id: 'directionsCol',\n        title: 'Directions',\n        itemIds: [] //directionsOrder in DB\n      },\n      deleteIngCol: {\n        id: 'deleteIngCol',\n        title: 'Delete',\n        itemIds: [],\n        deletedIds: []\n      },\n      deleteDirCol: {\n        id: 'deleteDirCol',\n        title: 'Delete',\n        itemIds: [],\n        deletedIds: []\n      }\n    },\n    ingredientErrors: [],\n    directionErrors: [],\n    formCleared: false,\n  },\n  editRecipe: {\n    recipeTitle: '',\n    type: [],\n    cookTime: '',\n    servings: 1,\n    isPublic: 'private',\n    recipeDescription: '',\n    ingredients: {},\n    directions: {},\n    columns: {\n      ingredientsCol: {\n        id: 'ingredientsCol',\n        title: 'Ingredients',\n        itemIds: [] // ingredientsOrder in DB\n      },\n      directionsCol: {\n        id: 'directionsCol',\n        title: 'Directions',\n        itemIds: [] //directionsOrder in DB\n      },\n      deleteIngCol: {\n        id: 'deleteIngCol',\n        title: 'Delete',\n        itemIds: [],\n        deletedIds: []\n      },\n      deleteDirCol: {\n        id: 'deleteDirCol',\n        title: 'Delete',\n        itemIds: [],\n        deletedIds: []\n      }\n    },\n    ingredientErrors: [],\n    directionErrors: [],\n    formCleared: false,\n    deleteDialog: false\n  },\n  currentRecipe: {}, // object that contains the currentRecipes information from db\n  easyCookView: false, //show the fullscreen step by step view USE MUI MOBILE STEPPER FOR DISPLAY\n  easyCookStep: 0, // last step visited by user. Needs to be cleared upon leaving the main recipe page\n  myKitView: true, //true === row, false === tiled\n  discoverView: true, //true === row, false === tiled\n  sideNavVisible: false, // true === sideNav appears\n};\n\nexport const globalSlice = createSlice({\n  name: 'global',\n  initialState,\n  // The `reducers` field lets us define reducers and generate associated actions\n  reducers: {\n    toggleDarkMode: (state) => {\n      state.darkMode = !state.darkMode;\n    },\n    newRecipe: (state, action) => {\n      Object.keys(action.payload)\n        .forEach(function eachKey(key) {\n          state.newRecipe[key] = action.payload[key]\n        })\n      // state.newRecipe = action.payload\n    },\n    editThisRecipe: (state, action) => {\n      Object.keys(action.payload)\n        .forEach(function eachKey(key) {\n          state.editRecipe[key] = action.payload[key]\n        })\n      // state.editRecipe = action.payload\n    },\n    toggleDeleteDialog: (state) => {\n      state.editRecipe.deleteDialog = !state.editRecipe.deleteDialog;\n    },\n    createEditRecipe: (state, action) => {\n      state.editRecipe = action.payload;\n    },\n    currentRecipe: (state, action) => {\n      state.currentRecipe = action.payload;\n    },\n    toggleEasyCookView: (state) => {\n      state.easyCookView = !state.easyCookView;\n    },\n    setEasyCookStep: (state, action) => {\n      state.easyCookStep = action.payload\n    },\n    toggleMyKitView: (state) => {\n      state.myKitView = !state.myKitView;\n    },\n    toggleDiscoverView: (state) => {\n      state.discoverView = !state.discoverView;\n    },\n    sideNavVisible: (state) => {\n      state.sideNavVisible = !state.sideNavVisible;\n    }\n  }\n});\n\nconst { actions, reducer } = globalSlice\n\nexport const { \n  toggleDarkMode, \n  newRecipe,\n  editThisRecipe,\n  createEditRecipe,\n  currentRecipe, \n  toggleEasyCookView, \n  setEasyCookStep, \n  toggleMyKitView,\n  toggleDiscoverView,\n  toggleDeleteDialog,\n  sideNavVisible } = actions;\n\nexport default reducer;\n","import React, { useEffect, useState } from 'react'\nimport { useHistory, Prompt } from 'react-router-dom';\nimport { useSelector } from 'react-redux'\n\nexport default function ConfirmLeavePage() {\n  const cleared = useSelector(state => state.global.newRecipe.formCleared)\n  const [locations, setLocations] = useState([])\n  const history = useHistory();\n  // console.log(cleared)\n\n\n  useEffect(() => {\n    return history.listen(location => {\n      if (history.action === 'PUSH') {\n        setLocations([location.key])\n      }\n\n      if (history.action === 'POP') {\n        if (locations[1] === location.key) {\n          setLocations(([_, ...keys]) => keys)\n          alertUser()\n        } else {\n          setLocations((keys) => [location.key, ...keys])\n          alertUser()\n        }\n      }\n    })\n  }, [locations, ])\n\n  useEffect(() => {\n    window.addEventListener('beforeunload', alertUser)\n    return () => {\n      window.removeEventListener('beforeunload', alertUser)\n\n    }\n  }, [])\n\n  const alertUser = e => {\n    e && e.preventDefault()\n    e.returnValue = ''\n  }\n  return (\n    <Prompt\n      when={!cleared}\n      message={() => 'You have unsaved changes! Please save your recipe before leaving!'}\n    />\n  )\n}","import React, { useState } from 'react'\n\n// Redux State.... \nimport { useSelector, useDispatch } from 'react-redux';\nimport { newRecipe } from '../../../utils/globalSlice';\n\n// MUI Components....\nimport {\n  TextField,\n  Box,\n  IconButton,\n  Typography\n} from '@mui/material'\n\n// Icons....\nimport {\n  MdEdit,\n  MdSave\n} from \"react-icons/md\";\n\nexport default function NewRecipeTitle() {\n  const [recipeTitle, setRecipeName] = useState(false)\n  const recipeForm = useSelector(state => state.global.newRecipe)\n  const dispatch = useDispatch();\n\n  const handleChange = e => {\n    if (!e.target.value.length) {\n      return;\n    }\n    dispatch(newRecipe({ [e.target.name]: e.target.value }))\n    // console.log(recipeForm)\n  }\n\n  const saveName = (e) => {\n    setRecipeName(false)\n  }\n\n  return (\n    <Box sx={{\n      display: 'flex',\n      alignItems: 'center',\n      pt: 2,\n      borderBottom: 1,\n      borderColor: 'divider'\n    }\n    }>\n      {recipeTitle || recipeTitle.length ?\n        <>\n          <TextField\n            id=\"recipe-name\"\n            label=\"Recipe Name\"\n            name=\"recipeTitle\"\n            size=\"small\"\n            color=\"backdrop\"\n            defaultValue={recipeForm.recipeTitle}\n            InputLabelProps={{ shrink: true, color: 'secondary' }}\n            sx={{\n              margin: '6px 0 5px 0'\n            }}\n            onBlur={handleChange} />\n          <IconButton\n            onClick={saveName}\n            sx={{\n              ml: 2\n            }}\n          >\n            <MdSave\n              size={25}\n\n            />\n          </IconButton>\n        </>\n        :\n        <>\n          <Typography variant=\"h4\" fontWeight=\"bold\" color=\"primary\">{recipeForm.recipeTitle}</Typography>\n          <IconButton onClick={() => setRecipeName(true)} >\n            <MdEdit\n              size={25}\n              sx={{\n                marginLeft: '2rem'\n              }}\n            />\n          </IconButton>\n        </>\n      }\n    </Box >\n  )\n}","import React from 'react'\n\n// Redux State.... \nimport { useSelector, useDispatch } from 'react-redux';\nimport { newRecipe } from '../../../utils/globalSlice';\n\n// MUI Components....\nimport {\n  TextField,\n  Box,\n  MenuItem,\n} from '@mui/material'\n\n// Icons....\nimport {\n  MdAccessAlarm,\n} from \"react-icons/md\";\n\nexport default function RecipeTime() {\n  const recipeForm = useSelector(state => state.global.newRecipe)\n  const dispatch = useDispatch();\n\n  const timeOptions = [\n    '10 minutes',\n    '20 minutes',\n    '30 minutes',\n    '40 minutes',\n    '50 minutes',\n    '1 hour',\n    '1 hour 15 minutes',\n    '1 hour 30 minutes',\n    '1 hour 45 minutes',\n    '2 hours',\n    '2 hours 15 minutes',\n    '2 hours 30 minutes',\n    '2 hours 45 minutes',\n    '3 hours',\n    '3 hours 30 minutes',\n    '4 hours',\n    '4 hours 30 minutes',\n    '5 hours',\n    '5 hours 30 minutes',\n    '6 hours',\n    '6 hours 30 minutes',\n    '7 hours',\n    '7 hours 30 minutes',\n    '8 hours',\n    '8 hours 30 minutes',\n    '9 hours',\n    '9 hours 30 minutes',\n    '10 hours',\n    '10 hours 30 minutes',\n    '11 hours',\n    '11 hours 30 minutes',\n    '12 hours',\n    '13 hours',\n    '14 hours',\n    '15 hours',\n    '16 hours',\n    '17 hours',\n    '18 hours',\n    '19 hours',\n    '20 hours',\n    '21 hours',\n    '22 hours',\n    '23 hours',\n    '24 hours',\n    '>24 hours',\n  ]\n\n  const handleChange = e => {\n    dispatch(newRecipe({ [e.target.name]: e.target.value }))\n    // console.log(recipeForm)\n  }\n\n  return (\n    < Box sx={{ display: 'flex', alignItems: 'center' }}>\n      <MdAccessAlarm\n        size={25}\n        style={{ marginRight: '1rem' }}\n      />\n      \n      <TextField\n        id=\"time-to-serve\"\n        name=\"cookTime\"\n        select\n        size=\"small\"\n        placeholder=\"Total Time\"\n        value={recipeForm.cookTime}\n        onChange={handleChange}\n        color=\"backdrop\"\n        sx={{\n          flexGrow: 1\n        }}\n      >\n        {timeOptions.map((option) => (\n          <MenuItem key={option} value={option}>\n            {option}\n          </MenuItem>\n        ))}\n      </TextField>\n    </Box >\n  )\n}","import React from 'react';\n\n// Redux State.... \nimport { useSelector, useDispatch } from 'react-redux';\nimport { newRecipe } from '../../../utils/globalSlice';\n\n// MUI Components....\nimport {\n  TextField,\n  Box,\n  Button,\n} from '@mui/material';\n\n// Icons....\nimport {\n  BsPeople\n} from \"react-icons/bs\";\n\n// Custom SCSS.... \nimport '../../../scss/textfields.scss'\n\nexport default function ServingSize() {\n  const recipeForm = useSelector(state => state.global.newRecipe)\n  const dispatch = useDispatch();\n\n  const handleChange = e => {\n    dispatch(newRecipe({ [e.target.name]: e.target.value }))\n    // console.log(recipeForm)\n  };\n\n  const handleCounter = e => {\n    if (e.target.innerText === '+') {\n      let count = recipeForm.servings + 1\n      dispatch(newRecipe({ servings: count }))\n    }\n    else if (recipeForm.servings > 1) {\n      let count = recipeForm.servings - 1\n      dispatch(newRecipe({ servings: count }))\n    }\n    // console.log(recipeForm)\n  };\n\n  return (\n    < Box sx={{ display: 'flex', alignItems: 'center', mt: 2 }}>\n      <BsPeople\n        size={25}\n        style={{ marginRight: '1rem' }}\n      />\n      \n      <Button\n        variant=\"contained\"\n        onClick={handleCounter}\n        color=\"secondary\"\n        style={{\n          borderTopRightRadius: 0,\n          borderBottomRightRadius: 0,\n          height: '40px',\n          minWidth: '30px',\n          maxWidth: '30px',\n          boxShadow: '2px 0px 2px 0px #00000040',\n          fontSize: 22\n        }}\n      >-</Button>\n      <div className=\"TextField-without-border-radius\">\n        <TextField\n          id=\"outlined-size-small\"\n          size=\"small\"\n          name=\"servings\"\n          value={recipeForm.servings}\n          sx={{\n            width: 60,\n          }}\n          inputProps={{\n            inputMode: 'numeric',\n            pattern: '[0-9]*',\n            min: 0,\n            style: { textAlign: 'center' },\n          }}\n          onBlur={handleChange}\n        />\n      </div>\n      <Button\n        variant=\"contained\"\n        onClick={handleCounter}\n        color=\"secondary\"\n        sx={{\n          borderTopLeftRadius: 0,\n          borderBottomLeftRadius: 0,\n          height: '40px',\n          minWidth: '30px',\n          maxWidth: '30px',\n          boxShadow: '-2px 0px 2px 0px #00000040',\n          fontSize: 22,\n        }}\n      >+</Button>\n    </Box >\n  )\n}","import React from 'react';\n\n// Redux State.... \nimport { useSelector, useDispatch } from 'react-redux';\nimport { newRecipe } from '../../../utils/globalSlice';\n\n// MUI Components....\nimport {\n  Box,\n  ToggleButtonGroup,\n  ToggleButton,\n} from '@mui/material'\n\n// Icons....\nimport { AiOutlineEye } from \"react-icons/ai\";\n\nexport default function PublicSwitch() {\n  const recipeForm = useSelector(state => state.global.newRecipe)\n  const dispatch = useDispatch();\n\n  const handleChange = e => {\n    dispatch(newRecipe({ [e.target.name]: e.target.value }))\n    // console.log(recipeForm)\n  };\n\n  return (\n    <Box sx={{ display: 'flex', alignItems: 'center', mt: 2 }}>\n      <AiOutlineEye\n        size={25} style={{ marginRight: '1rem' }}\n      />\n      \n      <ToggleButtonGroup\n        color=\"primary\"\n        name=\"isPublic\"\n        value={recipeForm.isPublic}\n        exclusive\n        onChange={handleChange}\n        \n        sx={{\n          flexGrow: 1,\n          display: 'flex',\n          height: '40px'\n        }}\n      >\n        <ToggleButton value=\"private\" name=\"isPublic\" color=\"secondary\" sx={{ flexGrow: 1 }}>Private</ToggleButton>\n        <ToggleButton value=\"public\" name=\"isPublic\" color=\"secondary\" sx={{ flexGrow: 1 }}>Public</ToggleButton>\n      </ToggleButtonGroup>\n    </Box >\n  )\n}","import React from 'react';\n\n// Redux State.... \nimport { useSelector, useDispatch } from 'react-redux';\nimport { newRecipe } from '../../../utils/globalSlice';\n\n// MUI Components....\nimport {\n  TextField,\n  Box,\n  Typography,\n  Paper,\n} from '@mui/material'\n\nexport default function RecipeDescription() {\n  const recipeForm = useSelector(state => state.global.newRecipe)\n  const dispatch = useDispatch();\n\n  const { recipeDescription } = recipeForm\n\n  const handleChange = e => {\n    dispatch(newRecipe({ [e.target.name]: e.target.value }))\n    // console.log(recipeForm)\n  }\n\n  return (\n    <>\n      <Box sx={{\n        mt: 3,\n        borderBottom: 1,\n        borderColor: 'divider'\n\n      }}>\n        <Typography variant=\"h5\" color=\"primary\">Description</Typography>\n      </Box >\n      <Paper sx={{p: 2, boxShadow: 4, mt: 2 }}>\n        <TextField\n          id=\"outlined-size-small\"\n          size=\"small\"\n          label=\"Description\"\n          name=\"recipeDescription\"\n          type=\"text\"\n          multiline\n          defaultValue={recipeDescription}\n          sx={{\n            width: '100%',\n            borderTopRightRadius: 0,\n            borderBottomRightRadius: 0,\n            flexGrow: '1'\n          }}\n          fullWidth\n          color=\"backdrop\"\n          InputLabelProps={{ shrink: true, color: 'secondary' }}\n          onBlur={handleChange}\n        />\n      </Paper>\n    </>\n  )\n}","import React from 'react';\nimport { Draggable } from 'react-beautiful-dnd';\n\n// Redux State.... \nimport { useSelector, useDispatch } from 'react-redux';\nimport { newRecipe } from '../../../utils/globalSlice';\n\n// MUI Components....\nimport {\n  TextField,\n  Box,\n  MenuItem,\n  Paper,\n  Typography,\n} from '@mui/material'\n\n// Icons....\nimport DragIndicatorIcon from \"@mui/icons-material/DragIndicator\";\n\n\n// Custom SCSS.... \nimport '../../../scss/textfields.scss'\n\nexport default function EditableIngredient({ ing, index }) {\n  const state = useSelector(state => state.global.newRecipe)\n  const dispatch = useDispatch();\n\n  const { ingredients } = state;\n  const ingObj = {...ingredients[ing.ingredientId]}\n\n  const { ingredientId, quantity, measurementTypeShort, ingredient, notes, errors } = ingObj;\n\n  const measurementTypes = [\n    {\n      type: 'Not applicable',\n      short: 'n/a'\n    },\n    {\n      type: 'teaspoon(s)',\n      short: 'tsp'\n    },\n    {\n      type: 'tablespoon(s)',\n      short: 'Tbsp'\n    },\n    {\n      type: 'cup(s)',\n      short: 'c'\n    },\n    {\n      type: 'ounces(s)',\n      short: 'oz'\n    },\n    {\n      type: 'pound(s)',\n      short: 'lbs'\n    },\n    {\n      type: 'gram(s)',\n      short: 'g'\n    },\n    {\n      type: 'kilogram(s)',\n      short: 'kg'\n    },\n    {\n      type: 'fluid ounce(s)',\n      short: 'fl oz'\n    },\n    {\n      type: 'pint(s)',\n      short: 'pt'\n    },\n    {\n      type: 'quart(s)',\n      short: 'qt'\n    },\n    {\n      type: 'gallon(s)',\n      short: 'gal'\n    },\n    {\n      type: 'milliliter(s)',\n      short: 'mL'\n    },\n    {\n      type: 'liter(s)',\n      short: 'L'\n    },\n\n  ]\n\n  const handleChange = e => {\n    let editedIngObj = {...ingObj}\n    if (e.target.name === 'measurementType') {\n      let { type, short } = measurementTypes.find(measurement => measurement.short === e.target.value);\n      editedIngObj =  { ...editedIngObj, measurementType: type, measurementTypeShort: short };\n      // console.log(type, short);\n    } else {\n      editedIngObj = {...editedIngObj, [e.target.name]: e.target.value}\n    }\n    dispatch(newRecipe({\n      ingredients: {\n        ...ingredients,\n        [ingredientId]: editedIngObj\n      }\n    }));\n    // console.log('ingredients', ingredients);\n    // console.log('ingredients[id]', ingredients[id]);\n  }\n\n  return (\n\n    <Draggable draggableId={ingredientId} index={index}>\n      {(provided) => (\n        <div\n          id={ingredientId}\n          {...provided.draggableProps}\n          ref={provided.innerRef}\n        >\n          <Paper \n            sx={{\n              mt: 2,\n              py: 2,\n              width: '100%',\n              border: 1,\n              borderRadius: 1,\n              boxShadow: 4,\n              borderColor: 'backdrop.dark',\n            }}\n          >\n            <Box sx={{\n              display: 'flex',\n              alignItems: 'center',\n              mx: 2,\n            }}>\n              <div className=\"TextField-no-border-right\">\n                <TextField\n                  id=\"outlined-size-small\"\n                  size=\"small\"\n                  label=\"Quantity\"\n                  name=\"quantity\"\n                  type=\"text\"\n                  defaultValue={quantity}\n                  error={errors.quantity}\n                  color=\"backdrop\"\n                  sx={{\n                    width: 100,\n                    borderTopRightRadius: 0,\n                    borderBottomRightRadius: 0,\n                    flexGrow: '1'\n                  }}\n                  InputLabelProps={{ shrink: true, color: 'secondary' }}\n                  onBlur={handleChange}\n                />\n              </div>\n              <div className=\"TextField-no-border-left\" style={{ marginLeft: '-1px' }}>\n                <TextField\n                  id=\"outlined-size-small\"\n                  size=\"small\"\n                  select\n                  label=\"Type\"\n                  name=\"measurementType\"\n                  // defaultValue={ing.measurementTypeShort}\n                  value={measurementTypeShort}\n                  color=\"backdrop\"\n                  InputLabelProps={{ shrink: true, color: 'secondary' }}\n                  SelectProps={{ renderValue: option => option }}\n                  sx={{\n                    width: 80,\n                    borderTopLeftRadius: 0,\n                    borderBottomLeftRadius: 0,\n                  }}\n                  onChange={handleChange}\n                >\n                  {measurementTypes.map(option => (\n                    <MenuItem key={option.short} value={option.short}>\n                      {option.type} - {option.short}\n                    </MenuItem>\n                  ))}\n                </TextField>\n              </div>\n              <Box component=\"div\" {...provided.dragHandleProps} sx={{marginLeft: 'auto', px: 2, py: 1, color: \"grey\"}}>\n                <DragIndicatorIcon size={15} color=\"grey\"/>\n              </Box>\n            </Box>\n            {errors.ingredient && <Typography variant=\"subtitle2\" color=\"error\" sx={{mx:2}}>Ingredient quantity is required</Typography>}\n            <Box\n              sx={{\n                mt: 2,\n                mx: 2,\n              }}>\n              <TextField\n                id=\"outlined-size-small\"\n                size=\"small\"\n                label=\"Ingredient\"\n                name=\"ingredient\"\n                type=\"text\"\n                defaultValue={ingredient}\n                error={errors.ingredient}\n                color=\"backdrop\"\n                sx={{\n                  width: '100%',\n                  borderTopRightRadius: 0,\n                  borderBottomRightRadius: 0,\n                  flexGrow: '1'\n                }}\n                fullWidth\n                InputLabelProps={{ shrink: true, color: 'secondary' }}\n                onBlur={handleChange}\n              />\n              {errors.ingredient && <Typography variant=\"subtitle2\" color=\"error\">Please provide an ingredient</Typography>}\n            </Box>\n            <Box\n              sx={{\n                mt: 2,\n                mx: 2,\n              }}>\n              <TextField\n                id=\"outlined-size-small\"\n                size=\"small\"\n                label=\"Notes\"\n                name=\"notes\"\n                type=\"text\"\n                multiline\n                defaultValue={notes}\n                color=\"backdrop\"\n                sx={{\n                  width: '100%',\n                  borderTopRightRadius: 0,\n                  borderBottomRightRadius: 0,\n                  flexGrow: '1'\n                }}\n                fullWidth\n                InputLabelProps={{ shrink: true, color: 'secondary' }}\n                onBlur={handleChange}\n              />\n            </Box>\n          </Paper>\n        </div>\n      )}\n    </Draggable>\n  )\n}","import React, { useState } from 'react';\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd';\nimport styled from 'styled-components';\n\n// Redux State.... \nimport { useSelector, useDispatch } from 'react-redux';\nimport { newRecipe } from '../../../utils/globalSlice';\n\n// MUI Components....\nimport {\n  Box,\n  Button,\n  Typography,\n} from '@mui/material';\n\n// Icons....\nimport {\n  MdLibraryAdd\n} from \"react-icons/md\";\nimport { FaRegTrashAlt } from \"react-icons/fa\"\n\n// Custom Components.... \nimport EditableIngredient from '../EditableIngredient';\n\n// Custom SCSS.... \nimport '../../../scss/textfields.scss'\n\nconst DeleteDiv = styled.div`\n  margin: 16px 0 0 0;\n  padding-top: ${props => (props.isDraggingOver || props.hasItem.length > 0) && '16px'};\n  padding-left:  ${props => (props.isDraggingOver || props.hasItem.length > 0) && '16px'}; \n  padding-right:  ${props => (props.isDraggingOver || props.hasItem.length > 0) && '16px'}; \n  min-height: 5vh;\n  border-radius: 4px;\n  text-align: center;\n  background-color: ${props => (props.isDraggingOver || props.hasItem.length > 0) ? '#ef5350' : 'inherit'};\n  color: ${props => (props.isDraggingOver || props.hasItem.length > 0) ? '#000000' : 'inherit'};\n\n`;\n\n\nexport default function IngredientsSection() {\n  const recipeForm = useSelector(state => state.global.newRecipe)\n  const dispatch = useDispatch();\n  const [newIngredient, setNewIngredient] = useState(1);\n\n  const { columns, ingredients } = recipeForm;\n  const { ingredientsCol, deleteIngCol, deleteIngCol: { deletedIds }, ingredientsCol: { itemIds } } = columns;\n\n  // console.log(columns)\n\n  // Used for troubleshooting drag behavior\n  // const onDragUpdate = update => {\n  //   console.log(update)\n  // }\n\n  // // Need to turn this into a hook to function going non-DRY for now\n  // const onDragEnd = result => {\n  //   newRecipeDragEnd(result) \n  // }\n\n  // Logic for when an ingredient was moved\n  const onDragEnd = result => {\n    // console.log(result)\n    const { destination, source, draggableId } = result;\n\n    // If no destination was found return out of function\n    if (!destination) {\n      return;\n    }\n\n    // If no order change was made return out of function\n    if (destination.droppableId === source.droppableId && destination.index === source.index) {\n      return\n    }\n\n    const start = columns[source.droppableId]; // draggables starting droppable column\n    const finish = columns[destination.droppableId] // draggables ending droppable column \n\n    // If draggable droppable column remained the same, save the column order.\n    if (start === finish) {\n      const newItemIds = Array.from(start.itemIds);\n      // console.log('newItemIds', newItemIds)\n\n      newItemIds.splice(source.index, 1);\n      newItemIds.splice(destination.index, 0, draggableId);\n\n      const newColumn = {\n        ...start,\n        itemIds: newItemIds\n      }\n\n      const newState = {\n        columns: {\n          ...columns,\n          [newColumn.id]: newColumn\n        }\n      }\n\n      dispatch(newRecipe(newState))\n      // console.log(recipeForm.columns)\n      return;\n    }\n\n    // Move Items to Delete Droppable\n    const startItemIds = Array.from(start.itemIds);\n    startItemIds.splice(source.index, 1);\n    const newStart = {\n      ...start,\n      itemIds: startItemIds,\n    }\n\n    const finishItemId = Array.from(finish.itemIds)\n    finishItemId.splice(destination.index, 0, draggableId);\n    const newFinish = {\n      ...finish,\n      itemIds: finishItemId\n    }\n\n    const newState = {\n      columns: {\n        ...columns,\n        [newStart.id]: newStart,\n        [newFinish.id]: newFinish\n      }\n    }\n    dispatch(newRecipe(newState))\n  };\n\n  // Handler for cancelling delete for selected items (returns them to the ingredients column)\n  const cancelDelete = () => {\n    const deleteIds = Array.from(deleteIngCol.itemIds);\n    const ingredientIds = Array.from(ingredientsCol.itemIds);\n\n    // merge delete ids with ingredient ids\n    const newIngredientIds = ingredientIds.concat(deleteIds);\n    // console.log(newIngredientIds);\n\n    // new state for returning to-be-deleted items to ingredients column, and clearing deleteIngCol itemIds\n    const newState = {\n      columns: {\n        ...columns,\n        ingredientsCol: {\n          ...ingredientsCol, \n          itemIds: newIngredientIds\n        },\n        deleteIngCol: {\n          ...deleteIngCol,\n          itemIds: []\n        }\n      }\n    }\n\n    // update global state\n    dispatch(newRecipe(newState))\n  };\n\n  // Delete ingredients in the Delete Column\n  const handleDelete = async () => {\n    const deleteIds = Array.from(deleteIngCol.itemIds);\n    let editedIngredients = {...ingredients};\n\n    // merge delete itemIds with deletedIds\n    const newDeletedIds = deletedIds.concat(deleteIds);\n    // console.log(newDeletedIds);\n\n    // Remove selected ingredients from the ingredients object\n    await deleteIds.forEach(item => {\n      delete editedIngredients[item]\n    });\n\n    // State to be passed to clear deleteIngCol itemsIds array\n    const newColState = {\n      columns: {\n        ...columns,\n        deleteIngCol: {\n          ...deleteIngCol, \n          itemIds:[],\n          deletedIds: newDeletedIds,\n        }\n      }\n    }\n\n    // State to be passed to remove selected ingredients from ingredients object\n    // const newIngState = {\n    //   ingredients: {\n    //     editedIngredients\n    //   }\n    // }\n    \n    // Push to globalState\n    await dispatch(newRecipe(newColState));\n    // console.log('newColState', columns);\n\n\n    // await dispatch(newRecipe(newIngState)); FOR SOME REASON ENABLING THIS BREAKS SORTING?!?!?!?!\n    // console.log('newIngState', ingredients);\n  }\n\n  const addNewIngredient = () => {\n    // create ingredient id and increment newIngredient INT\n    const ingredientId = `ingredient-${newIngredient}`;\n    setNewIngredient(newIngredient + 1);\n\n    // update newRecipe in global state with the ingredient in the ingredients obj and \n    const newIngIdArr = [...itemIds, ingredientId]\n    dispatch(newRecipe({\n      ingredients: {\n        ...ingredients,\n        [ingredientId]: {\n          ingredientId: ingredientId,\n          quantity: '',\n          measurementType: '',\n          measurementTypeShort: '',\n          ingredient: '',\n          notes: '',\n          errors: {\n            quantity: false,\n            ingredient: false\n          }\n        }\n      },\n      columns: {\n        ...columns,\n        ingredientsCol: {\n          ...ingredientsCol,\n          itemIds: newIngIdArr\n        }\n      }\n    }))\n    // console.log(recipeForm)\n  };\n\n  return (\n    <>\n      <Box sx={{\n        mt: 3, \n        borderBottom: 1,\n        borderColor: 'divider'\n      }}>\n        <Typography variant=\"h5\" color=\"primary\">Ingredients</Typography>\n      </Box>\n      <DragDropContext\n        // onDragUpdate={onDragUpdate}\n        onDragEnd={onDragEnd}\n      >\n        <Droppable droppableId={ingredientsCol.id}>\n          {(provided) => (\n            <Box component=\"div\"\n              ref={provided.innerRef}\n              {...provided.droppableProps}\n            >\n              {itemIds.map((ingredient, i) => <EditableIngredient key={ingredients[ingredient].ingredientId} ing={ingredients[ingredient]} index={i}></EditableIngredient>)}\n              {provided.placeholder}\n            </Box>\n          )}\n        </Droppable>\n        <Droppable droppableId={deleteIngCol.id}>\n          {(provided, snapshot) => (\n            <>\n              {(ingredientsCol.itemIds.length > 0 || deleteIngCol.itemIds.length > 0) ? (\n                <DeleteDiv\n                  ref={provided.innerRef}\n                  {...provided.droppableProps}\n                  isDraggingOver={snapshot.isDraggingOver}\n                  hasItem={deleteIngCol.itemIds}\n                >\n                  <Box sx={{ display: 'flex', flexWrap: 'nowrap', alignItems: 'center', justifyContent: 'center', }}>\n                    <FaRegTrashAlt />\n                    <Typography style={{ fontStyle: 'italic', fontSize: '16px', margin: 0, padding: 0 }}>\n                      &nbsp;\n                      {deleteIngCol.itemIds.length === 0 ? \n                      'Drop an ingredient here' \n                      : \n                      'Items selected to delete'}\n                    </Typography>\n                  </Box>\n\n                  {columns.deleteIngCol.itemIds.map((ingredient, i) => <EditableIngredient key={ingredients[ingredient].ingredientId} ing={ingredients[ingredient]} index={i}></EditableIngredient>)}\n                  {provided.placeholder}\n\n                  {deleteIngCol.itemIds.length > 0 && (\n                    <Box sx={{\n                      display: 'flex', \n                      flexWrap: 'nowrap', \n                      alignItems: 'center', \n                      p: 2, \n                      borderRadius: '0 0 4', \n                      justifyContent: 'end'\n                    }}>\n                      <Button variant=\"text\" color=\"secondary\" size=\"small\" sx={{marginRight: 2}} onClick={cancelDelete}>Cancel</Button>\n                      <Button size=\"small\" variant=\"contained\" color=\"secondary\" onClick={handleDelete}>Delete</Button>\n                    </Box>\n                  )}\n                </DeleteDiv>\n              ) : (\n                <Box component=\"div\"\n                  ref={provided.innerRef}\n                  {...provided.droppableProps}\n                  style={{\n                    display: 'none',\n                    // margin: '16px 0 0 0',\n                    // minHeight: '5vh',\n                    // borderRadius: '4px',\n                    // textAlign: 'center',\n                  }}\n                >\n                  {/* {columns.deleteIngCol.itemIds.map((ingredient, i) => <EditableIngredient key={ingredients[ingredient].id} ing={ingredients[ingredient]} index={i}></EditableIngredient>)} */}\n                  {provided.placeholder}\n                </Box>\n              )}\n            </>\n          )\n          }\n        </Droppable>\n      </DragDropContext>\n      <Button variant=\"text\"\n        sx={{\n          textTransform: 'none',\n          fontSize: 16,\n          fontStyle: 'italic',\n          color: 'primary'\n        }}\n        onClick={addNewIngredient}>\n        <MdLibraryAdd />&nbsp;Add a new ingredient\n      </Button>\n    </>\n  )\n}","import React from 'react';\nimport { Draggable } from 'react-beautiful-dnd';\n\n// Redux State.... \nimport { useSelector, useDispatch } from 'react-redux';\nimport { newRecipe } from '../../../utils/globalSlice';\n\n// MUI Components....\nimport {\n  TextField,\n  Box,\n  Paper, \n  Typography,\n} from '@mui/material'\n\n// Icons....\nimport DragIndicatorIcon from \"@mui/icons-material/DragIndicator\";\n\nexport default function EditableStep({ step, index }) {\n  const state = useSelector(state => state.global.newRecipe)\n  const dispatch = useDispatch();\n\n  const { directions } = state;\n  const dirObj = { ...directions[step.stepId] }\n  // console.log('dirObj', dirObj)\n\n  const { stepId, stepText, errors } = dirObj\n\n  const handleChange = e => {\n    let editedDirObj = { ...dirObj }\n    // console.log('editedDirObj', editedDirObj)\n    editedDirObj = { ...editedDirObj, [e.target.name]: e.target.value }\n    dispatch(newRecipe({\n      directions: {\n        ...directions,\n        [stepId]: editedDirObj\n      }\n    }))\n    // console.log('directions', directions);\n    // console.log('directions[stepId]', directions[stepId]);\n  }\n\n  return (\n    <Draggable draggableId={stepId} index={index}>\n      {(provided) => (\n        <Box component=\"div\"\n          id={stepId}\n          {...provided.draggableProps}\n          ref={provided.innerRef}\n        >\n          <Paper sx={{\n            mt: 2,\n            py: 2,\n            width: '100%',\n            border: 1,\n            borderRadius: 1,\n            boxShadow: 4,\n            borderColor: 'backdrop.dark',\n            // backgroundColor: 'backdrop.dark',\n            // backdropFilter: 'blur(4px)'\n          }}>\n            <Box sx={{\n              display: 'flex',\n              alignItems: 'center',\n            }}>\n              <TextField\n                id=\"outlined-size-small\"\n                size=\"small\"\n                label=\"Step\"\n                name=\"stepText\"\n                type=\"text\"\n                multiline\n                defaultValue={stepText}\n                error={errors.stepText}\n                color=\"backdrop\"\n                sx={{\n                  width: '100%',\n                  borderTopRightRadius: 0,\n                  borderBottomRightRadius: 0,\n                  flexGrow: '1',\n                  ml:2\n                }}\n                fullWidth\n                InputLabelProps={{ shrink: true, color: 'secondary' }}\n                onBlur={handleChange}\n              />\n              <Box component=\"div\" {...provided.dragHandleProps} sx={{marginLeft: 'auto', px: 2, py: 1, color: \"grey\"}}>\n                <DragIndicatorIcon size={15} color=\"grey\"/>\n              </Box>\n            </Box>\n              {errors.stepText && <Typography variant=\"subtitle2\" color=\"error\" sx={{mx: 2}}>Please provide information for this step</Typography>}\n          </Paper>\n        </Box>\n      )}\n    </Draggable>\n  )\n}","import React, { useState } from 'react'\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd';\nimport styled from 'styled-components';\n\n// Redux State.... \nimport { useSelector, useDispatch } from 'react-redux';\nimport { newRecipe } from '../../../utils/globalSlice';\n\n// MUI Components....\nimport {\n  Box,\n  Button,\n  Typography,\n} from '@mui/material'\n\n// Icons....\nimport {\n  MdLibraryAdd\n} from \"react-icons/md\";\nimport { FaRegTrashAlt } from \"react-icons/fa\"\n\n// Custom Components.... \nimport EditableStep from '../EditableStep';\nconst DeleteDiv = styled.div`\n  margin: 16px 0 0 0;\n  padding-top: ${props => (props.isDraggingOver || props.hasItem.length > 0) && '16px'};\n  padding-left:  ${props => (props.isDraggingOver || props.hasItem.length > 0) && '16px'}; \n  padding-right:  ${props => (props.isDraggingOver || props.hasItem.length > 0) && '16px'}; \n  min-height: 5vh;\n  border-radius: 4px;\n  text-align: center;\n  background-color: ${props => (props.isDraggingOver || props.hasItem.length > 0) ? '#ef5350' : 'inherit'};\n  color: ${props => (props.isDraggingOver || props.hasItem.length > 0) ? '#000000' : 'inherit'};\n`;\n\nexport default function DirectionsSection() {\n  const recipeForm = useSelector(state => state.global.newRecipe)\n  const dispatch = useDispatch();\n  const [newStep, setNewStep] = useState(1);\n\n  const { columns, directions } = recipeForm\n  const { directionsCol, deleteDirCol, deleteDirCol: { deletedIds }, directionsCol: { itemIds } } = columns;\n\n  // Logic for when an ingredient was moved\n  const onDragEnd = result => {\n    // console.log(result)\n    const { destination, source, draggableId } = result;\n\n    // If no destination was found return out of function\n    if (!destination) {\n      return;\n    }\n\n    // If no order change was made return out of function\n    if (destination.droppableId === source.droppableId && destination.index === source.index) {\n      return\n    }\n\n    const start = columns[source.droppableId]; // draggables starting droppable column\n    const finish = columns[destination.droppableId] // draggables ending droppable column \n\n    // If draggable droppable column remained the same, save the column order.\n    if (start === finish) {\n      const newItemIds = Array.from(start.itemIds);\n      // console.log('newItemIds', newItemIds)\n\n      newItemIds.splice(source.index, 1);\n      newItemIds.splice(destination.index, 0, draggableId);\n\n      const newColumn = {\n        ...start,\n        itemIds: newItemIds\n      }\n\n      const newState = {\n        columns: {\n          ...columns,\n          [newColumn.id]: newColumn\n        }\n      }\n\n      dispatch(newRecipe(newState))\n      // console.log(recipeForm.columns)\n      return;\n    }\n\n    // Move Items to Delete Droppable\n    const startItemIds = Array.from(start.itemIds);\n    startItemIds.splice(source.index, 1);\n    const newStart = {\n      ...start,\n      itemIds: startItemIds,\n    }\n\n    const finishItemId = Array.from(finish.itemIds)\n    finishItemId.splice(destination.index, 0, draggableId);\n    const newFinish = {\n      ...finish,\n      itemIds: finishItemId\n    }\n\n    const newState = {\n      columns: {\n        ...columns,\n        [newStart.id]: newStart,\n        [newFinish.id]: newFinish\n      }\n    }\n    dispatch(newRecipe(newState))\n  };\n\n  // Handler for cancelling delete for selected items (returns them to the ingredients column)\n  const cancelDelete = () => {\n    const deleteIds = Array.from(deleteDirCol.itemIds);\n    const stepIds = Array.from(directionsCol.itemIds);\n\n    // merge delete ids with ingredient ids\n    const newStepIds = stepIds.concat(deleteIds);\n    // console.log(newStepIds);\n\n    // new state for returning to-be-deleted items to ingredients column, and clearing deleteIngCol itemIds\n    const newState = {\n      columns: {\n        ...columns,\n        directionsCol: {\n          ...directionsCol, \n          itemIds: newStepIds\n        },\n        deleteDirCol: {\n          ...deleteDirCol,\n          itemIds: []\n        }\n      }\n    }\n\n    // update global state\n    dispatch(newRecipe(newState))\n  };\n\n  // Delete ingredients in the Delete Column\n  const handleDelete = async () => {\n    const deleteIds = Array.from(deleteDirCol.itemIds);\n    let editedSteps = {...directions};\n\n    // merge delete itemIds with deletedIds\n    const newDeletedIds = deletedIds.concat(deleteIds);\n    // console.log(newDeletedIds);\n\n    // Remove selected ingredients from the ingredients object\n    await deleteIds.forEach(item => {\n      delete editedSteps[item]\n    });\n\n    // State to be passed to clear deleteIngCol itemsIds array\n    const newColState = {\n      columns: {\n        ...columns,\n        deleteDirCol: {\n          ...deleteDirCol, \n          itemIds:[],\n          deletedIds: newDeletedIds,\n        }\n      }\n    }\n\n    // State to be passed to remove selected ingredients from ingredients object\n    // const newDirState = {\n    //   directions: {\n    //     editedSteps\n    //   }\n    // }\n    \n    // Push to globalState\n    await dispatch(newRecipe(newColState));\n    console.log('newColState', columns);\n// \n    // await dispatch(newRecipe(newDirState)); FOR SOME REASON ENABLING THIS BREAKS SORTING?!?!?!?!\n    // console.log('newDirState', ingredients);\n  }\n\n  const addNewStep = () => {\n    // create ingredient id and increment newIngredient INT\n    const stepId = `step-${newStep}`;\n    setNewStep(newStep + 1);\n\n    // update newRecipe in global state with the ingredient in the ingredients obj and \n    const newStepIdArr = [...itemIds, stepId]\n    dispatch(newRecipe({\n      directions: {\n        ...directions,\n        [stepId]: {\n          stepId: stepId,\n          stepText: '',\n          errors: {\n            stepText: false,\n          }\n        }\n      },\n      columns: {\n        ...columns,\n        directionsCol: {\n          ...directionsCol,\n          itemIds: newStepIdArr\n        }\n      }\n    }))\n    // console.log(recipeForm)\n  };\n  return (\n    <>\n      <Box sx={{\n        mt: 3, \n        borderBottom: 1,\n        borderColor: 'divider'\n      }}>\n        <Typography variant=\"h5\" color=\"primary\" >Directions</Typography>\n      </Box>\n      <DragDropContext\n        // onDragUpdate={onDragUpdate}\n        onDragEnd={onDragEnd}\n      >\n        <Droppable droppableId={directionsCol.id}>\n          {(provided) => (\n            <Box component=\"div\"\n              ref={provided.innerRef}\n              {...provided.droppableProps}\n            >\n              {itemIds.map((step, i) => <EditableStep key={directions[step].stepId} step={directions[step]} index={i}></EditableStep>)}\n              {provided.placeholder}\n            </Box>\n          )}\n        </Droppable>\n        <Droppable droppableId={deleteDirCol.id}>\n          {(provided, snapshot) => (\n            <>\n              {(directionsCol.itemIds.length > 0 || deleteDirCol.itemIds.length > 0) ? (\n                <DeleteDiv\n                  ref={provided.innerRef}\n                  {...provided.droppableProps}\n                  isDraggingOver={snapshot.isDraggingOver}\n                  hasItem={deleteDirCol.itemIds}\n                >\n                  <Box sx={{ display: 'flex', flexWrap: 'nowrap', alignItems: 'center', justifyContent: 'center'}}>\n                    <FaRegTrashAlt />\n                    <Typography style={{ fontStyle: 'italic', fontSize: '16px', margin: 0, padding: 0 }}>\n                      &nbsp;{deleteDirCol.itemIds.length === 0 ? \n                        'Drop a step here' \n                        : \n                        'Steps selected to delete'}\n                    </Typography>\n                  </Box>\n\n                  {deleteDirCol.itemIds.map((step, i) => <EditableStep key={directions[step].stepId} step={directions[step]} index={i}></EditableStep>)}\n                  {provided.placeholder}\n\n                  {deleteDirCol.itemIds.length > 0 && (\n                    <Box sx={{\n                      display: 'flex',\n                      flexWrap: 'nowrap',\n                      alignItems: 'center',\n                      p: 2,\n                      borderRadius: '0 0 4',\n                      justifyContent: 'end'\n                    }}>\n                      <Button variant=\"text\" size=\"small\" color=\"secondary\" sx={{ marginRight: 2 }} onClick={cancelDelete}>Cancel</Button>\n                      <Button size=\"small\" variant=\"contained\" color=\"secondary\" onClick={handleDelete}>Delete</Button>\n                    </Box>\n                  )}\n                </DeleteDiv>\n              ) : (\n                <Box component=\"div\"\n                  ref={provided.innerRef}\n                  {...provided.droppableProps}\n                  style={{\n                    display: 'none',\n                    // margin: '16px 0 0 0',\n                    // minHeight: '5vh',\n                    // borderRadius: '4px',\n                    // textAlign: 'center',\n                  }}\n                >\n                  {/* {columns.deleteIngCol.itemIds.map((ingredient, i) => <EditableIngredient key={ingredients[ingredient].id} ing={ingredients[ingredient]} index={i}></EditableIngredient>)} */}\n                  {provided.placeholder}\n                </Box>\n              )}\n            </>\n          )\n          }\n        </Droppable>\n      </DragDropContext>\n\n      <Button variant=\"text\"\n        sx={{\n          textTransform: 'none',\n          fontSize: 16,\n          fontStyle: 'italic'\n        }}\n        onClick={addNewStep}\n      >\n        <MdLibraryAdd />&nbsp;Add a new step\n      </Button>\n    </>\n  )\n}","import { gql } from '@apollo/client'\n\nexport const ADD_USER = gql`\n    mutation AddUser($Username: String!, $Email: String!, $Password: String!) {\n        addUser(username: $Username, email: $Email, password: $Password) {\n            token\n            user {\n                _id\n                username\n                email\n            }\n        }\n    }\n`;\n\nexport const LOGIN = gql`\n    mutation Login($Username: String!, $Password: String!) {\n        login(username: $Username, password: $Password) {\n            token\n            user {\n            _id\n            }\n        }\n    }\n`;\n\n//Ingredient\nexport const ADD_INGREDIENT = gql`\n    mutation addIngredient($ingredientName: String!, $measurement: String, $quantity: String, $preparationNotes: String) {\n        addIngredient(ingredientName: $ingredientName, measurement: $measurement, quantity: $quantity, preparationNotes: $preparationNotes) {\n            ingredientName\n            measurement\n            quantity\n            preparationNotes\n        }\n    }\n`;\n\n//Recipe\nexport const ADD_RECIPE = gql`\n    mutation addRecipe($isPublic: Boolean!, $recipeTitle: String!, $recipeDescription: String!,  $servings: Int!, $cookTime: String!, $directions: [directionInput], $ingredients: [ingredientInput],  $directionsOrder: [String], $ingredientsOrder: [String]) {\n        addRecipe(isPublic: $isPublic, recipeTitle: $recipeTitle, recipeDescription: $recipeDescription, servings: $servings, cookTime: $cookTime, directions: $directions, ingredients: $ingredients, directionsOrder: $directionsOrder, ingredientsOrder: $ingredientsOrder) {\n            _id\n            creator\n        isPublic\n            createdAt\n            recipeDescription\n        recipeTitle\n            servings\n            cookTime\n            directions {\n            _id\n            stepText\n            stepId\n            }\n        forked\n            ingredients {\n            _id\n            ingredientName\n            measurement\n            quantity\n            preparationNotes\n            ingredientId\n            }\n            comments {\n            _id\n            commentText\n            createdAt\n            username\n            upvotes {\n                _id\n                username\n            }\n            }\n            upvotes {\n            _id\n            username\n            }\n            directionsOrder\n            ingredientsOrder\n        }\n    }\n`;\n\nexport const SAVE_RECIPE = gql`\n    mutation saveRecipe($recipeId: ID) {\n        saveRecipe(recipeId: $recipeId) {\n            _id\n        }\n    }\n`;\n\nexport const DELETE_RECIPE = gql`\n    mutation DeleteRecipe($id: ID) {\n        deleteRecipe(_id: $id) {\n            _id\n            isPublic\n            creator\n            createdAt\n            recipeDescription\n            recipeTitle\n        }\n    }\n`;\n\nexport const EDIT_RECIPE = gql`\n    mutation editRecipe($recipeId: ID!, $isPublic: Boolean!, $recipeTitle: String!, $recipeDescription: String!,  $servings: Int!, $cookTime: String!, $directions: [directionInput], $ingredients: [ingredientInput],  $directionsOrder: [String], $ingredientsOrder: [String]) {\n        editRecipe(recipeId: $recipeId, isPublic: $isPublic, recipeTitle: $recipeTitle, recipeDescription: $recipeDescription, servings: $servings, cookTime: $cookTime, directions: $directions, ingredients: $ingredients, directionsOrder: $directionsOrder, ingredientsOrder: $ingredientsOrder) {\n            _id\n            isPublic,\n            creator,\n            recipeTitle,\n            recipeDescription,\n            type,\n            season,\n            difficulty,\n            servings,\n            cookTime,\n            forked,\n            directions {\n                stepText\n                stepId\n            }\n            ingredients {\n                ingredientName\n                measurement\n                quantity\n                preparationNotes\n                ingredientId\n            }\n            cookware {\n                cookwareName\n            }\n            directionsOrder\n            ingredientsOrder\n        }\n    }\n`;\n\n//Direction\n\nexport const ADD_DIRECTION = gql`\n    mutation addDirection($recipeId: ID!, $stepText: String!) {\n        addDirection(recipeId: $recipeId, stepText: $stepText) {\n            _id\n            stepText\n            stepId\n        }\n    }\n`;\n\n//Upvote\n\nexport const UPVOTE_RECIPE = gql`\n    mutation upvoteRecipe($recipeId: ID!) {\n        upvoteRecipe(recipeId: $recipeId) {\n            _id,\n            username\n        }\n    }\n`;\n\nexport const DELETE_UPVOTE_RECIPE = gql`\n    mutation deleteUpvoteRecipe($recipeId: ID!) {\n        deleteUpvoteRecipe(recipeId: $recipeId) {\n            _id,\n            username\n        }\n    }\n`;","import React, { useState, useEffect } from 'react';\n// import { Redirect } from 'react-router-dom';\n\n// Redux State.... \nimport { useSelector, useDispatch } from 'react-redux';\nimport { newRecipe} from '../utils/globalSlice';\nimport { initialState as initGlobalState } from '../utils/globalSlice'\n\n// MUI Components....\nimport {\n  Box,\n  Grid,\n  Paper,\n  Typography,\n  Button,\n  AppBar,\n  Toolbar,\n} from '@mui/material'\nimport SaveIcon from '@mui/icons-material/Save';\nimport useScrollTrigger from '@mui/material/useScrollTrigger';\nimport Slide from '@mui/material/Slide';\n\n// Custom Components.... \nimport ConfirmLeavePage from '../components/ConfirmLeavePage'\nimport NewRecipeTitle from '../components/NewRecipeComponents/NewRecipeTitle';\nimport RecipeTime from '../components/NewRecipeComponents/RecipeTime';\nimport ServingSize from '../components/NewRecipeComponents/ServingSize';\nimport PublicSwitch from '../components/NewRecipeComponents/PublicSwitch';\nimport RecipeDescription from '../components/NewRecipeComponents/RecipeDescription';\nimport IngredientsSection from '../components/NewRecipeComponents/IngredientsSection';\nimport DirectionsSection from '../components/NewRecipeComponents/DirectionsSection';\n\n// Queries/Mutations.... \nimport { useMutation } from '@apollo/client';\nimport { ADD_RECIPE } from '../utils/mutations'\n\nfunction HideOnScroll({ children }) {\n  const trigger = useScrollTrigger();\n  return (\n    <Slide appear={false} direction={'up'} in={!trigger}>\n      {children}\n    </Slide>\n  );\n}\n\nexport default function NewRecipePage() {\n  const recipeForm = useSelector(state => state.global.newRecipe)\n  const dispatch = useDispatch();\n  // // Ensures that on mount recipe state is cleared\n  // useEffect(() => {\n  //   dispatch(newRecipe(initGlobalState.newRecipe))\n  // }, [])\n\n  const { recipeTitle, cookTime, servings, isPublic, recipeDescription, ingredients, directions, columns: { ingredientsCol, directionsCol }, ingredientErrors, directionErrors } = recipeForm;\n  const [addRecipe] = useMutation(ADD_RECIPE)\n  // console.log(recipeForm)\n\n  // If true display the save button\n  const [softComplete, setSoftComplete] = useState(false)\n\n  // Runs every time recipeForm state updates\n  useEffect(() => {\n    // Booleans that are updated if minimum items are provided. This is a soft check, hard check will come when user subs form.\n    const softChecks = {\n      recipeTitle: false,\n      cookTime: false,\n      recipeDescription: false,\n      ingredients: false,\n      directions: false,\n      ingredientsOrder: false,\n      directionsOrder: false\n    }\n\n    // Get ingredients and directions object lengths\n    let ingredientsLength = Object.keys(ingredients).length\n    let directionsLength = Object.keys(directions).length\n\n    // If conditions are met update appropriate key in softChecks to true, else turn it to false\n    recipeTitle.length >= 2 && recipeTitle !== 'New Recipe' ? softChecks.recipeTitle = true : softChecks.recipeTitle = false;\n    cookTime.length ? softChecks.cookTime = true : softChecks.cookTime = false;\n    recipeDescription.length >= 5 ? softChecks.recipeDescription = true : softChecks.recipeDescription = false;\n    ingredientsLength > 0 ? softChecks.ingredients = true : softChecks.ingredients = false;\n    directionsLength > 0 ? softChecks.directions = true : softChecks.directions = false;\n    ingredientsCol.itemIds.length > 0  ? softChecks.ingredientsOrder = true : softChecks.ingredientsOrder = false;\n    directionsCol.itemIds.length > 0  ? softChecks.directionsOrder = true : softChecks.directionsOrder = false;\n\n    console.log('softChecks', softChecks)\n\n    // If all keys in softChecks are true update softComplete state to true\n    softChecks.recipeTitle && softChecks.cookTime && softChecks.recipeDescription && softChecks.ingredients && softChecks.directions && softChecks.ingredientsOrder && softChecks.directionsOrder ? setSoftComplete(true) : setSoftComplete(false);\n    (!softChecks.recipeTitle || !softChecks.cookTime || !softChecks.recipeDescription || !softChecks.ingredients || !softChecks.directions || !softChecks.ingredientsOrder || !softChecks.directionsOrder) && dispatch(newRecipe({formCleared: false}));\n\n    // console.log('softComplete', softComplete)\n\n  }, [recipeForm, cookTime.length, directions, directionsCol.itemIds.length, ingredients, ingredientsCol.itemIds.length, recipeTitle, recipeDescription.length, softComplete]);\n\n  const formCheck = e => {\n    e.preventDefault();\n    if (!softComplete) {\n      return; \n    }\n\n    // All error statuses are pushed to batch object which is a spread of the newRecipe global state\n    let batch = {...recipeForm}\n\n    // Very that each items has required elements\n    batch.columns.ingredientsCol.itemIds.forEach(item => {\n\n      // Verify that each item has something in quantity---------------------------------------------The notes below are for each ingredients quantity value. The logic is practically the same for ingredient name and direction stepText\n      if (batch.ingredients[item].quantity.length > 0) {                                                                      // if no error\n        const editedIngredient = {...batch.ingredients[item], errors: {...batch.ingredients[item].errors, quantity: false}}   // create a complete ingredient object with spreads, update the [ingredientId].error.quantity value to false\n        if (batch.ingredientErrors.includes(item)) {                                                                          // check if ingredientErrors includes the item if it does\n          const editedErrors = ingredientErrors.filter(index => index !== item);                                              // create a new ingredientErrors array with ingredientId filtered out\n         batch = {...batch, ingredients: {...batch.ingredients, [item]: editedIngredient}, ingredientErrors: editedErrors}    // update batch object with the error free ingredient\n        } else {                                                                                                              // if the ingredientId was not found in the array, there is no need for it to get updated\n          batch = {...batch, ingredients: {...batch.ingredients, [item]: editedIngredient}}                                   // update batch with the updated ingredient object with the error.quantity value === false\n        }\n      } else {                                                                                                                // if there is an error\n        const editedIngredient = {...batch.ingredients[item], errors: {...batch.ingredients[item].errors, quantity: true}}    // create a complete ingredient object with spreads, update the [ingredientId].error.quantity value to true\n        if (!batch.ingredientErrors.includes(item)){                                                                          // check if the ingredientsErrors array doesn't contain the ingredientId\n          const editedErrors = [...batch.ingredientErrors, item]                                                              // add the ingredientId to the cloned array\n          batch = {...batch, ingredients: {...batch.ingredients, [item]: editedIngredient}, ingredientErrors: editedErrors}   // update batch with the updated ingredient and ingredientErrors.\n        } else {                                                                                                              // if ingredientId is already in the ingredientsArray \n          batch = {...batch, ingredients: {...batch.ingredients, [item]: editedIngredient}}                                   // only update the ingredients object, not the ingredientsErrors array\n        }\n      }\n\n      // Verify that each item has an ingredient\n      if (batch.ingredients[item].ingredient.length > 0) {\n        const editedIngredient = {...batch.ingredients[item], errors: {...batch.ingredients[item].errors, ingredient: false}}\n        if (batch.ingredientErrors.includes(item)) {\n          const editedErrors = ingredientErrors.filter(index => index !== item);\n          batch = {...batch, ingredients: {...batch.ingredients, [item]: editedIngredient}, ingredientErrors: editedErrors}\n        } else {\n          batch = {...batch, ingredients: {...batch.ingredients, [item]: editedIngredient}}\n        }\n      } else {\n        const editedIngredient = {...batch.ingredients[item], errors: {...batch.ingredients[item].errors, ingredient: true}}\n        if (!batch.ingredientErrors.includes(item)){\n          const editedErrors = [...batch.ingredientErrors, item]\n          batch = {...batch, ingredients: {...batch.ingredients, [item]: editedIngredient}, ingredientErrors: editedErrors}\n        } else {\n          batch = {...batch, ingredients: {...batch.ingredients, [item]: editedIngredient}}\n        }\n      }\n      // console.log(`batch ${item}`, batch)\n      // console.log(`${item}`, ingredients[item].errors)\n    })\n\n    // Very that each step has required stepText\n    batch.columns.directionsCol.itemIds.forEach(step => {\n\n      // Verify that each step has text in stepText\n      if (directions[step].stepText.length > 0) {\n        const editedDirection = {...batch.directions[step], errors: {...batch.directions[step].errors, stepText: false}}\n        \n        if (batch.directionErrors.includes(step)) { \n          // console.log('directions true')\n          const editedErrors = directionErrors.filter(index => index !== step);\n          // console.log(editedErrors)\n          batch = {...batch, directions: {...batch.directions, [step]: editedDirection}, directionErrors: editedErrors}\n        } else {\n          batch = {...batch, directions: {...batch.directions, [step]: editedDirection}}\n        }\n\n      } else {\n        const editedDirection = {...batch.directions[step], errors: {...batch.directions[step].errors, stepText: true}}\n\n        if (!directionErrors.includes(step)){\n          const editedErrors = [...batch.directionErrors, step]\n          batch = {...batch, directions: {...batch.directions, [step]: editedDirection}, directionErrors: editedErrors}\n        } else {\n          batch = {...batch, directions: {...batch.directions, [step]: editedDirection}}\n        }\n\n      }\n      // console.log(`batch ${step}`, batch)\n      // console.log('directions', directions[step].errors)\n    })\n    // console.log(`batch`, batch)\n    // Push batch to newRecipe NOTE: THIS IS A COMPLETE OVERWRITE OF NEW RECIPE    \n    dispatchHandler(batch)\n  }\n  \n  const dispatchHandler = batch => {\n    dispatch(newRecipe(batch))\n    // console.log('recipeForm', recipeForm)\n    console.log('ingredientErrors.length: ', batch.ingredientErrors.length, '\\ndirectionErrors.length: ', batch.directionErrors.length)\n\n    if(batch.ingredientErrors.length !== 0 || batch.directionErrors.length !== 0) {\n      console.log('Errors found, cannot create a new recipe')\n      return;\n    } else {\n      // console.log('createNewRecipe')      \n      dispatch(newRecipe({formCleared: true}))\n      createNewRecipe()\n    }\n\n  }\n\n  const createNewRecipe = async () => {\n    let newRecipeObj = {\n      recipeTitle,\n      cookTime,\n      servings, \n      recipeDescription,\n      ingredientsOrder: ingredientsCol.itemIds,\n      directionsOrder: directionsCol.itemIds,\n    }\n    // console.log('newRecipeObj', newRecipeObj)\n\n    let ingredientsArr = []\n    let directionsArr = []\n\n    let publicBool = isPublic === 'private' ? false : true\n    newRecipeObj.isPublic = publicBool\n\n    await ingredientsCol.itemIds.forEach(item => {\n      let trimmedIngredient = {\n        ingredientId: ingredients[item].ingredientId,\n        quantity: ingredients[item].quantity,\n        measurement: ingredients[item].measurementTypeShort,\n        ingredientName: ingredients[item].ingredient,\n        preparationNotes: ingredients[item].notes,\n      }\n      ingredientsArr.push(trimmedIngredient);\n    });\n    newRecipeObj.ingredients = ingredientsArr\n\n    await directionsCol.itemIds.forEach(item => {\n      let trimmedStep = {\n        stepId: directions[item].stepId,\n        stepText: directions[item].stepText,\n      }\n      directionsArr.push(trimmedStep);\n    })\n    newRecipeObj.directions = directionsArr\n    // console.log('recipe created', formCleared)\n\n    try{\n      const { data } = await addRecipe({\n        variables: {...newRecipeObj}\n      });\n\n      // console.log(data.addRecipe._id)\n      data && dispatch(newRecipe(initGlobalState.newRecipe))\n      window.location.assign(`/recipe/${data.addRecipe._id}`)\n    } catch (e) {\n      console.error('New Recipe Error: ', e)\n    }\n  }\n\n  return (\n    <Box component=\"form\" onSubmit={formCheck}>\n      <Box px={{ md: 5, xl: 20 }}>\n        <NewRecipeTitle />\n        {(!recipeForm.formCleared) &&\n        <ConfirmLeavePage />}\n      </Box>\n      <Grid container spacing={{ md: 5, xl: 10 }} px={{ md: 5, xl: 20 }} >\n\n        <Grid item xs={12} md={6}>\n          <Box sx={{ borderBottom: 1, borderColor: 'divider', mt: 3 }}>\n            <Typography variant=\"h5\" color=\"primary\">Details</Typography>\n          </Box>\n          <Paper sx={{ p: 2, mt: 2 }}>\n            <RecipeTime />\n            <ServingSize />\n            <PublicSwitch />\n          </Paper>\n        </Grid>\n\n        <Grid item xs={12} md={6}>\n          <RecipeDescription />\n        </Grid>\n\n      </Grid>\n\n      <Grid container spacing={{ md: 5, xl: 10 }} px={{ md: 5, xl: 20 }}>\n\n        <Grid item xs={12} md={6}>\n          <IngredientsSection />\n        </Grid>\n\n        <Grid item xs={12} md={6}>\n          <DirectionsSection />\n        </Grid>\n\n      </Grid>\n      {softComplete &&\n      <>\n      <Box sx={{height: \"65px\"}}></Box>\n        <HideOnScroll>\n          <AppBar color=\"backdrop\" sx={{ top: 'auto', bottom: 0, }}>\n            <Toolbar sx={{left: 0, right: 0, justifyContent: 'center' }}>\n              <Button type='submit' variant=\"contained\" color=\"secondary\" endIcon={<SaveIcon />} sx={{ ml: 2 }}>Save this to your kit!</Button>\n            </Toolbar>\n          </AppBar>\n        </HideOnScroll>\n        </>\n      }\n    </Box >\n  )\n}\n\n","import { gql } from '@apollo/client'\n\n// tester id: 614d2a2d156a9a073f7a91a6\n// {\n//   \"_id\": \"614d2a2d156a9a073f7a91a6\"\n// }\n\n// This is basic for now.\n// Returns just id username and email\nexport const QUERY_USERS = gql`\n    query users {\n        users {\n            _id\n            username\n            email\n        }\n    }\n`;\n\n// Returns everything for a specific user\nexport const QUERY_USER = gql`\n    query user ($Username: String!) {\n        user(username: $Username) {\n            _id\n            email\n            username\n            groceryList {\n                _id\n                ingredientName\n                measurement\n                quantity\n                preparationNotes\n            }\n            recipeKit {\n                _id\n                creator\n                isPublic\n                createdAt\n                recipeTitle\n                recipeDescription\n                servings\n                cookTime\n                directions {\n                    _id\n                    stepText\n                    stepId\n                }\n                ingredients {\n                    _id\n                    ingredientName\n                    measurement\n                    quantity\n                    preparationNotes\n                    ingredientId\n                }\n                cookware {\n                    _id\n                    cookwareName\n                }\n                comments {\n                    _id\n                    commentText\n                    createdAt\n                    username\n                    upvotes {\n                    _id\n                    username\n                    }\n                }\n                upvotes {\n                    _id\n                    username\n                }\n            }\n            savedRecipes {\n                _id\n                isPublic\n                creator\n                createdAt\n                recipeTitle\n                recipeDescription\n                servings\n                cookTime\n                steps {\n                    _id\n                    stepText\n                    stepNumber\n                }\n                ingredients {\n                    _id\n                    ingredientName\n                    measurement\n                    quantity\n                    preparationNotes\n                }\n                cookware {\n                    _id\n                    cookwareName\n                }\n                comments {\n                    _id\n                    commentText\n                    createdAt\n                    username\n                    upvotes {\n                    username\n                    _id\n                    }\n                }\n                upvotes {\n                    _id\n                    username\n                }\n                directionsOrder\n                ingredientsOrder\n            }\n        }\n    }\n`;\n\n// All info\nexport const QUERY_ME = gql`\n    {\n        me {\n            _id\n            username\n            email\n            groceryList {\n            _id\n            ingredientName\n            measurement\n            quantity\n            preparationNotes\n            ingredientId\n            }\n            recipeKit {\n            _id\n            isPublic\n            creator\n            createdAt\n            recipeTitle\n            recipeDescription\n            servings\n            cookTime\n            directions {\n                _id\n                stepText\n                stepId\n            }\n            ingredients {\n                _id\n                ingredientName\n                measurement\n                quantity\n                preparationNotes\n                ingredientId\n            }\n            directionsOrder\n            ingredientsOrder\n            }\n            savedRecipes {\n            isPublic\n            _id\n            creator\n            createdAt\n            recipeTitle\n            recipeDescription\n            servings\n            cookTime\n            directions {\n                _id\n                stepText\n                stepId\n            }\n            ingredients {\n                _id\n                measurement\n            ingredientName\n                quantity\n                ingredientId\n            preparationNotes\n            }\n            directionsOrder\n            ingredientsOrder\n            }\n        }\n    }\n`;\n\n// Basic info\nexport const QUERY_ME_BASIC = gql`\n    query me_basic {\n        me {\n            _id\n            username\n            email\n        }\n    }\n`;\n\n// All recipes\nexport const QUERY_RECIPES = gql`\n    query recipes {\n        recipes {\n            _id\n            isPublic\n            creator\n            createdAt\n            recipeTitle\n            recipeDescription\n            servings\n            cookTime\n            forked\n            directions {\n            _id\n            stepText\n            stepId\n            }\n            ingredients {\n            _id\n            ingredientName\n            measurement\n            quantity\n            preparationNotes\n            ingredientId\n            }\n            directionsOrder\n            ingredientsOrder\n        }\n    }\n`;\n\nexport const QUERY_RECIPE = gql`\n    query Query($recipeId: ID!) {\n        recipe(_id: $recipeId) {\n                _id\n                isPublic\n                creator\n                createdAt\n                recipeTitle\n                recipeDescription\n                servings\n                cookTime\n                forked\n            directions {\n                _id\n                stepText\n                stepId\n            }\n            ingredients {\n                _id\n                ingredientName\n                measurement\n                quantity\n                preparationNotes\n                ingredientId\n            }\n            cookware {\n                _id\n                cookwareName\n            }\n            comments {\n                _id\n                commentText\n                username\n                createdAt\n                upvotes {\n                    _id\n                    username\n                }\n            }\n            upvotes {\n                _id\n                username\n            }\n            directionsOrder\n            ingredientsOrder\n        }\n    }\n`;\n\nexport const QUERY_RECIPES_SHORT = gql`\n    query Query {\n        recipes {\n            _id\n            creator\n            createdAt\n            recipeTitle\n            recipeDescription\n            servings\n            cookTime\n            ingredients {\n                ingredientName\n                ingredientId\n            }\n            ingredientsOrder\n        }\n    }\n`;\n\nexport const QUERY_RECIPE_BASIC = gql`\n    query Query($recipeId: ID!) {\n        recipe(_id: $recipeId) {\n            _id\n            isPublic\n            creator\n            createdAt\n            recipeTitle\n            recipeDescription\n            servings\n            cookTime\n            ingredients {\n            _id\n            ingredientName\n            measurement\n            quantity\n            preparationNotes\n            ingredientId\n            }\n            ingredientsOrder\n        }\n    }\n`;\n\n// all ingredients\nexport const QUERY_INGREDIENTS = gql`\n    query ingredients {\n        ingredients {\n            _id\n            ingredientName\n            measurement\n            quantity\n            preparationNotes\n        }\n    }\n`;\n\n// Ingredient by name\nexport const QUERY_INGREDIENT = gql`\n    query ingredient($IngredientName: String!) {\n        ingredient(ingredientName: $IngredientName) {\n            _id\n            ingredientName\n            measurement\n            quantity\n            preparationNotes\n        }\n    }\n`;","import decode from 'jwt-decode';\n\nclass AuthService {\n    getProfile() {\n        return decode(this.getToken());\n    }\n\n    loggedIn() {\n        // checks for saved un-expired token\n        const token = this.getToken();\n        return !!token /*&& !this.isTokenExpired(token);*/\n    }\n\n    // isTokenExpired(token) {\n    //     try {\n    //         const decoded = decode(token);\n    //         if (decoded.exp < Date.now() / 1000) {\n    //             return true;\n    //         } else return false;\n    //     } catch (err) {\n    //         return false;\n    //     }\n    // }\n\n    getToken() {\n        // retrieve user token\n        return localStorage.getItem('id_token');\n    }\n\n    login(idToken) {\n        localStorage.setItem('id_token', idToken);\n\n        window.location.assign('/my-kit');\n    }\n\n    logout() {\n        //clear user token and profile\n        localStorage.removeItem('id_token');\n        // reload and reset state\n        window.location.assign('/');\n    }\n}\n\nexport default new AuthService();","import React from 'react'\n\nimport Box from '@mui/material/Box';\nimport { CircularProgress } from '@mui/material';\n\nexport default function Loader() {\n  return (\n    <Box sx={{width: '100%', height: 'calc(100vh - 55px)', pt: 'calc(100vh - 80vh)', display: 'flex', flexDirection: 'column', alignContent: 'center', alignItems: 'center', }}>\n      <CircularProgress\n        variant=\"indeterminate\"\n        disableShrink\n        color=\"secondary\"\n        sx={{\n          animationDuration: '550ms',\n        }}\n        size={75}\n        thickness={6}\n      />\n    </Box>\n  )\n} ","import React, { useState } from 'react'\n\nimport { useMutation } from '@apollo/client';\nimport { UPVOTE_RECIPE, DELETE_UPVOTE_RECIPE } from '../../utils/mutations';\n\nimport Auth from '../../utils/auth';\n\nimport { IconButton } from '@mui/material';\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport FavoriteBorderIcon from '@mui/icons-material/FavoriteBorder';\n\nexport default function UpvoteHeart({ recipeId, upvotes }) {\n    const [upvoteRecipe] = useMutation(UPVOTE_RECIPE);\n    const [deleteUpvoteRecipe] = useMutation(DELETE_UPVOTE_RECIPE);\n    const { data: { username } } = Auth.getProfile();\n\n    console.log(upvotes);\n    let defaultHeart;\n    if (upvotes) {\n        const users = upvotes.map(upvote => upvote.username);\n        (users.includes(username)) ? defaultHeart = true : defaultHeart = false;\n    } else {\n        defaultHeart = false;\n    }\n\n    const [upvote, setUpvote] = useState(defaultHeart ? true : false);\n\n    const handleUpvote = async () => {\n        if (!upvote) {\n            try{\n                await upvoteRecipe({\n                    variables: {recipeId}\n                });\n                setUpvote(true);\n            } catch (e) {\n                console.error('Upvote Recipe Error: ', e);\n            }\n        } else {\n            try{\n                await deleteUpvoteRecipe({\n                    variables: {recipeId}\n                });\n                setUpvote(false);\n            } catch (e) {\n                console.error('Delete Upvote Recipe Error: ', e);\n            }\n        }\n    }\n    \n    return (\n        <IconButton onClick={handleUpvote}>\n            {upvote ? \n                <FavoriteIcon></FavoriteIcon>\n                : <FavoriteBorderIcon></FavoriteBorderIcon>\n            }\n        </IconButton>\n    )\n} ","import React, {useEffect} from 'react';\nimport { useParams, useHistory} from 'react-router-dom';\n\nimport { useQuery, useMutation } from '@apollo/client';\nimport { QUERY_RECIPE } from '../utils/queries'\nimport { SAVE_RECIPE } from '../utils/mutations'\n\n// Redux State.... \nimport { useSelector, useDispatch } from 'react-redux';\nimport { setEasyCookStep, toggleEasyCookView, createEditRecipe } from '../utils/globalSlice';\n\nimport Auth from '../utils/auth'\n\n// MUI Components....\nimport {\n  Box,\n  Grid,\n  Button,\n  IconButton,\n  Typography,\n  List,\n  ListItem,\n  ListItemText,\n  Paper,\n  Divider,\n  Dialog,\n  Slide,\n  AppBar,\n  Toolbar,\n  MobileStepper\n} from '@mui/material'\n\nimport Loader from '../components/Loader';\nimport UpvoteHeart from '../components/UpvoteHeart';\n\n// Icons....\nimport {\n  MdEdit,\n  MdAccessAlarm,\n} from \"react-icons/md\";\nimport PlayArrowIcon from '@mui/icons-material/PlayArrow';\nimport CloseIcon from '@mui/icons-material/Close';\nimport KeyboardArrowLeft from '@mui/icons-material/KeyboardArrowLeft';\nimport KeyboardArrowRight from '@mui/icons-material/KeyboardArrowRight';\nimport RestaurantIcon from '@mui/icons-material/Restaurant';\n\nimport {\n  BsPeople\n} from \"react-icons/bs\";\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport default function ViewRecipe() {\n  const easyCookStep = useSelector(state => state.global.easyCookStep);\n  const easyCookView = useSelector(state => state.global.easyCookView);\n  const dispatch = useDispatch();\n  const [saveForkedRecipe] = useMutation(SAVE_RECIPE)\n  // const editRecipeGS = useSelector(state => state.global.editRecipe);\n\n  let history = useHistory()\n\n\n  // Query for the recipe\n  const params = useParams();\n  // console.log(\"params\", params)\n\n  const recipeId = params.id\n  // console.log(\"Recipe ID\", recipeId)\n  \n  const { loading, data, refetch } = useQuery(QUERY_RECIPE, {\n    variables: { recipeId: recipeId }\n  });\n  // console.log('initdata', data)\n\n  useEffect(() => {\n    dispatch(setEasyCookStep(0))\n  }, [])\n  \n  // console.log('loading', loading)\n  if (loading) {\n    return <Loader></Loader>\n  } else if (!data.recipe.ingredients.length || !data.recipe.directions.length) {\n    refetch()\n    return <Loader></Loader>\n  }\n\n  const recipe = data.recipe || {};\n  // console.log('data.recipe', data.recipe);\n\n  // Destructuring of the keys in the recipe object received from the database\n  const { recipeTitle, isPublic, forked, creator, createdAt, recipeDescription, servings, cookTime, directions, directionsOrder, ingredients, ingredientsOrder, upvotes } = recipe;\n  \n    if (!ingredients || !ingredients[0]?.ingredientName|| !directions[0]?.stepText) {\n      // console.log('refetched')\n      refetch()\n    }\n\n  let orderedIngredients = [];\n  let orderedDirections = [] \n  let editedDateArr = []\n  let col1 = []\n  let col2 = []\n\n  // let recipeLength = Object.keys(recipe).length\n  // console.log(recipeLength)\n  // console.log(recipe.ingredients)\n\n  if (!loading && data.recipe !== undefined) {\n    // Splits the createdAt string into to indexes DD/MM/YYYY and time\n    editedDateArr = createdAt.split(' at ');\n\n    // Create new array of ingredients that is ordered appropriately by the ingredientsOrder\n\n    ingredientsOrder.forEach(id => {\n      ingredients.filter(ingredient => {\n        if (ingredient.ingredientId === id) {\n\n          // Base ingredient information 'quantity measurement ingredientName' or 'quantity ingredientNate'\n          const quantityText = `${ingredient.quantity} ${(ingredient.measurement && ingredient.measurement !== 'n/a') ? ingredient.measurement : ''} ${ingredient.ingredientName}`\n          // Preparation notes 'preparationNotes' or ''\n          const prepNotesText = ingredient.preparationNotes ? `${ingredient.preparationNotes}` : ''\n          orderedIngredients.push({ ...ingredient, quantityText, prepNotesText })\n          return orderedIngredients;\n        }\n        return orderedIngredients;\n      })\n    })\n\n    // Convert directions array to an object organized by the directionsOrder\n    directionsOrder.forEach(id => {\n      directions.filter(direction => {\n        if (direction.stepId === id) {\n          orderedDirections.push({ ...direction })\n          return orderedDirections;\n        }\n        return orderedDirections;\n      })\n      return orderedDirections;\n    })\n\n\n    const mid = Math.ceil(orderedIngredients.length / 2)\n    col1 = orderedIngredients.slice(0, mid)\n    col2 = orderedIngredients.slice(mid, orderedIngredients.length)\n  }\n\n  const editRecipe = () => {\n\n    const convertedPublic = isPublic ? 'public' : 'private'\n\n    let recipeObj = {\n      recipeTitle,\n      type: [],\n      cookTime,\n      servings,\n      isPublic: convertedPublic,\n      recipeDescription,\n      columns: {\n        ingredientsCol: {\n          id: 'ingredientsCol',\n          title: 'Ingredients',\n          itemIds: ingredientsOrder // ingredientsOrder in DB\n        },\n        directionsCol: {\n          id: 'directionsCol',\n          title: 'Directions',\n          itemIds: directionsOrder //directionsOrder in DB\n        },\n        deleteIngCol: {\n          id: 'deleteIngCol',\n          title: 'Delete',\n          itemIds: [],\n          deletedIds: []\n        },\n        deleteDirCol: {\n          id: 'deleteDirCol',\n          title: 'Delete',\n          itemIds: [],\n          deletedIds: []\n        }\n      },\n      ingredientErrors: [],\n      directionErrors: [],\n      formCleared: false,\n    }\n\n    let ingObj = {}\n    let dirObj = {}\n\n    ingredients.forEach(ingredient => {\n      ingObj = { ...ingObj, [ingredient.ingredientId]: {\n        ingredientId: ingredient.ingredientId,\n        quantity: ingredient.quantity,\n        measurementTypeShort: ingredient.measurement ? ingredient.measurement : \"n/a\",\n        ingredient: ingredient.ingredientName,\n        notes: ingredient.preparationNotes,\n        errors: { quantity: false, ingredient: false }\n      } }\n    })\n\n    recipeObj.ingredients = ingObj\n\n    directions.forEach(step => {\n      dirObj = { ...dirObj, [step.stepId]: { stepId: step.stepId, stepText: step.stepText, errors: { stepText: false } } }\n    })\n\n    recipeObj.directions = dirObj\n    // console.log(recipeObj)\n    pushToGlobal(recipeObj);\n    // console.log('editRecipeGS', editRecipeGS)\n\n    history.push(`${recipeId}/edit`)\n\n  }\n\n  const forkRecipe = async () => {\n    // console.log('forked recipe')\n    try{\n      const { data } = await saveForkedRecipe({\n        variables: {recipeId}\n      });\n\n      // console.log(data)\n    } catch (e) {\n      console.error('New Recipe Error: ', e)\n    }\n  }\n\n  const pushToGlobal = (recipeObj) => {\n    // console.log(recipeObj)\n    dispatch(createEditRecipe(recipeObj));\n  }\n\n  // const profile = Auth.getProfile();\n  // const { data: { username } } = profile\n\n  const loggedIn = Auth.loggedIn()\n  const profile = loggedIn ? Auth.getProfile() : null\n  const loggedInCreator = profile ? profile.data.username === creator : false\n\n  // Function called when a step button is pressed. Opens easy view to that desired step\n  const openStep = e => {\n    const selectedStep = parseInt(e.target.dataset.stepIndex)\n    dispatch(setEasyCookStep(selectedStep))\n    toggleEasyView()\n  }\n\n  // Toggled easy view open or closed\n  const toggleEasyView = e => {\n    dispatch(toggleEasyCookView())\n  }\n\n  // Progresses Easy View to next step\n  const handleNext = () => {\n    dispatch(setEasyCookStep(easyCookStep + 1));\n  };\n  // Regresses Easy View to previous step\n  const handleBack = () => {\n    dispatch(setEasyCookStep(easyCookStep - 1));\n  };\n\n  if (loading) {\n    return <Loader></Loader>\n  }\n\n  return (\n    <Box>\n      {/* Recipe Title */}\n      <Box\n        mx={{ xs: 0, md: 5, xl: 20 }}\n        sx={{\n          pt: 2,\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          alignItems: 'center',\n          marginTop: '.4rem',\n          borderBottom: 1,\n          borderColor: 'divider',\n        }}\n      >\n        <Box sx={{ display: \"flex\", alignItems: 'center' }}>\n          {(loggedIn && !loggedInCreator) && (\n            <UpvoteHeart recipeId={recipeId} upvotes={upvotes}></UpvoteHeart>\n          )}\n          <Typography variant=\"h4\" fontWeight=\"bold\" color=\"primary\">{recipeTitle}</Typography>\n          {loggedIn && (\n            <Box>\n              {(loggedInCreator || forked) ? (\n                <IconButton\n                  onClick={editRecipe}\n                >\n                  <MdEdit\n                    size={25}\n                    sx={{\n                    }}\n                  />\n                </IconButton>\n              ) : (\n                <IconButton onClick={forkRecipe} >\n                  <RestaurantIcon\n                    size={25}\n                    sx={{\n                    }}\n                  />\n                </IconButton>\n              )}\n            </Box>\n          )}\n\n        </Box>\n      </Box>\n      <Box>\n\n        <Box ml={{ xs: 0, md: 5, xl: 20 }} sx={{ display: 'flex', alignItems: \"center\", }}>\n          <Typography variant='subtitle1' mr={{ xs: 'auto', md: 2 }}>\n            {loggedInCreator ?\n              `Created: ${editedDateArr[0][0] === '0' ? editedDateArr[0].slice(1) : editedDateArr[0]}`\n              :\n              `By: ${creator} - ${editedDateArr[0][0] === '0' ? editedDateArr[0].slice(1) : editedDateArr[0]}`\n            }\n          </Typography>\n          {loggedInCreator && (\n            <Typography variant=\"subtitle1\" fontStyle=\"italic\" color=\"secondary\">&nbsp;\n              {isPublic ?\n                'Public'\n                :\n                'Private'\n              }\n            </Typography>\n          )}\n        </Box>\n\n        <Grid container spacing={{ md: 5, lg: 10 }} px={{ md: 5, xl: 20 }}>\n          <Grid item xs={12} md={6}>\n\n            <Box\n              sx={{\n                mt: 2,\n                borderBottom: 1,\n                borderColor: 'divider'\n              }}\n            >\n              <Typography variant=\"h5\" color=\"primary\">Details</Typography>\n            </Box >\n            <Paper\n              sx={{\n                p: 2,\n                mt: 2,\n                border: 1,\n                borderRadius: 1,\n                boxShadow: 4,\n                borderColor: 'backdrop.dark',\n              }}\n            >\n\n              {/* TIME */}\n              <Box sx={{ display: 'flex', alignItems: \"center\" }}>\n                <MdAccessAlarm\n                  size={25}\n                />\n                <Typography sx={{ ml: 1 }}>\n                  {cookTime}\n                </Typography>\n              </Box>\n\n              {/* SERVING SIZE */}\n              <Box sx={{ mt: 2, display: 'flex', alignItems: \"center\" }}>\n                <BsPeople\n                  size={25}\n                />\n                <Typography sx={{ ml: 1 }}>\n                  {servings} {servings === 1 ? 'person' : 'people'}\n                </Typography>\n              </Box>\n\n            </Paper>\n\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            {/* Description */}\n            <Box sx={{\n              mt: 2,\n              borderBottom: 1,\n              borderColor: 'divider'\n            }}>\n              <Typography variant=\"h5\" color=\"primary\">Description</Typography>\n            </Box >\n            <Paper\n              sx={{\n                p: 2,\n                mt: 2,\n                border: 1,\n                borderRadius: 1,\n                boxShadow: 4,\n                borderColor: 'backdrop.dark',\n              }}\n            >\n              <Typography>{recipeDescription}</Typography>\n            </Paper>\n          </Grid>\n\n        </Grid>\n\n        {/* Ingredients */}\n        <Box px={{ md: 5, xl: 20 }}>\n          <Box\n            sx={{\n              mt: 2,\n              borderBottom: 1,\n              borderColor: 'divider'\n            }}\n          >\n            <Typography variant=\"h5\" color=\"primary\">Ingredients</Typography>\n          </Box >\n          <Paper\n            sx={{\n              p: 2,\n              mt: 2,\n              border: 1,\n              borderRadius: 1,\n              boxShadow: 4,\n              borderColor: 'backdrop.dark',\n            }}\n          >\n            <Grid container spacing={{ md: 5, lg: 10 }}>\n\n              <Grid item xs={12} md={6}>\n                <List sx={{ m: 0, p: 0, pt: 0, pb: 0 }}>\n                  {col1.map(ingredient => (\n                    <Box key={`${ingredient.ingredientId}-box`}>\n                      <ListItem>\n                        <ListItemText\n                          primary={ingredient.quantityText}\n                          secondary={ingredient.prepNotesText ? ingredient.prepNotesText : '-'}\n                        />\n                      </ListItem>\n                      <Divider />\n                    </Box>\n                  )\n                  )}\n                </List>\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <List sx={{ m: 0, p: 0, pt: 0, pb: 0 }}>\n                  {col2.map(ingredient => (\n                    <Box key={`${ingredient.ingredientId}-box`}>\n                      <ListItem>\n                        <ListItemText\n                          primary={ingredient.quantityText}\n                          secondary={ingredient.prepNotesText ? ingredient.prepNotesText : '-'}\n                        />\n                      </ListItem>\n                      <Divider />\n                    </Box>\n                  )\n                  )}\n                </List>\n              </Grid>\n\n            </Grid>\n          </Paper>\n        </Box>\n\n\n        {/* Directions */}\n        <Box px={{ md: 5, xl: 20 }} sx={{ my: 2 }}>\n          <Box\n            sx={{\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'space-between',\n              borderBottom: 1,\n              borderColor: 'divider'\n            }}\n          >\n            <Typography variant=\"h5\" color=\"primary\">Directions</Typography>\n            <IconButton onClick={toggleEasyView} >\n              <PlayArrowIcon\n                size=\"large\"\n              />\n            </IconButton>\n          </Box >\n          {orderedDirections.map((step, i) => (\n            <Paper\n              key={`paper-${i}`}\n              sx={{\n                p: 1,\n                mt: 2,\n                border: 1,\n                borderRadius: 1,\n                boxShadow: 4,\n                borderColor: 'backdrop.dark',\n                display: 'flex',\n                flexWrap: 'nowrap',\n                alignItems: 'center'\n              }}\n            >\n              <Button variant=\"text\" id={`step-${i + 1}`} data-step-index={i} size=\"large\" color=\"secondary\" onClick={openStep}>Step {i + 1}</Button>\n              <Typography sx={{ ml: 1, pl: 1, borderLeft: 1, borderColor: 'divider' }}>{step.stepText}</Typography>\n            </Paper>\n          ))}\n        </Box>\n        <Dialog\n          fullScreen\n          open={easyCookView}\n          onClose={toggleEasyView}\n          TransitionComponent={Transition}\n        >\n          <AppBar sx={{ position: 'relative' }}>\n            <Toolbar>\n              <IconButton\n                edge=\"start\"\n                color=\"inherit\"\n                onClick={toggleEasyView}\n                aria-label=\"close\"\n              >\n                <CloseIcon />\n              </IconButton>\n              <Typography sx={{ ml: 2, flex: 1 }} variant=\"h6\" component=\"div\">\n                {recipeTitle}\n              </Typography>\n            </Toolbar>\n          </AppBar>\n          <Box sx={{ flexGrow: 1, display: 'flex', flexFlow: 'column', }}>\n            <Paper\n              square\n              elevation={0}\n              sx={{\n                display: 'flex',\n                alignItems: 'center',\n                height: 50,\n                pl: 2,\n                bgcolor: 'background.default',\n              }}\n            >\n              <Typography>{`Step ${easyCookStep + 1}`}</Typography>\n            </Paper>\n            <Box px={{ xs: 1, md: '20%', xl: '25%' }} sx={{ width: '100%', my: 'auto', textAlign: 'center' }}>\n              <Typography variant=\"h4\">\n                {orderedDirections[easyCookStep].stepText}\n              </Typography>\n            </Box>\n            <MobileStepper\n              variant=\"text\"\n              steps={orderedDirections.length}\n              position=\"static\"\n              activeStep={parseInt(easyCookStep)}\n              nextButton={\n                <Button\n                  size=\"small\"\n                  onClick={handleNext}\n                  disabled={easyCookStep === orderedDirections.length - 1}\n                >\n                  Next\n                  <KeyboardArrowRight />\n                </Button>\n              }\n              backButton={\n                <Button size=\"small\" onClick={handleBack} disabled={easyCookStep === 0}>\n                  <KeyboardArrowLeft />\n                  Back\n                </Button>\n              }\n            />\n          </Box>\n        </Dialog>\n      </Box>\n    </Box>\n  )\n};\n","import React from 'react'\nimport {\n  Button, \n  Dialog, \n  DialogActions, \n  DialogContent, \n  DialogContentText, \n  DialogTitle \n} from '@mui/material';\nimport { useParams, useHistory } from 'react-router-dom';\n\nimport { useMutation } from '@apollo/client';\nimport { DELETE_RECIPE } from '../../../utils/mutations';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { toggleDeleteDialog } from '../../../utils/globalSlice'\n\nexport default function DeleteDialog() {\n  const [deleteRecipe] = useMutation(DELETE_RECIPE);\n  const open = useSelector(state => state.global.editRecipe.deleteDialog);\n  // const forked = useSelector(state => state.global.editRecipe.forked);\n  const dispatch = useDispatch();\n  // const history = useHistory()\n\n  const handleClose = (e) => {\n    const option = e.target.innerText\n    option === \"Delete\" && handleDeleteRecipe()\n    dispatch(toggleDeleteDialog())\n  };\n\n  const params = useParams();\n\n  const recipeId = params.id\n\n  const handleDeleteRecipe = async () => {\n    try{\n      await deleteRecipe({\n        variables: {id: recipeId}\n      });\n      window.location.assign('/my-kit');\n    } catch(e) {\n      console.error('Delete Recipe Error: ', e);\n    }\n  }\n\n  return (\n    <div>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\" color=\"secondary\">\n          {\"Delete your recipe?\"}\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\" color=\"light.main\">\n            Please confirm that you wish to delete this recipe? Note, this action can not be undone!\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}>Cancel</Button>\n          <Button variant=\"contained\" color=\"error\" onClick={handleClose} autoFocus>\n            Delete\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}","import React, { useState } from 'react'\n\n// Redux State.... \nimport { useSelector, useDispatch } from 'react-redux';\nimport { editThisRecipe } from '../../../utils/globalSlice';\nimport { toggleDeleteDialog } from '../../../utils/globalSlice'\n\n// MUI Components....\nimport {\n  TextField,\n  Box,\n  IconButton,\n  Typography\n} from '@mui/material'\n\n// Other Components.... \nimport DeleteDialog from '../DeleteDialog'\n\n// Icons....\nimport {\n  MdEdit,\n  MdSave\n} from \"react-icons/md\";\nimport DeleteIcon from '@mui/icons-material/Delete';\n\nexport default function EditRecipeTitle() {\n  const [recipeTitle, setRecipeName] = useState(false);\n  const recipeForm = useSelector(state => state.global.editRecipe);\n  const dispatch = useDispatch();\n\n  const handleChange = e => {\n    if (!e.target.value.length) {\n      return;\n    }\n    dispatch(editThisRecipe({ [e.target.name]: e.target.value }))\n    // console.log(recipeForm)\n  }\n\n  const saveName = (e) => {\n    setRecipeName(false)\n  }\n\n  const handleDeleteDialog = () => {\n    dispatch(toggleDeleteDialog())\n  };\n\n  return (\n    <Box sx={{\n      display: 'flex',\n      alignItems: 'center',\n      pt: 2,\n      borderBottom: 1,\n      borderColor: 'divider'\n    }\n    }>\n      <DeleteDialog />\n      {recipeTitle || recipeTitle.length ?\n        <>\n          <TextField\n            id=\"recipe-name\"\n            label=\"Recipe Name\"\n            name=\"recipeTitle\"\n            size=\"small\"\n            color=\"backdrop\"\n            defaultValue={recipeForm.recipeTitle}\n            InputLabelProps={{ shrink: true, color: 'secondary' }}\n            sx={{\n              margin: '6px 0 5px 0'\n            }}\n            onBlur={handleChange} />\n          <IconButton\n            onClick={saveName}\n            sx={{\n              ml: 2\n            }}\n          >\n            <MdSave\n              size={25}\n\n            />\n          </IconButton>\n        </>\n        :\n        <>\n          <Typography variant=\"h4\" fontWeight=\"bold\" color=\"primary\">{recipeForm.recipeTitle}</Typography>\n          <Box marginLeft={{ xs: 0, sm: 'auto' }} sx={{\n                  // marginLeft: '1rem',\n                  mb:1,\n                  borderRight: 1,\n                  borderColor: 'divider',\n                  paddingRight: '.5rem'\n                }}>\n            <IconButton onClick={() => setRecipeName(true)} >\n              <MdEdit\n                size={25}\n              />\n            </IconButton>\n          </Box>\n          <Box ml='.5rem' mb={1}>\n            <IconButton onClick={handleDeleteDialog} >\n              <DeleteIcon\n                size={25}\n              />\n            </IconButton>\n          </Box>\n        </>\n      }\n    </Box >\n  )\n}","import React from 'react'\n\n// Redux State.... \nimport { useSelector, useDispatch } from 'react-redux';\nimport { editThisRecipe } from '../../../utils/globalSlice';\n\n// MUI Components....\nimport {\n  TextField,\n  Box,\n  MenuItem,\n} from '@mui/material'\n\n// Icons....\nimport {\n  MdAccessAlarm,\n} from \"react-icons/md\";\n\nexport default function RecipeTime() {\n  const recipeForm = useSelector(state => state.global.editRecipe)\n  const dispatch = useDispatch();\n\n  const timeOptions = [\n    '10 minutes',\n    '20 minutes',\n    '30 minutes',\n    '40 minutes',\n    '50 minutes',\n    '1 hour',\n    '1 hour 15 minutes',\n    '1 hour 30 minutes',\n    '1 hour 45 minutes',\n    '2 hours',\n    '2 hours 15 minutes',\n    '2 hours 30 minutes',\n    '2 hours 45 minutes',\n    '3 hours',\n    '3 hours 30 minutes',\n    '4 hours',\n    '4 hours 30 minutes',\n    '5 hours',\n    '5 hours 30 minutes',\n    '6 hours',\n    '6 hours 30 minutes',\n    '7 hours',\n    '7 hours 30 minutes',\n    '8 hours',\n    '8 hours 30 minutes',\n    '9 hours',\n    '9 hours 30 minutes',\n    '10 hours',\n    '10 hours 30 minutes',\n    '11 hours',\n    '11 hours 30 minutes',\n    '12 hours',\n    '13 hours',\n    '14 hours',\n    '15 hours',\n    '16 hours',\n    '17 hours',\n    '18 hours',\n    '19 hours',\n    '20 hours',\n    '21 hours',\n    '22 hours',\n    '23 hours',\n    '24 hours',\n    '>24 hours',\n  ]\n\n  const handleChange = e => {\n    dispatch(editThisRecipe({ [e.target.name]: e.target.value }))\n    // console.log(recipeForm)\n  }\n\n  return (\n    < Box sx={{ display: 'flex', alignItems: 'center' }}>\n      <MdAccessAlarm\n        size={25}\n        style={{ marginRight: '1rem' }}\n      />\n      \n      <TextField\n        id=\"time-to-serve\"\n        name=\"cookTime\"\n        select\n        size=\"small\"\n        placeholder=\"Total Time\"\n        value={recipeForm.cookTime}\n        onChange={handleChange}\n        color=\"backdrop\"\n        sx={{\n          flexGrow: 1\n        }}\n      >\n        {timeOptions.map((option) => (\n          <MenuItem key={option} value={option}>\n            {option}\n          </MenuItem>\n        ))}\n      </TextField>\n    </Box >\n  )\n}","import React from 'react';\n\n// Redux State.... \nimport { useSelector, useDispatch } from 'react-redux';\nimport { editThisRecipe } from '../../../utils/globalSlice';\n\n// MUI Components....\nimport {\n  TextField,\n  Box,\n  Button,\n} from '@mui/material';\n\n// Icons....\nimport {\n  BsPeople\n} from \"react-icons/bs\";\n\n// Custom SCSS.... \nimport '../../../scss/textfields.scss'\n\nexport default function ServingSize() {\n  const recipeForm = useSelector(state => state.global.editRecipe)\n  const dispatch = useDispatch();\n\n  const handleChange = e => {\n    dispatch(editThisRecipe({ [e.target.name]: e.target.value }))\n    // console.log(recipeForm)\n  };\n\n  const handleCounter = e => {\n    if (e.target.innerText === '+') {\n      let count = recipeForm.servings + 1\n      dispatch(editThisRecipe({ servings: count }))\n    }\n    else if (recipeForm.servings > 1) {\n      let count = recipeForm.servings - 1\n      dispatch(editThisRecipe({ servings: count }))\n    }\n    // console.log(recipeForm)\n  };\n\n  return (\n    < Box sx={{ display: 'flex', alignItems: 'center', mt: 2 }}>\n      <BsPeople\n        size={25}\n        style={{ marginRight: '1rem' }}\n      />\n      \n      <Button\n        variant=\"contained\"\n        onClick={handleCounter}\n        color=\"secondary\"\n        style={{\n          borderTopRightRadius: 0,\n          borderBottomRightRadius: 0,\n          height: '40px',\n          minWidth: '30px',\n          maxWidth: '30px',\n          boxShadow: '2px 0px 2px 0px #00000040',\n          fontSize: 22\n        }}\n      >-</Button>\n      <div className=\"TextField-without-border-radius\">\n        <TextField\n          id=\"outlined-size-small\"\n          size=\"small\"\n          name=\"servings\"\n          value={recipeForm.servings}\n          sx={{\n            width: 60,\n          }}\n          inputProps={{\n            inputMode: 'numeric',\n            pattern: '[0-9]*',\n            min: 0,\n            style: { textAlign: 'center' },\n          }}\n          onBlur={handleChange}\n        />\n      </div>\n      <Button\n        variant=\"contained\"\n        onClick={handleCounter}\n        color=\"secondary\"\n        sx={{\n          borderTopLeftRadius: 0,\n          borderBottomLeftRadius: 0,\n          height: '40px',\n          minWidth: '30px',\n          maxWidth: '30px',\n          boxShadow: '-2px 0px 2px 0px #00000040',\n          fontSize: 22,\n        }}\n      >+</Button>\n    </Box >\n  )\n}","import React from 'react';\n\n// Redux State.... \nimport { useSelector, useDispatch } from 'react-redux';\nimport { editThisRecipe } from '../../../utils/globalSlice';\n\n// MUI Components....\nimport {\n  Box,\n  ToggleButtonGroup,\n  ToggleButton,\n} from '@mui/material'\n\n// Icons....\nimport { AiOutlineEye } from \"react-icons/ai\";\n\nexport default function PublicSwitch() {\n  const recipeForm = useSelector(state => state.global.editRecipe)\n  const dispatch = useDispatch();\n\n  const handleChange = e => {\n    dispatch(editThisRecipe({ [e.target.name]: e.target.value }))\n    // console.log(recipeForm)\n  };\n\n  return (\n    <Box sx={{ display: 'flex', alignItems: 'center', mt: 2 }}>\n      <AiOutlineEye\n        size={25} style={{ marginRight: '1rem' }}\n      />\n      \n      <ToggleButtonGroup\n        color=\"primary\"\n        name=\"isPublic\"\n        value={recipeForm.isPublic}\n        exclusive\n        onChange={handleChange}\n        \n        sx={{\n          flexGrow: 1,\n          display: 'flex',\n          height: '40px'\n        }}\n      >\n        <ToggleButton value=\"private\" name=\"isPublic\" color=\"secondary\" sx={{ flexGrow: 1 }}>Private</ToggleButton>\n        <ToggleButton value=\"public\" name=\"isPublic\" color=\"secondary\" sx={{ flexGrow: 1 }}>Public</ToggleButton>\n      </ToggleButtonGroup>\n    </Box >\n  )\n}","import React from 'react';\n\n// Redux State.... \nimport { useSelector, useDispatch } from 'react-redux';\nimport { editThisRecipe } from '../../../utils/globalSlice';\n\n// MUI Components....\nimport {\n  TextField,\n  Box,\n  Typography,\n  Paper,\n} from '@mui/material'\n\nexport default function RecipeDescription() {\n  const recipeForm = useSelector(state => state.global.editRecipe)\n  const dispatch = useDispatch();\n\n  const { recipeDescription } = recipeForm\n\n  const handleChange = e => {\n    dispatch(editThisRecipe({ [e.target.name]: e.target.value }))\n    // console.log(recipeForm)\n  }\n\n  return (\n    <>\n      <Box sx={{\n        mt: 3,\n        borderBottom: 1,\n        borderColor: 'divider'\n\n      }}>\n        <Typography variant=\"h5\" color=\"primary\">Description</Typography>\n      </Box >\n      <Paper sx={{p: 2, boxShadow: 4, mt: 2 }}>\n        <TextField\n          id=\"outlined-size-small\"\n          size=\"small\"\n          label=\"Description\"\n          name=\"recipeDescription\"\n          type=\"text\"\n          multiline\n          defaultValue={recipeDescription}\n          sx={{\n            width: '100%',\n            borderTopRightRadius: 0,\n            borderBottomRightRadius: 0,\n            flexGrow: '1'\n          }}\n          fullWidth\n          color=\"backdrop\"\n          InputLabelProps={{ shrink: true, color: 'secondary' }}\n          onBlur={handleChange}\n        />\n      </Paper>\n    </>\n  )\n}","import React from 'react';\nimport { Draggable } from 'react-beautiful-dnd';\n\n// Redux State.... \nimport { useSelector, useDispatch } from 'react-redux';\nimport { editThisRecipe } from '../../../utils/globalSlice';\n\n// MUI Components....\nimport {\n  TextField,\n  Box,\n  MenuItem,\n  Paper,\n  Typography,\n} from '@mui/material'\n\n// Icons....\nimport DragIndicatorIcon from \"@mui/icons-material/DragIndicator\";\n\n\n// Custom SCSS.... \nimport '../../../scss/textfields.scss'\n\nexport default function EditableIngredient({ ing, index }) {\n  const state = useSelector(state => state.global.editRecipe)\n  const dispatch = useDispatch();\n\n  const { ingredients } = state;\n  const ingObj = {...ingredients[ing.ingredientId]}\n\n  const { ingredientId, quantity, measurementTypeShort, ingredient, notes, errors } = ingObj;\n\n  const measurementTypes = [\n    {\n      type: 'Not applicable',\n      short: 'n/a'\n    },\n    {\n      type: 'teaspoon(s)',\n      short: 'tsp'\n    },\n    {\n      type: 'tablespoon(s)',\n      short: 'Tbsp'\n    },\n    {\n      type: 'cup(s)',\n      short: 'c'\n    },\n    {\n      type: 'ounces(s)',\n      short: 'oz'\n    },\n    {\n      type: 'pound(s)',\n      short: 'lbs'\n    },\n    {\n      type: 'gram(s)',\n      short: 'g'\n    },\n    {\n      type: 'kilogram(s)',\n      short: 'kg'\n    },\n    {\n      type: 'fluid ounce(s)',\n      short: 'fl oz'\n    },\n    {\n      type: 'pint(s)',\n      short: 'pt'\n    },\n    {\n      type: 'quart(s)',\n      short: 'qt'\n    },\n    {\n      type: 'gallon(s)',\n      short: 'gal'\n    },\n    {\n      type: 'milliliter(s)',\n      short: 'mL'\n    },\n    {\n      type: 'liter(s)',\n      short: 'L'\n    },\n\n  ]\n\n  const handleChange = e => {\n    let editedIngObj = {...ingObj}\n    if (e.target.name === 'measurementType') {\n      let { type, short } = measurementTypes.find(measurement => measurement.short === e.target.value);\n      editedIngObj =  { ...editedIngObj, measurementType: type, measurementTypeShort: short };\n      // console.log(type, short);\n    } else {\n      editedIngObj = {...editedIngObj, [e.target.name]: e.target.value}\n    }\n    dispatch(editThisRecipe({\n      ingredients: {\n        ...ingredients,\n        [ingredientId]: editedIngObj\n      }\n    }));\n    // console.log('ingredients', ingredients);\n    // console.log('ingredients[id]', ingredients[id]);\n  }\n\n  return (\n\n    <Draggable draggableId={ingredientId} index={index}>\n      {(provided) => (\n        <div\n          id={ingredientId}\n          {...provided.draggableProps}\n          ref={provided.innerRef}\n        >\n          <Paper \n            sx={{\n              mt: 2,\n              py: 2,\n              width: '100%',\n              border: 1,\n              borderRadius: 1,\n              boxShadow: 4,\n              borderColor: 'backdrop.dark',\n            }}\n          >\n            <Box sx={{\n              display: 'flex',\n              alignItems: 'center',\n              mx: 2,\n            }}>\n              <div className=\"TextField-no-border-right\">\n                <TextField\n                  id=\"outlined-size-small\"\n                  size=\"small\"\n                  label=\"Quantity\"\n                  name=\"quantity\"\n                  type=\"text\"\n                  defaultValue={quantity}\n                  error={errors.quantity}\n                  color=\"backdrop\"\n                  sx={{\n                    width: 100,\n                    borderTopRightRadius: 0,\n                    borderBottomRightRadius: 0,\n                    flexGrow: '1'\n                  }}\n                  InputLabelProps={{ shrink: true, color: 'secondary' }}\n                  onBlur={handleChange}\n                />\n              </div>\n              <div className=\"TextField-no-border-left\" style={{ marginLeft: '-1px' }}>\n                <TextField\n                  id=\"outlined-size-small\"\n                  size=\"small\"\n                  select\n                  label=\"Type\"\n                  name=\"measurementType\"\n                  // defaultValue={ing.measurementTypeShort}\n                  value={measurementTypeShort}\n                  color=\"backdrop\"\n                  InputLabelProps={{ shrink: true, color: 'secondary' }}\n                  SelectProps={{ renderValue: option => option }}\n                  sx={{\n                    width: 80,\n                    borderTopLeftRadius: 0,\n                    borderBottomLeftRadius: 0,\n                  }}\n                  onChange={handleChange}\n                >\n                  {measurementTypes.map(option => (\n                    <MenuItem key={option.short} value={option.short}>\n                      {option.type} - {option.short}\n                    </MenuItem>\n                  ))}\n                </TextField>\n              </div>\n              <Box component=\"div\" {...provided.dragHandleProps} sx={{marginLeft: 'auto', px: 2, py: 1, color: \"grey\"}}>\n                <DragIndicatorIcon size={15} color=\"grey\"/>\n              </Box>\n            </Box>\n            {errors.ingredient && <Typography variant=\"subtitle2\" color=\"error\" sx={{mx:2}}>Ingredient quantity is required</Typography>}\n            <Box\n              sx={{\n                mt: 2,\n                mx: 2,\n              }}>\n              <TextField\n                id=\"outlined-size-small\"\n                size=\"small\"\n                label=\"Ingredient\"\n                name=\"ingredient\"\n                type=\"text\"\n                defaultValue={ingredient}\n                error={errors.ingredient}\n                color=\"backdrop\"\n                sx={{\n                  width: '100%',\n                  borderTopRightRadius: 0,\n                  borderBottomRightRadius: 0,\n                  flexGrow: '1'\n                }}\n                fullWidth\n                InputLabelProps={{ shrink: true, color: 'secondary' }}\n                onBlur={handleChange}\n              />\n              {errors.ingredient && <Typography variant=\"subtitle2\" color=\"error\">Please provide an ingredient</Typography>}\n            </Box>\n            <Box\n              sx={{\n                mt: 2,\n                mx: 2,\n              }}>\n              <TextField\n                id=\"outlined-size-small\"\n                size=\"small\"\n                label=\"Notes\"\n                name=\"notes\"\n                type=\"text\"\n                multiline\n                defaultValue={notes}\n                color=\"backdrop\"\n                sx={{\n                  width: '100%',\n                  borderTopRightRadius: 0,\n                  borderBottomRightRadius: 0,\n                  flexGrow: '1'\n                }}\n                fullWidth\n                InputLabelProps={{ shrink: true, color: 'secondary' }}\n                onBlur={handleChange}\n              />\n            </Box>\n          </Paper>\n        </div>\n      )}\n    </Draggable>\n  )\n}","import React, { useState } from 'react';\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd';\nimport styled from 'styled-components';\n\n// Redux State.... \nimport { useSelector, useDispatch } from 'react-redux';\nimport { editThisRecipe } from '../../../utils/globalSlice';\n\n// MUI Components....\nimport {\n  Box,\n  Button,\n  Typography,\n} from '@mui/material';\n\n// Icons....\nimport {\n  MdLibraryAdd\n} from \"react-icons/md\";\nimport { FaRegTrashAlt } from \"react-icons/fa\"\n\n// Custom Components.... \nimport EditableIngredient from '../EditableIngredient';\n\n// Custom SCSS.... \nimport '../../../scss/textfields.scss'\n\nconst DeleteDiv = styled.div`\n  margin: 16px 0 0 0;\n  padding-top: ${props => (props.isDraggingOver || props.hasItem.length > 0) && '16px'};\n  padding-left:  ${props => (props.isDraggingOver || props.hasItem.length > 0) && '16px'}; \n  padding-right:  ${props => (props.isDraggingOver || props.hasItem.length > 0) && '16px'}; \n  min-height: 5vh;\n  border-radius: 4px;\n  text-align: center;\n  background-color: ${props => (props.isDraggingOver || props.hasItem.length > 0) ? '#ef5350' : 'inherit'};\n  color: ${props => (props.isDraggingOver || props.hasItem.length > 0) ? '#000000' : 'inherit'};\n\n`;\n\n\nexport default function IngredientsSection() {\n  const recipeForm = useSelector(state => state.global.editRecipe)\n  const dispatch = useDispatch();\n\n  let numArray = []\n  Object.keys(recipeForm.ingredients).forEach(key => {\n  let ingId = parseInt(key.split('ingredient-').pop())\n  numArray.push(ingId)\n  numArray = numArray.sort((a, b) => a - b)\n  })\n  const startNumber = numArray.pop() + 1\n  \n  const [newIngredient, setNewIngredient] = useState(startNumber);\n\n  const { columns, ingredients } = recipeForm;\n  const { ingredientsCol, deleteIngCol, deleteIngCol: { deletedIds }, ingredientsCol: { itemIds } } = columns;\n\n  // console.log(columns)\n\n  // Used for troubleshooting drag behavior\n  // const onDragUpdate = update => {\n  //   console.log(update)\n  // }\n\n  // // Need to turn this into a hook to function going non-DRY for now\n  // const onDragEnd = result => {\n  //   newRecipeDragEnd(result) \n  // }\n\n  // Logic for when an ingredient was moved\n  const onDragEnd = result => {\n    // console.log(result)\n    const { destination, source, draggableId } = result;\n\n    // If no destination was found return out of function\n    if (!destination) {\n      return;\n    }\n\n    // If no order change was made return out of function\n    if (destination.droppableId === source.droppableId && destination.index === source.index) {\n      return\n    }\n\n    const start = columns[source.droppableId]; // draggables starting droppable column\n    const finish = columns[destination.droppableId] // draggables ending droppable column \n\n    // If draggable droppable column remained the same, save the column order.\n    if (start === finish) {\n      const newItemIds = Array.from(start.itemIds);\n      // console.log('newItemIds', newItemIds)\n\n      newItemIds.splice(source.index, 1);\n      newItemIds.splice(destination.index, 0, draggableId);\n\n      const newColumn = {\n        ...start,\n        itemIds: newItemIds\n      }\n\n      const newState = {\n        columns: {\n          ...columns,\n          [newColumn.id]: newColumn\n        }\n      }\n\n      dispatch(editThisRecipe(newState))\n      // console.log(recipeForm.columns)\n      return;\n    }\n\n    // Move Items to Delete Droppable\n    const startItemIds = Array.from(start.itemIds);\n    startItemIds.splice(source.index, 1);\n    const newStart = {\n      ...start,\n      itemIds: startItemIds,\n    }\n\n    const finishItemId = Array.from(finish.itemIds)\n    finishItemId.splice(destination.index, 0, draggableId);\n    const newFinish = {\n      ...finish,\n      itemIds: finishItemId\n    }\n\n    const newState = {\n      columns: {\n        ...columns,\n        [newStart.id]: newStart,\n        [newFinish.id]: newFinish\n      }\n    }\n    dispatch(editThisRecipe(newState))\n  };\n\n  // Handler for cancelling delete for selected items (returns them to the ingredients column)\n  const cancelDelete = () => {\n    const deleteIds = Array.from(deleteIngCol.itemIds);\n    const ingredientIds = Array.from(ingredientsCol.itemIds);\n\n    // merge delete ids with ingredient ids\n    const newIngredientIds = ingredientIds.concat(deleteIds);\n    // console.log(newIngredientIds);\n\n    // new state for returning to-be-deleted items to ingredients column, and clearing deleteIngCol itemIds\n    const newState = {\n      columns: {\n        ...columns,\n        ingredientsCol: {\n          ...ingredientsCol, \n          itemIds: newIngredientIds\n        },\n        deleteIngCol: {\n          ...deleteIngCol,\n          itemIds: []\n        }\n      }\n    }\n\n    // update global state\n    dispatch(editThisRecipe(newState))\n  };\n\n  // Delete ingredients in the Delete Column\n  const handleDelete = async () => {\n    const deleteIds = Array.from(deleteIngCol.itemIds);\n    let editedIngredients = {...ingredients};\n\n    // merge delete itemIds with deletedIds\n    const newDeletedIds = deletedIds.concat(deleteIds);\n    // console.log(newDeletedIds);\n\n    // Remove selected ingredients from the ingredients object\n    await deleteIds.forEach(item => {\n      delete editedIngredients[item]\n    });\n\n    // State to be passed to clear deleteIngCol itemsIds array\n    const newColState = {\n      columns: {\n        ...columns,\n        deleteIngCol: {\n          ...deleteIngCol, \n          itemIds:[],\n          deletedIds: newDeletedIds,\n        }\n      }\n    }\n\n    // State to be passed to remove selected ingredients from ingredients object\n    // const newIngState = {\n    //   ingredients: {\n    //     editedIngredients\n    //   }\n    // }\n    \n    // Push to globalState\n    await dispatch(editThisRecipe(newColState));\n    // console.log('newColState', columns);\n\n\n    // await dispatch(editThisRecipe(newIngState)); FOR SOME REASON ENABLING THIS BREAKS SORTING?!?!?!?!\n    // console.log('newIngState', ingredients);\n  }\n\n  const addNewIngredient = () => {\n    // create ingredient id and increment newIngredient INT\n    const ingredientId = `ingredient-${newIngredient}`;\n    setNewIngredient(newIngredient + 1);\n\n    // update newRecipe in global state with the ingredient in the ingredients obj and \n    const newIngIdArr = [...itemIds, ingredientId]\n    dispatch(editThisRecipe({\n      ingredients: {\n        ...ingredients,\n        [ingredientId]: {\n          ingredientId: ingredientId,\n          quantity: '',\n          measurementType: '',\n          measurementTypeShort: '',\n          ingredient: '',\n          notes: '',\n          errors: {\n            quantity: false,\n            ingredient: false\n          }\n        }\n      },\n      columns: {\n        ...columns,\n        ingredientsCol: {\n          ...ingredientsCol,\n          itemIds: newIngIdArr\n        }\n      }\n    }))\n    // console.log(recipeForm)\n  };\n\n  return (\n    <>\n      <Box sx={{\n        mt: 3, \n        borderBottom: 1,\n        borderColor: 'divider'\n      }}>\n        <Typography variant=\"h5\" color=\"primary\">Ingredients</Typography>\n      </Box>\n      <DragDropContext\n        // onDragUpdate={onDragUpdate}\n        onDragEnd={onDragEnd}\n      >\n        <Droppable droppableId={ingredientsCol.id}>\n          {(provided) => (\n            <Box component=\"div\"\n              ref={provided.innerRef}\n              {...provided.droppableProps}\n            >\n              {itemIds.map((ingredient, i) => <EditableIngredient key={ingredients[ingredient].ingredientId} ing={ingredients[ingredient]} index={i}></EditableIngredient>)}\n              {provided.placeholder}\n            </Box>\n          )}\n        </Droppable>\n        <Droppable droppableId={deleteIngCol.id}>\n          {(provided, snapshot) => (\n            <>\n              {(ingredientsCol.itemIds.length > 0 || deleteIngCol.itemIds.length > 0) ? (\n                <DeleteDiv\n                  ref={provided.innerRef}\n                  {...provided.droppableProps}\n                  isDraggingOver={snapshot.isDraggingOver}\n                  hasItem={deleteIngCol.itemIds}\n                >\n                  <Box sx={{ display: 'flex', flexWrap: 'nowrap', alignItems: 'center', justifyContent: 'center', }}>\n                    <FaRegTrashAlt />\n                    <Typography style={{ fontStyle: 'italic', fontSize: '16px', margin: 0, padding: 0 }}>\n                      &nbsp;\n                      {deleteIngCol.itemIds.length === 0 ? \n                      'Drop an ingredient here' \n                      : \n                      'Items selected to delete'}\n                    </Typography>\n                  </Box>\n\n                  {columns.deleteIngCol.itemIds.map((ingredient, i) => <EditableIngredient key={ingredients[ingredient].ingredientId} ing={ingredients[ingredient]} index={i}></EditableIngredient>)}\n                  {provided.placeholder}\n\n                  {deleteIngCol.itemIds.length > 0 && (\n                    <Box sx={{\n                      display: 'flex', \n                      flexWrap: 'nowrap', \n                      alignItems: 'center', \n                      p: 2, \n                      borderRadius: '0 0 4', \n                      justifyContent: 'end'\n                    }}>\n                      <Button variant=\"text\" color=\"secondary\" size=\"small\" sx={{marginRight: 2}} onClick={cancelDelete}>Cancel</Button>\n                      <Button size=\"small\" variant=\"contained\" color=\"secondary\" onClick={handleDelete}>Delete</Button>\n                    </Box>\n                  )}\n                </DeleteDiv>\n              ) : (\n                <Box component=\"div\"\n                  ref={provided.innerRef}\n                  {...provided.droppableProps}\n                  style={{\n                    display: 'none',\n                    // margin: '16px 0 0 0',\n                    // minHeight: '5vh',\n                    // borderRadius: '4px',\n                    // textAlign: 'center',\n                  }}\n                >\n                  {columns.deleteIngCol.itemIds.map((ingredient, i) => <EditableIngredient key={ingredients[ingredient].id} ing={ingredients[ingredient]} index={i}></EditableIngredient>)}\n                  {provided.placeholder}\n                </Box>\n              )}\n            </>\n          )\n          }\n        </Droppable>\n      </DragDropContext>\n      <Button variant=\"text\"\n        sx={{\n          textTransform: 'none',\n          fontSize: 16,\n          fontStyle: 'italic',\n          color: 'primary'\n        }}\n        onClick={addNewIngredient}>\n        <MdLibraryAdd />&nbsp;Add a new ingredient\n      </Button>\n    </>\n  )\n}","import React from 'react';\nimport { Draggable } from 'react-beautiful-dnd';\n\n// Redux State.... \nimport { useSelector, useDispatch } from 'react-redux';\nimport { editThisRecipe } from '../../../utils/globalSlice';\n\n// MUI Components....\nimport {\n  TextField,\n  Box,\n  Paper, \n  Typography,\n} from '@mui/material'\n\n// Icons....\nimport DragIndicatorIcon from \"@mui/icons-material/DragIndicator\";\n\nexport default function EditableStep({ step, index }) {\n  const state = useSelector(state => state.global.editRecipe)\n  const dispatch = useDispatch();\n\n\n  const { directions } = state;\n  const dirObj = { ...directions[step.stepId] }\n  // console.log('dirObj', dirObj)\n\n  const { stepId, stepText, errors } = dirObj\n\n  const handleChange = e => {\n    let editedDirObj = { ...dirObj }\n    // console.log('editedDirObj', editedDirObj)\n    editedDirObj = { ...editedDirObj, [e.target.name]: e.target.value }\n    dispatch(editThisRecipe({\n      directions: {\n        ...directions,\n        [stepId]: editedDirObj\n      }\n    }))\n    // console.log('directions', directions);\n    // console.log('directions[stepId]', directions[stepId]);\n  }\n\n  return (\n    <Draggable draggableId={stepId} index={index}>\n      {(provided) => (\n        <Box component=\"div\"\n          id={stepId}\n          {...provided.draggableProps}\n          ref={provided.innerRef}\n        >\n          <Paper sx={{\n            mt: 2,\n            py: 2,\n            width: '100%',\n            border: 1,\n            borderRadius: 1,\n            boxShadow: 4,\n            borderColor: 'backdrop.dark',\n            // backgroundColor: 'backdrop.dark',\n            // backdropFilter: 'blur(4px)'\n          }}>\n            <Box sx={{\n              display: 'flex',\n              alignItems: 'center',\n            }}>\n              <TextField\n                id=\"outlined-size-small\"\n                size=\"small\"\n                label=\"Step\"\n                name=\"stepText\"\n                type=\"text\"\n                multiline\n                defaultValue={stepText}\n                error={errors.stepText}\n                color=\"backdrop\"\n                sx={{\n                  width: '100%',\n                  borderTopRightRadius: 0,\n                  borderBottomRightRadius: 0,\n                  flexGrow: '1',\n                  ml:2\n                }}\n                fullWidth\n                InputLabelProps={{ shrink: true, color: 'secondary' }}\n                onBlur={handleChange}\n              />\n              <Box component=\"div\" {...provided.dragHandleProps} sx={{marginLeft: 'auto', px: 2, py: 1, color: \"grey\"}}>\n                <DragIndicatorIcon size={15} color=\"grey\"/>\n              </Box>\n            </Box>\n              {errors.stepText && <Typography variant=\"subtitle2\" color=\"error\" sx={{mx: 2}}>Please provide information for this step</Typography>}\n          </Paper>\n        </Box>\n      )}\n    </Draggable>\n  )\n}","import React, { useState } from 'react'\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd';\nimport styled from 'styled-components';\n\n// Redux State.... \nimport { useSelector, useDispatch } from 'react-redux';\nimport { editThisRecipe } from '../../../utils/globalSlice';\n\n// MUI Components....\nimport {\n  Box,\n  Button,\n  Typography,\n} from '@mui/material'\n\n// Icons....\nimport {\n  MdLibraryAdd\n} from \"react-icons/md\";\nimport { FaRegTrashAlt } from \"react-icons/fa\"\n\n// Custom Components.... \nimport EditableStep from '../EditableStep';\nconst DeleteDiv = styled.div`\n  margin: 16px 0 0 0;\n  padding-top: ${props => (props.isDraggingOver || props.hasItem.length > 0) && '16px'};\n  padding-left:  ${props => (props.isDraggingOver || props.hasItem.length > 0) && '16px'}; \n  padding-right:  ${props => (props.isDraggingOver || props.hasItem.length > 0) && '16px'}; \n  min-height: 5vh;\n  border-radius: 4px;\n  text-align: center;\n  background-color: ${props => (props.isDraggingOver || props.hasItem.length > 0) ? '#ef5350' : 'inherit'};\n  color: ${props => (props.isDraggingOver || props.hasItem.length > 0) ? '#000000' : 'inherit'};\n`;\n\nexport default function DirectionsSection() {\n  const recipeForm = useSelector(state => state.global.editRecipe)\n  const dispatch = useDispatch();\n\n  const { columns, directions } = recipeForm\n  const { directionsCol, deleteDirCol, deleteDirCol: { deletedIds }, directionsCol: { itemIds } } = columns;\n\n\n  let numArray = []\n  Object.keys(directions).forEach(key => {\n  let ingId = parseInt(key.split('step-').pop())\n  numArray.push(ingId)\n  numArray = numArray.sort((a, b) => a - b)\n  })\n  \n  const startNumber = numArray.pop() + 1\n\n  const [newStep, setNewStep] = useState(startNumber);\n\n  // Logic for when an ingredient was moved\n  const onDragEnd = result => {\n    // console.log(result)\n    const { destination, source, draggableId } = result;\n\n    // If no destination was found return out of function\n    if (!destination) {\n      return;\n    }\n\n    // If no order change was made return out of function\n    if (destination.droppableId === source.droppableId && destination.index === source.index) {\n      return\n    }\n\n    const start = columns[source.droppableId]; // draggables starting droppable column\n    const finish = columns[destination.droppableId] // draggables ending droppable column \n\n    // If draggable droppable column remained the same, save the column order.\n    if (start === finish) {\n      const newItemIds = Array.from(start.itemIds);\n      // console.log('newItemIds', newItemIds)\n\n      newItemIds.splice(source.index, 1);\n      newItemIds.splice(destination.index, 0, draggableId);\n\n      const newColumn = {\n        ...start,\n        itemIds: newItemIds\n      }\n\n      const newState = {\n        columns: {\n          ...columns,\n          [newColumn.id]: newColumn\n        }\n      }\n\n      dispatch(editThisRecipe(newState))\n      // console.log(recipeForm.columns)\n      return;\n    }\n\n    // Move Items to Delete Droppable\n    const startItemIds = Array.from(start.itemIds);\n    startItemIds.splice(source.index, 1);\n    const newStart = {\n      ...start,\n      itemIds: startItemIds,\n    }\n\n    const finishItemId = Array.from(finish.itemIds)\n    finishItemId.splice(destination.index, 0, draggableId);\n    const newFinish = {\n      ...finish,\n      itemIds: finishItemId\n    }\n\n    const newState = {\n      columns: {\n        ...columns,\n        [newStart.id]: newStart,\n        [newFinish.id]: newFinish\n      }\n    }\n    dispatch(editThisRecipe(newState))\n  };\n\n  // Handler for cancelling delete for selected items (returns them to the ingredients column)\n  const cancelDelete = () => {\n    const deleteIds = Array.from(deleteDirCol.itemIds);\n    const stepIds = Array.from(directionsCol.itemIds);\n\n    // merge delete ids with ingredient ids\n    const newStepIds = stepIds.concat(deleteIds);\n    // console.log(newStepIds);\n\n    // new state for returning to-be-deleted items to ingredients column, and clearing deleteIngCol itemIds\n    const newState = {\n      columns: {\n        ...columns,\n        directionsCol: {\n          ...directionsCol, \n          itemIds: newStepIds\n        },\n        deleteDirCol: {\n          ...deleteDirCol,\n          itemIds: []\n        }\n      }\n    }\n\n    // update global state\n    dispatch(editThisRecipe(newState))\n  };\n\n  // Delete ingredients in the Delete Column\n  const handleDelete = async () => {\n    const deleteIds = Array.from(deleteDirCol.itemIds);\n    let editedSteps = {...directions};\n\n    // merge delete itemIds with deletedIds\n    const newDeletedIds = deletedIds.concat(deleteIds);\n    // console.log(newDeletedIds);\n\n    // Remove selected ingredients from the ingredients object\n    await deleteIds.forEach(item => {\n      delete editedSteps[item]\n    });\n\n    // State to be passed to clear deleteIngCol itemsIds array\n    const newColState = {\n      columns: {\n        ...columns,\n        deleteDirCol: {\n          ...deleteDirCol, \n          itemIds:[],\n          deletedIds: newDeletedIds,\n        }\n      }\n    }\n\n    // State to be passed to remove selected ingredients from ingredients object\n    // const newDirState = {\n    //   directions: {\n    //     editedSteps\n    //   }\n    // }\n    \n    // Push to globalState\n    await dispatch(editThisRecipe(newColState));\n    console.log('newColState', columns);\n// \n    // await dispatch(editThisRecipe(newDirState)); FOR SOME REASON ENABLING THIS BREAKS SORTING?!?!?!?!\n    // console.log('newDirState', ingredients);\n  }\n\n  const addNewStep = () => {\n    // create ingredient id and increment newIngredient INT\n    const stepId = `step-${newStep}`;\n    setNewStep(newStep + 1);\n\n    // update newRecipe in global state with the ingredient in the ingredients obj and \n    const newStepIdArr = [...itemIds, stepId]\n    dispatch(editThisRecipe({\n      directions: {\n        ...directions,\n        [stepId]: {\n          stepId: stepId,\n          stepText: '',\n          errors: {\n            stepText: false,\n          }\n        }\n      },\n      columns: {\n        ...columns,\n        directionsCol: {\n          ...directionsCol,\n          itemIds: newStepIdArr\n        }\n      }\n    }))\n    // console.log(recipeForm)\n  };\n  return (\n    <>\n      <Box sx={{\n        mt: 3, \n        borderBottom: 1,\n        borderColor: 'divider'\n      }}>\n        <Typography variant=\"h5\" color=\"primary\" >Directions</Typography>\n      </Box>\n      <DragDropContext\n        // onDragUpdate={onDragUpdate}\n        onDragEnd={onDragEnd}\n      >\n        <Droppable droppableId={directionsCol.id}>\n          {(provided) => (\n            <Box component=\"div\"\n              ref={provided.innerRef}\n              {...provided.droppableProps}\n            >\n              {itemIds.map((step, i) => <EditableStep key={directions[step].stepId} step={directions[step]} index={i}></EditableStep>)}\n              {provided.placeholder}\n            </Box>\n          )}\n        </Droppable>\n        <Droppable droppableId={deleteDirCol.id}>\n          {(provided, snapshot) => (\n            <>\n              {(directionsCol.itemIds.length > 0 || deleteDirCol.itemIds.length > 0) ? (\n                <DeleteDiv\n                  ref={provided.innerRef}\n                  {...provided.droppableProps}\n                  isDraggingOver={snapshot.isDraggingOver}\n                  hasItem={deleteDirCol.itemIds}\n                >\n                  <Box sx={{ display: 'flex', flexWrap: 'nowrap', alignItems: 'center', justifyContent: 'center'}}>\n                    <FaRegTrashAlt />\n                    <Typography style={{ fontStyle: 'italic', fontSize: '16px', margin: 0, padding: 0 }}>\n                      &nbsp;{deleteDirCol.itemIds.length === 0 ? \n                        'Drop a step here' \n                        : \n                        'Steps selected to delete'}\n                    </Typography>\n                  </Box>\n\n                  {deleteDirCol.itemIds.map((step, i) => <EditableStep key={directions[step].stepId} step={directions[step]} index={i}></EditableStep>)}\n                  {provided.placeholder}\n\n                  {deleteDirCol.itemIds.length > 0 && (\n                    <Box sx={{\n                      display: 'flex',\n                      flexWrap: 'nowrap',\n                      alignItems: 'center',\n                      p: 2,\n                      borderRadius: '0 0 4',\n                      justifyContent: 'end'\n                    }}>\n                      <Button variant=\"text\" size=\"small\" color=\"secondary\" sx={{ marginRight: 2 }} onClick={cancelDelete}>Cancel</Button>\n                      <Button size=\"small\" variant=\"contained\" color=\"secondary\" onClick={handleDelete}>Delete</Button>\n                    </Box>\n                  )}\n                </DeleteDiv>\n              ) : (\n                <Box component=\"div\"\n                  ref={provided.innerRef}\n                  {...provided.droppableProps}\n                  style={{\n                    display: 'none',\n                    // margin: '16px 0 0 0',\n                    // minHeight: '5vh',\n                    // borderRadius: '4px',\n                    // textAlign: 'center',\n                  }}\n                >\n                  {/* {columns.deleteIngCol.itemIds.map((ingredient, i) => <EditableIngredient key={ingredients[ingredient].id} ing={ingredients[ingredient]} index={i}></EditableIngredient>)} */}\n                  {provided.placeholder}\n                </Box>\n              )}\n            </>\n          )\n          }\n        </Droppable>\n      </DragDropContext>\n\n      <Button variant=\"text\"\n        sx={{\n          textTransform: 'none',\n          fontSize: 16,\n          fontStyle: 'italic'\n        }}\n        onClick={addNewStep}\n      >\n        <MdLibraryAdd />&nbsp;Add a new step\n      </Button>\n    </>\n  )\n}","import React, { useState, useEffect } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\n\n// Redux State.... \nimport { useSelector, useDispatch } from 'react-redux';\nimport { editThisRecipe} from '../utils/globalSlice';\nimport { initialState as initGlobalState } from '../utils/globalSlice'\n\nimport Auth from '../utils/auth'\n\n// MUI Components....\nimport {\n  Box,\n  Grid,\n  Paper,\n  Typography,\n  Button,\n  AppBar,\n  Toolbar,\n} from '@mui/material'\nimport SaveIcon from '@mui/icons-material/Save';\nimport useScrollTrigger from '@mui/material/useScrollTrigger';\nimport Slide from '@mui/material/Slide';\n\n// Custom Components.... \n// import ConfirmLeavePage from '../components/ConfirmLeavePage'\nimport EditRecipeTitle from '../components/EditRecipeComponents/EditRecipeTitle';\nimport RecipeTime from '../components/EditRecipeComponents/RecipeTime';\nimport ServingSize from '../components/EditRecipeComponents/ServingSize';\nimport PublicSwitch from '../components/EditRecipeComponents/PublicSwitch';\nimport RecipeDescription from '../components/EditRecipeComponents/RecipeDescription';\nimport IngredientsSection from '../components/EditRecipeComponents/IngredientsSection';\nimport DirectionsSection from '../components/EditRecipeComponents/DirectionsSection';\n\n// Queries/Mutations.... \nimport { useMutation } from '@apollo/client';\nimport { EDIT_RECIPE } from '../utils/mutations'\n\nfunction HideOnScroll({ children }) {\n  const trigger = useScrollTrigger();\n  return (\n    <Slide appear={false} direction={'up'} in={!trigger}>\n      {children}\n    </Slide>\n  );\n}\n\nexport default function EditRecipePage() {\n  const recipeForm = useSelector(state => state.global)\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const params = useParams()\n  const recipeId = params.id\n  // const initRecipeForm = {...recipeForm.editRecipe}\n  const [editRecipeMutation] = useMutation(EDIT_RECIPE)\n  const [softComplete, setSoftComplete] = useState(false)\n\n  // If there is no information for the edit recipe redirect user to the view page\n  // !initRecipeForm.recipeTitle && history.push(`/recipe/${recipeId}`)\n  \n  // console.log(recipeForm)\n  // console.log(recipeForm)\n  \n  const { recipeTitle, cookTime, forked, servings, isPublic, recipeDescription, ingredients, directions, columns: { ingredientsCol, directionsCol }, ingredientErrors, directionErrors } = recipeForm?.editRecipe;\n  \n  const loggedIn = Auth.loggedIn()\n  const profile = loggedIn ? Auth.getProfile() : null\n  const loggedInCreator = profile ? profile.data.username === recipeForm.editRecipe.creator : false\n\n  // If user is not the creator redirect them to the recipe view page.\n  (!loggedInCreator || (forked && loggedIn)) && history.push(`/recipe/${recipeId}`)\n\n  // Runs every time recipeForm state updates\n  useEffect(() => {\n\n    // Booleans that are updated if minimum items are provided. This is a soft check, hard check will come when user subs form.\n    const softChecks = {\n      recipeTitle: false,\n      cookTime: false,\n      recipeDescription: false,\n      ingredients: false,\n      directions: false,\n      ingredientsOrder: false,\n      directionsOrder: false\n    }\n    // Get ingredients and directions object lengths\n    let ingredientsLength = Object.keys(ingredients).length\n    let directionsLength = Object.keys(directions).length\n\n    // If conditions are met update appropriate key in softChecks to true, else turn it to false\n    recipeTitle.length >= 2 && recipeTitle !== 'Edit Recipe' ? softChecks.recipeTitle = true : softChecks.recipeTitle = false;\n    cookTime.length ? softChecks.cookTime = true : softChecks.cookTime = false;\n    recipeDescription.length >= 5 ? softChecks.recipeDescription = true : softChecks.recipeDescription = false;\n    ingredientsLength > 0 ? softChecks.ingredients = true : softChecks.ingredients = false;\n    directionsLength > 0 ? softChecks.directions = true : softChecks.directions = false;\n    ingredientsCol.itemIds.length > 0  ? softChecks.ingredientsOrder = true : softChecks.ingredientsOrder = false;\n    directionsCol.itemIds.length > 0  ? softChecks.directionsOrder = true : softChecks.directionsOrder = false;\n\n    // console.log('softChecks', softChecks)\n\n    // If all keys in softChecks are true update softComplete state to true\n    softChecks.recipeTitle && softChecks.cookTime && softChecks.recipeDescription && softChecks.ingredients && softChecks.directions && softChecks.ingredientsOrder && softChecks.directionsOrder ? setSoftComplete(true) : setSoftComplete(false);\n    (!softChecks.recipeTitle || !softChecks.cookTime || !softChecks.recipeDescription || !softChecks.ingredients || !softChecks.directions || !softChecks.ingredientsOrder || !softChecks.directionsOrder) && dispatch(editThisRecipe({formCleared: false}));\n\n    // console.log('softComplete', softComplete)\n\n  }, [recipeForm.editRecipe]);\n  \n\n  const formCheck = e => {\n    e.preventDefault();\n    if (!softComplete) {\n      return; \n    }\n\n    // All error statuses are pushed to batch object which is a spread of the editRecipe global state\n    let batch = {...recipeForm.editRecipe}\n\n    // Verify that each item has required elements\n    batch.columns.ingredientsCol.itemIds.forEach(item => {\n\n      // Verify that each item has something in quantity---------------------------------------------The notes below are for each ingredients quantity value. The logic is practically the same for ingredient name and direction stepText\n      if (batch.ingredients[item].quantity.length > 0) {                                                                      // if no error\n        const editedIngredient = {...batch.ingredients[item], errors: {...batch.ingredients[item].errors, quantity: false}}   // create a complete ingredient object with spreads, update the [ingredientId].error.quantity value to false\n        if (batch.ingredientErrors.includes(item)) {                                                                          // check if ingredientErrors includes the item if it does\n          const editedErrors = ingredientErrors.filter(index => index !== item);                                              // create a new ingredientErrors array with ingredientId filtered out\n         batch = {...batch, ingredients: {...batch.ingredients, [item]: editedIngredient}, ingredientErrors: editedErrors}    // update batch object with the error free ingredient\n        } else {                                                                                                              // if the ingredientId was not found in the array, there is no need for it to get updated\n          batch = {...batch, ingredients: {...batch.ingredients, [item]: editedIngredient}}                                   // update batch with the updated ingredient object with the error.quantity value === false\n        }\n      } else {                                                                                                                // if there is an error\n        const editedIngredient = {...batch.ingredients[item], errors: {...batch.ingredients[item].errors, quantity: true}}    // create a complete ingredient object with spreads, update the [ingredientId].error.quantity value to true\n        if (!batch.ingredientErrors.includes(item)){                                                                          // check if the ingredientsErrors array doesn't contain the ingredientId\n          const editedErrors = [...batch.ingredientErrors, item]                                                              // add the ingredientId to the cloned array\n          batch = {...batch, ingredients: {...batch.ingredients, [item]: editedIngredient}, ingredientErrors: editedErrors}   // update batch with the updated ingredient and ingredientErrors.\n        } else {                                                                                                              // if ingredientId is already in the ingredientsArray \n          batch = {...batch, ingredients: {...batch.ingredients, [item]: editedIngredient}}                                   // only update the ingredients object, not the ingredientsErrors array\n        }\n      }\n\n      // Verify that each item has an ingredient\n      if (batch.ingredients[item].ingredient.length > 0) {\n        const editedIngredient = {...batch.ingredients[item], errors: {...batch.ingredients[item].errors, ingredient: false}}\n        if (batch.ingredientErrors.includes(item)) {\n          const editedErrors = ingredientErrors.filter(index => index !== item);\n          batch = {...batch, ingredients: {...batch.ingredients, [item]: editedIngredient}, ingredientErrors: editedErrors}\n        } else {\n          batch = {...batch, ingredients: {...batch.ingredients, [item]: editedIngredient}}\n        }\n      } else {\n        const editedIngredient = {...batch.ingredients[item], errors: {...batch.ingredients[item].errors, ingredient: true}}\n        if (!batch.ingredientErrors.includes(item)){\n          const editedErrors = [...batch.ingredientErrors, item]\n          batch = {...batch, ingredients: {...batch.ingredients, [item]: editedIngredient}, ingredientErrors: editedErrors}\n        } else {\n          batch = {...batch, ingredients: {...batch.ingredients, [item]: editedIngredient}}\n        }\n      }\n      // console.log(`batch ${item}`, batch)\n      // console.log(`${item}`, ingredients[item].errors)\n    })\n\n    // Very that each step has required stepText\n    batch.columns.directionsCol.itemIds.forEach(step => {\n\n      // Verify that each step has text in stepText\n      if (directions[step].stepText.length > 0) {\n        const editedDirection = {...batch.directions[step], errors: {...batch.directions[step].errors, stepText: false}}\n        \n        if (batch.directionErrors.includes(step)) { \n          // console.log('directions true')\n          const editedErrors = directionErrors.filter(index => index !== step);\n          // console.log(editedErrors)\n          batch = {...batch, directions: {...batch.directions, [step]: editedDirection}, directionErrors: editedErrors}\n        } else {\n          batch = {...batch, directions: {...batch.directions, [step]: editedDirection}}\n        }\n\n      } else {\n        const editedDirection = {...batch.directions[step], errors: {...batch.directions[step].errors, stepText: true}}\n\n        if (!directionErrors.includes(step)){\n          const editedErrors = [...batch.directionErrors, step]\n          batch = {...batch, directions: {...batch.directions, [step]: editedDirection}, directionErrors: editedErrors}\n        } else {\n          batch = {...batch, directions: {...batch.directions, [step]: editedDirection}}\n        }\n\n      }\n      // console.log(`batch ${step}`, batch)\n      // console.log('directions', directions[step].errors)\n    })\n    // console.log(`batch`, batch)\n    // Push batch to editThisRecipe NOTE: THIS IS A COMPLETE OVERWRITE OF EDIT RECIPE    \n    dispatchHandler(batch)\n  }\n  \n  const dispatchHandler = batch => {\n    dispatch(editThisRecipe(batch))\n    // console.log('recipeForm', recipeForm)\n    console.log('ingredientErrors.length: ', batch.ingredientErrors.length, '\\ndirectionErrors.length: ', batch.directionErrors.length)\n\n    if(batch.ingredientErrors.length !== 0 || batch.directionErrors.length !== 0) {\n      console.log('Errors found, cannot edit recipe')\n      return;\n    } else {\n      // console.log('editRecipe')\n      dispatch(editThisRecipe({formCleared: true}))\n      editRecipe()\n    }\n\n  }\n\n  const editRecipe = async () => {\n    let editRecipeObj = {\n      recipeTitle,\n      cookTime,\n      servings, \n      recipeDescription,\n      ingredientsOrder: ingredientsCol.itemIds,\n      directionsOrder: directionsCol.itemIds,\n    }\n    // console.log('editRecipeObj', editRecipeObj)\n\n    let ingredientsArr = []\n    let directionsArr = []\n\n    let publicBool = isPublic === 'private' ? false : true\n    editRecipeObj.isPublic = publicBool\n\n\n    await ingredientsCol.itemIds.forEach(item => {\n      let trimmedIngredient = {\n        ingredientId: ingredients[item].ingredientId,\n        quantity: ingredients[item].quantity,\n        measurement: ingredients[item].measurementTypeShort,\n        ingredientName: ingredients[item].ingredient,\n        preparationNotes: ingredients[item].notes,\n      }\n      ingredientsArr.push(trimmedIngredient);\n    });\n    editRecipeObj.ingredients = ingredientsArr\n\n\n    await directionsCol.itemIds.forEach(item => {\n      let trimmedStep = {\n        stepId: directions[item].stepId,\n        stepText: directions[item].stepText,\n      }\n      directionsArr.push(trimmedStep);\n    })\n    editRecipeObj.directions = directionsArr\n    \n    try{\n      const { data } = await editRecipeMutation({\n        variables: {\n          recipeId,\n          ...editRecipeObj\n        }\n      });\n\n      dispatchRedirect(data)\n      \n    } catch (e) {\n      console.error('Edit Recipe Error: ', e);\n    }\n  }\n\n  // After a successful edit mutation, update globalState, redirect to the view recipe\n  const dispatchRedirect = (data) => {\n    console.log('data', data);\n    data && dispatch(editThisRecipe(initGlobalState.editRecipe));\n    history.goBack();\n  }\n  \n  return (\n    <Box component=\"form\" onSubmit={formCheck}>\n      <Box px={{ md: 5, xl: 20 }}>\n        <EditRecipeTitle />\n      </Box>\n      <Grid container spacing={{ md: 5, xl: 10 }} px={{ md: 5, xl: 20 }} >\n\n        <Grid item xs={12} md={6}>\n          <Box sx={{ borderBottom: 1, borderColor: 'divider', mt: 3 }}>\n            <Typography variant=\"h5\" color=\"primary\">Details</Typography>\n          </Box>\n          <Paper sx={{ p: 2, mt: 2 }}>\n            <RecipeTime />\n            <ServingSize />\n            <PublicSwitch />\n          </Paper>\n        </Grid>\n\n        <Grid item xs={12} md={6}>\n          <RecipeDescription />\n        </Grid>\n\n      </Grid>\n\n      <Grid container spacing={{ md: 5, xl: 10 }} px={{ md: 5, xl: 20 }}>\n\n        <Grid item xs={12} md={6}>\n          <IngredientsSection />\n        </Grid>\n\n        <Grid item xs={12} md={6}>\n          <DirectionsSection />\n        </Grid>\n\n      </Grid>\n      {softComplete &&\n      <>\n      <Box sx={{height: \"65px\"}}></Box>\n        <HideOnScroll>\n          <AppBar color=\"backdrop\" sx={{ top: 'auto', bottom: 0, }}>\n            <Toolbar sx={{left: 0, right: 0, justifyContent: 'center' }}>\n              <Button type='submit' variant=\"contained\" color=\"secondary\" endIcon={<SaveIcon />} sx={{ ml: 2 }}>Save all changes!</Button>\n            </Toolbar>\n          </AppBar>\n        </HideOnScroll>\n        </>\n      }\n    </Box >\n  )\n}\n\n\n","import * as React from 'react';\nimport { Link } from 'react-router-dom';\n\n///Icons.... \nimport AccessAlarmIcon from '@mui/icons-material/AccessAlarm';\nimport PeopleAltIcon from '@mui/icons-material/PeopleAlt';\n\n\n\nimport {\n  Card, \n  CardHeader, \n  CardContent,\n  IconButton,\n  Typography,\n  Box,\n  Button, \n} from '@mui/material'\n\nexport default function RecipeReviewCard({recipe}) {\n\n  let editedDateArr = recipe.createdAt.split(' at ')\n  \n  return (\n      <Card sx={{ boxShadow: 4, height: '100%'}}>\n        <Button\n          component={Link}\n          to={`/recipe/${recipe._id}`}\n          sx={{\n            display: 'flex',\n            justifyContent: 'start',\n            p: 2\n          }}\n        >\n          <CardHeader\n            sx={{\n              color: 'primary',\n              padding: 0,\n            }}\n            action={<IconButton aria-label='settings'></IconButton>}\n            title={recipe.recipeTitle}\n            subheader={`Created: ${editedDateArr[0][0] === '0' ? editedDateArr[0].slice(1) : editedDateArr[0]}`}\n          />\n        </Button>\n        <CardContent sx={{py: 0, display: 'flex', flexDirection: 'column', justifyContent: 'space-between' }}>\n          <Typography\n            variant='body1'\n            color='text.light'\n          >\n            {recipe.recipeDescription}\n          </Typography>\n          <Box sx={{display: 'flex', justifyContent: 'space-between', mt: 2}}>\n            <Box sx={{ display: 'flex', alignContent: 'center'}}>\n              <AccessAlarmIcon color=\"secondary\" sx={{mr: 1}}/>\n              <Typography>\n                {recipe.cookTime}\n              </Typography>\n            </Box>\n            <Box sx={{ display: 'flex', alignContent: 'center'}}>\n              <PeopleAltIcon  color=\"secondary\" sx={{mr: 1}}/>\n              <Typography>\n                {recipe.servings}\n              </Typography>\n            </Box>\n          </Box>\n        </CardContent>\n      </Card>\n  );\n}\n","// React\nimport * as React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\n\n// Material UI components\nimport {\n  Grid,\n  Paper,\n  Box,\n  Button,\n  Typography,\n} from '@mui/material';\n\n// react-icons\nimport AccessAlarmIcon from '@mui/icons-material/AccessAlarm';\nimport PeopleAltIcon from '@mui/icons-material/PeopleAlt';\n\nexport default function RecipeListItem({ recipe }) {\n  let location = useLocation();\n  const discover = location.pathname.includes('discover');\n\n  return (\n    <Paper sx={{ display: 'flex', flexDirection: 'column', mt: 2, boxShadow: 4 }}>\n      <Button component={Link} to={`/recipe/${recipe._id}`} variant='text' sx={{ display: 'flex', justifyContent: 'space-between', py: 1.5 }}>\n        <Grid container>\n          <Grid item xs={12} md={8}>\n            <Box sx={{display: 'flex'}} justifyContent={{xs: 'space-between', md: 'flex-start', alignItems: 'center'}}>\n              <Typography variant=\"h6\" color=\"primary\" sx={{ ml: 1 }}>{recipe.recipeTitle}</Typography>\n              {discover &&\n                <Typography variant=\"body2\" color=\"backdrop.light\" sx={{ mr: 1, display: 'inline-block' }} ml={{md: 2}}>Created by <Typography variant=\"body2\" component='span' color=\"primary\" sx={{display: 'inline-block'}}>{recipe.creator}</Typography></Typography>}\n            </Box>\n          </Grid>\n          {/* <p>Recipe Name</p> */}\n\n          {/* Use MUI rating precision component if there is enough time*/}\n          <Grid item xs={12} md={4} sx={{alignItems: 'center'}}>\n            <Box sx={{display: 'flex', alignItems: 'center'}} justifyContent={{ xs: 'start', md: 'space-between'}}>\n              <Box\n                sx={{\n                  display: 'flex',\n                  flexWrap: 'nowrap',\n                  alignItems: 'center',\n                  flexGrow: 1,\n                  ml: 1,\n                }}\n                mr={{xs: 3, md: 0}}\n              >\n                <AccessAlarmIcon color=\"secondary\"/>\n                <Typography\n                  variant='body1'\n                  color='white'\n                  sx={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    ml: 1\n                  }}\n                >\n                  {recipe.cookTime}\n                </Typography>\n              </Box>\n              <Box\n                sx={{\n                  display: 'flex',\n                  mr: 2,\n                }}\n              >\n                <PeopleAltIcon color=\"secondary\"/>\n                <Typography\n                  variant=\"body1\"\n                  sx={{\n                    color: 'white',\n                    ml: 1\n                  }}\n                >\n                  {recipe.servings}\n                </Typography>\n              </Box>\n            </Box>\n          </Grid>\n        </Grid>\n\n      </Button>\n    </Paper>\n  );\n}","// Import React components\nimport * as React from 'react';\nimport {\n  Link\n} from \"react-router-dom\";\n\n// Redux State....\nimport { useSelector, useDispatch } from 'react-redux';\nimport { toggleMyKitView } from '../utils/globalSlice';\n// Queries/Mutations\nimport { useQuery } from '@apollo/client';\nimport { QUERY_ME } from '../utils/queries';\nimport { Redirect } from 'react-router-dom';\n\n// Auth\nimport Auth from '../utils/auth';\n// import { idbPromise } from '../utils/helpers';\n\n// Import MUI components\nimport {\n  Grid,\n  Box,\n  Paper,\n  Typography,\n  List,\n  IconButton,\n  Tabs,\n  Tab\n} from '@mui/material';\nimport GridViewSharpIcon from '@mui/icons-material/GridViewSharp';\nimport DehazeSharpIcon from '@mui/icons-material/DehazeSharp';\n\nimport RestaurantIcon from '@mui/icons-material/Restaurant';\n\n// Custom Components....\nimport RecipeCard from '../components/RecipeCard';\nimport RecipeListItem from '../components/RecipeListItem';\nimport Loader from '../components/Loader';\n\nexport default function MyKit() {\n  const view = useSelector((state) => state.global.myKitView);\n  const dispatch = useDispatch();\n  const [tab, setTab] = React.useState(0)\n\n  // Get QUERY_ME data\n  const { loading, data, refetch } = useQuery(QUERY_ME);\n\n  if (!Auth.loggedIn()) {\n    return <Redirect to=\"/discover\" />\n  }\n\n  const handleChange = (event, newValue) => {\n    setTab(newValue);\n  };\n\n  const toggleView = () => {\n    dispatch(toggleMyKitView());\n  };\n\n  const myData = data?.me || {};\n  // console.log('query_me data', loading, myData);\n\n  // const token = Auth.loggedIn() ? Auth.getToken() : null;\n\n  if (loading) {\n    return <Loader></Loader>\n  } else if (!data.me.recipeKit.length || !data.me.savedRecipes.length) {\n    refetch()\n  }\n\n  // const idbRecipes = idbPromise('recipes', 'get');\n  // const idbForkedRecipes = idbPromise('forkedRecipes', 'get');\n\n  // let recipes = [];\n  // let forkedRecipes = [];\n\n  const recipes = Object.keys(myData).length > 0 ? [...myData.recipeKit] : [];\n  // if (Object.keys(myData).length > 0) {\n  //   recipes = [...myData.recipeKit];\n  // } else if (idbRecipes.length > 0) {\n  //   recipes = idbRecipes;\n  // } else {\n  //   recipes = [];\n  // }\n  \n  const forkedRecipes = Object.keys(myData).length > 0 ? [...myData.savedRecipes] : [];\n  // if (Object.keys(myData).length > 0) {\n  //   forkedRecipes = [...myData.savedRecipes];\n  // } else if (idbForkedRecipes.length > 0) {\n  //   forkedRecipes = idbForkedRecipes;\n  // } else {\n  //   forkedRecipes = [];\n  // }\n\n  // console.log('recipes', recipes);\n\n  // if (recipes.length) {\n  //   recipes.forEach((recipe) => {\n  //     idbPromise('recipes', 'put', recipe)\n  //   })\n  // }\n\n  // if (forkedRecipes.length) {\n  //   forkedRecipes.forEach((forkedRecipe) => {\n  //     idbPromise('forkedRecipes', 'put', forkedRecipe);\n  //   })\n  // }\n\n  return (\n    <Box mx={{ xs: 0, md: 5, xl: 20 }}>\n      <Box\n        sx={{\n          pt: 2,\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginTop: '.4rem',\n          borderBottom: 1,\n          borderColor: 'divider',\n        }}\n      >\n        <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n          <Typography variant='h4' fontWeight='bold' color='primary'>\n            My Kit\n          </Typography>\n        </Box>\n        <IconButton onClick={toggleView}>\n          {view ? (\n            <GridViewSharpIcon />\n          ) : (\n            <DehazeSharpIcon />\n          )}\n        </IconButton>\n      </Box>\n      <Paper sx={{ width: '100%', mt: 2 }}>\n        <Tabs value={tab} onChange={handleChange} variant='fullWidth' textColor='secondary' indicatorColor='secondary'>\n          <Tab label=\"My Recipes\" sx={{ fontSize: 18, color: 'backdrop.light' }} />\n          <Tab label=\"Forked Recipes\" sx={{ fontSize: 18, color: 'backdrop.light' }} />\n        </Tabs>\n      </Paper>\n      {tab === 0 ? (\n        <Box sx={{\n          mt: 2,\n          borderTop: 1,\n          borderColor: 'divider'\n        }}>\n          {/* My Recipes */}\n          {recipes.length > 0 ? (\n            <Box>\n              {view ? (\n                //True === ROW\n                <List sx={{ m: 0, p: 0, pt: 0, pb: 0 }}>\n                  {recipes.map((recipe) => (\n                    <Box key={recipe._id}>\n                      <RecipeListItem key={`${recipe._id}-row`} recipe={recipe}></RecipeListItem>\n                    </Box>\n                  ))}\n                </List>\n              ) : (\n                // False === Tiles\n                <Grid container mt={2} rowSpacing={2} columnSpacing={{ xs: 2, sm: 2, md: 3 }}>\n                  {recipes.map((recipe) => (\n                    <Grid item xs={12} sm={6} md={4} lg={3} key={`${recipe._id}-grid`}>\n                      <RecipeCard recipe={recipe}></RecipeCard>\n                    </Grid>\n                  ))}\n                </Grid>\n              )}\n            </Box>\n\n          ) : (\n            <Box\n              sx={{\n                mt: 2,\n                top: 'auto',\n                bottom: 'auto',\n                borderColor: 'divider',\n              }}\n            >\n              <Typography variant='h5' color='white' sx={{ textAlign: 'center', flexGrow: 1 }}>\n                Looks awfully empty in here! Lets get started with adding <Typography component={Link} to=\"/new-recipe\" variant='h5' color='secondary'>your very first recipe!</Typography>\n              </Typography>\n            </Box>\n          )}\n\n        </Box>\n\n      ) : (\n\n        <Box sx={{\n          mt: 2,\n          borderTop: 1,\n          borderColor: 'divider'\n        }}>\n          {/* Forked Recipes */}\n          {forkedRecipes.length > 0 ? (\n\n            <Box>\n              {view ? (\n                //True === ROW\n                <List sx={{ m: 0, p: 0, pt: 0, pb: 0 }}>\n                  {forkedRecipes.map((recipe) => (\n                    <Box key={recipe._id}>\n                      <RecipeListItem key={`${recipe._id}-row`} recipe={recipe}></RecipeListItem>\n                    </Box>\n                  ))}\n                </List>\n              ) : (\n                // False === Tiles\n                <Grid container mt={2} rowSpacing={2} columnSpacing={{ xs: 2, sm: 2, md: 3 }}>\n                  {forkedRecipes.map((recipe) => (\n                    <Grid item xs={12} sm={6} md={4} lg={3} key={`${recipe._id}-grid`}>\n                      <RecipeCard recipe={recipe}></RecipeCard>\n                    </Grid>\n                  ))}\n                </Grid>\n              )}\n            </Box>\n\n          ) : (\n\n            <Box mt={2}>\n              <Typography variant='h5' color='white' sx={{ textAlign: 'center', flexGrow: 1 }}>\n                Looks awfully empty in here! You can fork your very first recipe by clicking the <RestaurantIcon /> icon found on any recipe. Doing so will save that recipe to your Kit.  <Typography component={Link} to=\"/discover\" variant='h5' color='secondary'>Discover recipes that others have shared!</Typography>\n              </Typography>\n              <Typography variant='h5' color='white' sx={{ textAlign: 'center', flexGrow: 1 }}>\n                If you have recently Forked a recipe try refreshing if you don't see it.\n              </Typography>\n            </Box>\n          )}\n\n        </Box>\n\n      )}\n\n\n    </Box>\n  );\n}\n","import React,  { useState } from 'react';\nimport { useMutation } from '@apollo/client';\nimport { LOGIN } from '../../utils/mutations';\nimport { Link } from \"react-router-dom\";\n\nimport Auth from '../../utils/auth'\n\n// MUI Components.... \nimport {\n  Box,\n  FormControl,\n  TextField,\n  InputLabel,\n  OutlinedInput,\n  InputAdornment,\n  IconButton,\n  Button,\n  Typography,\n  Paper\n} from '@mui/material'\n\n// Icons.... \nimport {\n  MdVisibility,\n  MdVisibilityOff\n} from \"react-icons/md\";\n\nexport default function LoginForm() {\n  const initialState = {\n    username: '',\n    usernameError: false,\n    password: '',\n    passwordError: false,\n    showPassword: false,\n    errorText: ''\n  }\n\n  const [values, setValues] = useState(initialState);\n\n  const [login] = useMutation(LOGIN)\n\n  const handleChange = (e) => {\n    setValues({ ...values, [e.target.name]: e.target.value });\n  };\n\n  const handleClickShowPassword = () => {\n    setValues({\n      ...values,\n      showPassword: !values.showPassword,\n    });\n  };\n\n  const handleMouseDownPassword = (event) => {\n    event.preventDefault();\n  };\n\n  const loginCheck = e => {\n    e.preventDefault();\n    let errors = {\n      username: false,\n      password: false,\n    }\n    if (values.username.length > 0) {\n      setValues(prevState => ({ ...prevState, usernameError: false }))\n      errors.username = false;\n    } else {\n      setValues(prevState => ({ ...prevState, usernameError: true }))\n      errors.username = true;\n    }\n\n    if (values.password.length >= 5) {\n      setValues(prevState => ({ ...prevState, passwordError: false }))\n      errors.password = false;\n    } else {\n      setValues(prevState => ({ ...prevState, passwordError: true }))\n      errors.password = true;\n    }\n\n    errorHandler(errors)\n  }\n\n  // If there are errors set errorText in values state to true (triggers error text below Login form)\n  // Else initiate login function \n  const errorHandler = ({ username, password }) => {\n    if (username || password) {\n      setValues(prevState => ({ ...prevState, errorText: 'error' }))\n      return;\n    }\n\n    setValues(prevState => ({ ...prevState, errorText: null }))\n    loginUser()\n  }\n\n  // Collects username, email, and password from values state, mutates them, returns values to initialState\n  const loginUser = async () => {\n    // Send values.username, values.email, values.password to GraphQL\n    console.log(`Login: \\n   Username: ${values.username}\\n   Password: ${values.password}`)\n\n    try{\n      const mutationResponse = await login({\n        variables: {\n          Username: values.username,\n          Password: values.password\n        }\n      });\n      Auth.login(mutationResponse.data.login.token)\n      mutationResponse && setValues(initialState)\n    } catch (e) {\n      console.error('Login Error', e)\n      if (e.toString().includes('Incorrect credentials')) {\n        setValues(prevState => ({ ...prevState, errorText: 'credentials' }));\n      }\n    }\n    // Clear return values state to initialState\n  }\n\n  return (\n    <Paper\n      component=\"form\"\n      sx={{\n        mt: 2,\n        padding: 2,\n        border: 1,\n        borderRadius: 1,\n        borderColor: 'backdrop.dark',\n        boxShadow: 4\n      }}\n      onSubmit={loginCheck}\n    >\n      <Box sx={{ display: 'flex' }}>\n        <Typography variant=\"h5\" sx={{ fontWeight: 'bold' }} color=\"primary\">Login</Typography>\n        {(values.errorText === 'error') ?\n            <Typography variant=\"h6\" color=\"error\" sx={{ fontStyle: 'italic' }}>\n              &nbsp;- Error!\n            </Typography>\n          : (values.errorText === 'credentials') &&\n            <Typography variant=\"h6\" color=\"error\" sx={{ fontStyle: 'italic' }}>\n              &nbsp;- Invalid username or password\n            </Typography>\n        }\n      </Box>\n      <TextField\n        id=\"username-required\"\n        label=\"Username *\"\n        // defaultValue=\"\"\n        fullWidth\n        name=\"username\"\n        sx={{ mt: 2 }}\n        value={values.username}\n        error={values.usernameError || values.errorText}\n        color=\"backdrop\"\n        InputLabelProps={{ color: \"secondary\" }}\n        onChange={handleChange}\n        autoComplete=\"username\"\n      />\n      {values.usernameError && <Typography variant=\"subtitle2\" color=\"error\" sx={{ mb: 1 }}>Please provide a username</Typography>}\n      <FormControl sx={{ mt: 1 }} variant=\"outlined\" fullWidth>\n        <InputLabel htmlFor=\"password\" color=\"secondary\" error={values.passwordError}>Password *</InputLabel>\n        <OutlinedInput\n          id=\"password-required\"\n          type={values.showPassword ? 'text' : 'password'}\n          value={values.password}\n          error={values.passwordError || values.errorText}\n          name=\"password\"\n          onChange={handleChange}\n          color=\"backdrop\"\n          // autoComplete=\"password\"\n          endAdornment={\n            <InputAdornment position=\"end\">\n              <IconButton\n                aria-label=\"toggle password visibility\"\n                onClick={handleClickShowPassword}\n                onMouseDown={handleMouseDownPassword}\n                edge=\"end\"\n                color=\"backdrop\"\n              >\n                {values.showPassword ? <MdVisibilityOff /> : <MdVisibility />}\n              </IconButton>\n            </InputAdornment>\n          }\n          label=\"Password *\"\n        />\n      </FormControl>\n      {values.passwordError && <Typography variant=\"subtitle2\" color=\"error\" sx={{ mb: 1 }}>Please provide a password</Typography>}\n      <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>\n        <Button component={Link} to=\"/signup\" variant=\"text\" color=\"primary\" sx={{ mt: 2, }}>Signup instead</Button>\n        <Button type=\"submit\" variant=\"contained\" color=\"primary\" sx={{ mt: 2 }}>Login</Button>\n      </Box>\n    </Paper>\n  )\n}","import React, { useState } from 'react';\nimport { useMutation } from '@apollo/client';\nimport { ADD_USER } from '../../utils/mutations'\nimport { Link } from \"react-router-dom\";\n\nimport Auth from '../../utils/auth';\n\n// MUI Components....\nimport {\n  Box,\n  FormControl,\n  TextField,\n  InputLabel,\n  OutlinedInput,\n  InputAdornment,\n  IconButton,\n  Button,\n  Typography,\n  Paper\n} from '@mui/material'\n\n// Icons.... \nimport {\n  MdVisibility,\n  MdVisibilityOff\n} from \"react-icons/md\";\n\nexport default function SignupForm() {\n  const initialState = {\n    serverError: '',\n    username: '',\n    usernameError: '',\n    email: '',\n    emailError: '',\n    password: '',\n    passwordError: false,\n    showPassword: false,\n    errorText: false,\n  }\n\n  const [values, setValues] = useState(initialState);\n\n  const [addUser] = useMutation(ADD_USER)\n  \n  const handleChange = (prop) => (event) => {\n    setValues({ ...values, [prop]: event.target.value });\n  };\n\n  const handleClickShowPassword = () => {\n    setValues({\n      ...values,\n      showPassword: !values.showPassword,\n    });\n  };\n\n  const handleMouseDownPassword = (event) => {\n    event.preventDefault();\n  };\n\n\n  // Verifies if there are any issues with the provided information, send to errorHandler()\n  const signupCheck = e => {\n    e.preventDefault();\n    let errors = {\n      username: null,\n      email: null,\n      password: false,\n    }\n    if (values.username.length > 0 && /^[\\w.-]+$/.test(values.username)) {\n      setValues(prevState => ({ ...prevState, usernameError: null }))\n      errors.username = false;\n    } else {\n      setValues(prevState => ({ ...prevState, usernameError: 'validation' }))\n      errors.username = true;\n    }\n\n    if (values.email.length > 0 && /^([\\w.-]+)@([\\w.-]+)\\.([a-z.]{2,6})$/.test(values.email)) {\n      setValues(prevState => ({ ...prevState, emailError: null }))\n      errors.email = false;\n    } else {\n      setValues(prevState => ({ ...prevState, emailError: 'validation' }))\n      errors.email = true;\n    }\n\n    if (values.password.length >= 5) {\n      setValues(prevState => ({ ...prevState, passwordError: false }))\n      errors.password = false;\n    } else {\n      setValues(prevState => ({ ...prevState, passwordError: true }))\n      errors.password = true;\n    }\n\n    \n    errorHandler(errors)\n  }\n\n  // If there are errors set errorText in values state to true (triggers error text below Signup form)\n  // Else initiate signup function \n  const errorHandler = ({ username, email, password }) => {\n    if (username || email || password) {\n      setValues(prevState => ({ ...prevState, errorText: true }))\n      return;\n    }\n\n    setValues(prevState => ({ ...prevState, errorText: false }))\n    signup()\n  }\n\n  // Collects username, email, and password from values state, mutates them, returns values to initialState\n  const signup = async () => {\n    // Send values.username, values.email, values.password to GraphQL\n    console.log(`Signup created: \\n   Username: ${values.username}\\n   Email: ${values.email}\\n   Password: ${values.password}`)\n    try {\n      const { data } = await addUser({\n        variables: {\n          Username: values.username,\n          Email: values.email,\n          Password: values.password\n        }\n      });\n      console.log(\"1\", data)\n      const token = data.addUser.token\n      Auth.login(token)\n      // setValues(initialState)\n    } catch (e) {\n      console.error('Signup error:', e);\n      if (e.toString().includes('username')) { \n        setValues(prevState => ({ ...prevState, usernameError: 'duplicate' }))\n        setValues(prevState => ({ ...prevState, errorText: true }))\n      } else if (e.toString().includes('email')) {\n        setValues(prevState => ({ ...prevState, emailError: 'duplicate' }))\n        setValues(prevState => ({ ...prevState, errorText: true }))\n      }\n    }\n    // Clear return values state to initialState\n  }\n\n  return (\n    <Paper\n      component=\"form\"\n      sx={{\n        mt: 2,\n        padding: 2,\n        border: 1,\n        borderRadius: 1,\n        borderColor: 'backdrop.dark',\n        boxShadow: 4\n      }}\n      autoComplete=\"true\"\n      onSubmit={signupCheck}\n    >\n      <Box sx={{ display: 'flex' }}>\n        <Typography variant=\"h5\" sx={{ fontWeight: 'bold' }} color=\"primary\">Signup</Typography>\n        {values.errorText &&\n          <Typography variant=\"h6\" color=\"error\" sx={{ fontStyle: 'italic' }}>\n            &nbsp;- Error!\n          </Typography>\n        }\n      </Box>\n      \n      <TextField\n        id=\"username-required\"\n        label=\"Username *\"\n        value={values.username}\n        fullWidth\n        sx={{ mt: 2 }}\n        error={values.usernameError}\n        color=\"backdrop\"\n        InputLabelProps={{ color: \"secondary\" }}\n        onChange={handleChange('username')}\n        autoComplete=\"new-username\"\n      />\n      {(values.usernameError === 'validation') ? \n        <Typography variant=\"subtitle2\" color=\"error\">\n          Please provide a valid username\n        </Typography>\n      :\n      (values.usernameError === 'duplicate') &&\n        <Typography variant=\"subtitle2\" color=\"error\">\n          Username already exists\n        </Typography>\n      }\n      \n      <TextField\n        id=\"email-required\"\n        label=\"Email *\"\n        value={values.email}\n        fullWidth\n        sx={{ mt: 2 }}\n        error={values.emailError}\n        color=\"backdrop\"\n        InputLabelProps={{ color: \"secondary\" }}\n        onChange={handleChange('email')}\n        autoComplete=\"new-password\"\n      />\n      {(values.emailError === 'validation') ? \n        <Typography variant=\"subtitle2\" color=\"error\">\n          Please provide a valid email address\n        </Typography>\n      :\n      (values.emailError === 'duplicate') &&\n        <Typography variant=\"subtitle2\" color=\"error\">\n          Email is already in use\n        </Typography>\n      }\n      \n      <FormControl sx={{ mt: 2, }} variant=\"outlined\" fullWidth>\n        <InputLabel htmlFor=\"password\" color=\"secondary\" error={values.passwordError}>Password *</InputLabel>\n        <OutlinedInput\n          id=\"password-required\"\n          type={values.showPassword ? 'text' : 'password'}\n          value={values.password}\n          error={values.passwordError}\n          onChange={handleChange('password')}\n          color=\"backdrop\"\n          endAdornment={\n            <InputAdornment position=\"end\">\n              <IconButton\n                aria-label=\"toggle password visibility\"\n                onClick={handleClickShowPassword}\n                onMouseDown={handleMouseDownPassword}\n                edge=\"end\"\n              >\n                {values.showPassword ? <MdVisibilityOff /> : <MdVisibility />}\n              </IconButton>\n            </InputAdornment>\n          }\n          label=\"Password *\"\n        />\n      </FormControl>\n        {values.passwordError ? \n          <Typography variant=\"subtitle2\" color=\"error\">\n            Error - Password must be a minimum of 5 characters\n          </Typography>\n          :\n          <Typography variant=\"subtitle2\" color=\"grey\" sx={{ fontStyle: 'italic' }}>\n            Password must be a minimum of 5 characters\n          </Typography>\n        }\n        \n      <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>\n        <Button component={Link} to=\"/login\" variant=\"text\" color=\"primary\" sx={{ mt: 2, }}>Login instead</Button>\n        <Button type=\"submit\" variant=\"contained\" color=\"primary\" sx={{ mt: 2 }}>Signup</Button>\n      </Box>\n\n    </Paper >\n  )\n}","import React from 'react'\n\nimport {\n  Box, \n  Button\n} from '@mui/material';\nimport { Link } from 'react-router-dom';\n\nexport default function LandingPage() {\n  return (\n    <Box sx={{display: 'flex', justifyContent: 'center', mt: 1}}> \n    <Box sx={{ mr: 2, pr: 2, borderRight: 1, borderColor: 'backdrop.main'}}>\n      <Button component={Link} to=\"/signup\" variant=\"text\" color=\"backdrop\" size=\"large\" >Signup</Button>\n    </Box>\n      <Button component={Link} to=\"/login\" variant=\"text\" color=\"backdrop\" size=\"large\">Login</Button>\n    </Box>\n  )\n}","import React from 'react';\nimport LoginForm from '../components/LoginForm';\nimport SignupForm from '../components/SignupForm';\nimport LandingPage from '../components/LandingPage';\nimport { Link, Redirect } from \"react-router-dom\";\n\nimport Auth from \"../utils/auth\"\n\nimport {\n  Grid,\n  Box,\n  Typography,\n} from '@mui/material'\n\nexport default function LoginSignup({ page }) {\n\n  // const  { username: userParam } = useParams();\n  // If loggedIn token returns the username that matches the userParam, user is redirected to the main page (/my-kit) file\n  // console.log(Auth);\n  if (Auth.loggedIn()) {\n    return <Redirect to=\"/my-kit \" />\n  }\n\n  return (\n    <Box\n      sx={{\n        margin: 0,\n        position: 'fixed',\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center'\n      }}\n    >\n      <Grid\n        container\n        justifyContent=\"center\"\n        sx={{\n          width: '100%',\n          padding: 2\n        }}\n      >\n        <Grid item xs={12} sm={10} md={6} lg={4} xl={4}>\n          <Link to=\"/\" style={{ textDecoration: 'none', color: 'black' }}>\n          <Typography variant=\"h2\" component=\"div\" color=\"primary\" fontWeight=\"bold\" sx={{ flexGrow: 1, textAlign: 'center', textShadow: \"0px 4px 3px rgba(0,0,0,0.4), 0px 8px 13px rgba(0,0,0,0.1), 0px 18px 23px rgba(0,0,0,0.1)\",}}>\n            Coo<Typography component=\"span\" variant=\"h2\" color=\"secondary\" fontStyle=\"italic\" fontWeight=\"bold\" sx={{ flexGrow: 1 }}>Kit</Typography>\n          </Typography>          \n          </Link>\n          {page === '/' && <LandingPage />}\n          {page === 'login' && <LoginForm />}\n          {page === 'signup' && <SignupForm />}\n        </Grid>\n      </Grid>\n    </Box>\n  )\n}","import React from 'react'\nimport { useQuery } from '@apollo/client';\n\n// Redux State....\nimport { useSelector, useDispatch } from 'react-redux';\nimport { toggleDiscoverView } from '../utils/globalSlice';\n\n// IndexedDB\n// import { idbPromise } from '../utils/helpers';\n\nimport {\n  QUERY_RECIPES\n} from '../utils/queries';\n\nimport {\n  Grid,\n  Box,\n  Typography,\n  List,\n  IconButton,\n} from '@mui/material';\n\nimport Loader from '../components/Loader'\n\nimport RecipeListItem from '../components/RecipeListItem';\nimport RecipeCard from '../components/RecipeCard';\n\nimport GridViewSharpIcon from '@mui/icons-material/GridViewSharp';\nimport DehazeSharpIcon from '@mui/icons-material/DehazeSharp';\n\nexport default function RecipeFeed() {\n  const view = useSelector((state) => state.global.discoverView);\n  const dispatch = useDispatch();\n  const { loading, data } = useQuery(QUERY_RECIPES)\n  // console.log(\"All recipes\", data)\n\n  const toggleView = () => {\n    dispatch(toggleDiscoverView());\n  };\n\n  if (loading) {\n    return <Loader></Loader>;\n  }\n\n  const recipes = data.recipes || {};\n\n  // if (recipes.length) {\n  //   recipes.forEach((recipe) => {\n  //     idbPromise('recipes', 'put', recipe);\n  //   })\n  // }\n\n  return (\n    <Box mx={{ xs: 0, md: 5, xl: 20 }}>\n      <Box\n        sx={{\n          pt: 2,\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginTop: '.4rem',\n          borderBottom: 1,\n          borderColor: 'divider',\n        }}\n      >\n          <Typography variant='h4' fontWeight='bold' color='primary'>\n            Discover Recipes\n          </Typography>\n          <IconButton onClick={toggleView}>\n          {view ? (\n            <GridViewSharpIcon />\n          ) : (\n            <DehazeSharpIcon />\n          )}\n        </IconButton>\n      </Box>\n\n      {view ? (\n        //True === ROW\n        <List sx={{ m: 0, p: 0, pt: 0, pb: 0 }}>\n          {recipes.map((recipe) => (\n            <Box key={recipe._id}>\n              <RecipeListItem key={`${recipe._id}-row`} recipe={recipe}></RecipeListItem>\n            </Box>\n          ))}\n        </List>\n      ) : (\n        // False === Tiles\n        <Grid container mt={2} rowSpacing={2} columnSpacing={{ xs: 2, sm: 2, md: 3 }}>\n          {recipes.map((recipe) => (\n            <Grid item xs={12} sm={6} md={4} lg={3} key={`${recipe._id}-grid`}>\n              <RecipeCard recipe={recipe}></RecipeCard>\n            </Grid>\n          ))}\n        </Grid>\n      )}\n\n      <Grid container>\n        <Grid item xs={12} md={6}></Grid>\n        {/* Forked Recipes */}\n        <Grid item xs={12} md={6}></Grid>\n      </Grid>\n    </Box>\n  );\n}\n\n","import React from 'react';\nimport { useLocation } from 'react-router-dom';\n\nimport { useDispatch } from \"react-redux\";\nimport { sideNavVisible } from \"../../utils/globalSlice.js\"\nimport { Link } from \"react-router-dom\";\n\nimport Auth from '../../utils/auth'\n\nimport {\n  Box,\n  IconButton,\n  Typography,\n  AppBar,\n  Toolbar,\n} from '@mui/material'\n\nimport { MdMenu, MdAdd } from \"react-icons/md\";\n\nexport default function Header() {\n  const dispatch = useDispatch();\n\n  const toggleDrawer = (event) => {\n    if (event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\n      return;\n    }\n    dispatch(sideNavVisible());\n  };\n\n  const loggedIn = Auth.loggedIn()\n\n  let location = useLocation();\n  const onNewRecipe = location.pathname.includes('new-recipe')\n  // console.log(\"url\", window.location.pathname)\n\n  return (\n    <Box sx={{ flexGrow: 1 }}>\n      <AppBar>\n        <Toolbar\n          sx={{\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'space-between',\n          }}\n        >\n          <IconButton\n            size=\"large\"\n            edge=\"start\"\n            color=\"light\"\n            aria-label=\"menu\"\n            // sx={{ mr: 2 }}\n            onClick={toggleDrawer}\n          >\n            <MdMenu />\n          </IconButton>\n          { loggedIn ? (\n            <Typography variant=\"h3\" component={Link} to=\"/my-kit\" color=\"primary\" fontWeight=\"bold\" \n              sx={{ \n                textDecoration: 'none', \n                flexGrow: 1, \n                textAlign: 'center', \n                textShadow: \"0px 4px 3px rgba(0,0,0,0.4), 0px 8px 13px rgba(0,0,0,0.1), 0px 18px 23px rgba(0,0,0,0.1)\",\n              }}>\n              Coo<Typography component=\"span\" variant=\"h3\" color=\"secondary\" fontStyle=\"italic\" fontWeight=\"bold\" sx={{ flexGrow: 1 }}>Kit</Typography>\n            </Typography>\n          ) : (\n            <Typography variant=\"h3\" component={Link} to=\"/discover\" color=\"primary\" fontWeight=\"bold\" \n              sx={{ \n                textDecoration: 'none', \n                flexGrow: 1, \n                textAlign: 'center', \n                textShadow: \"0px 4px 3px rgba(0,0,0,0.4), 0px 8px 13px rgba(0,0,0,0.1), 0px 18px 23px rgba(0,0,0,0.1)\",\n              }}>\n              Coo<Typography component=\"span\" variant=\"h3\" color=\"secondary\" fontStyle=\"italic\" fontWeight=\"bold\" sx={{ flexGrow: 1 }}>Kit</Typography>\n            </Typography>\n          )}\n          {!onNewRecipe ?\n            <IconButton component={Link} to=\"/new-recipe\" aria-label=\"add\" edge=\"end\" color=\"light\">\n              <MdAdd />\n            </IconButton>\n            :\n            <IconButton aria-label=\"add\" disabled color=\"light\">\n              <MdAdd size={25} style={{ visibility: 'hidden' }} />\n            </IconButton>\n          }\n        </Toolbar>\n      </AppBar>\n    </Box>\n  )\n}","// React imports\nimport React from 'react';\nimport { Link } from \"react-router-dom\";\n\n// Global state \nimport { sideNavVisible } from \"../../utils/globalSlice.js\"\nimport { useDispatch, useSelector } from \"react-redux\";\n\n// Material UI components\nimport {\n  Box,\n  Drawer,\n  List,\n  Divider,\n  ListItem,\n  ListItemIcon,\n  ImageList,\n  ImageListItem,\n  ListItemText,\n  MenuList,\n  MenuItem,\n  Button,\n  Typography,\n} from '@mui/material/';\n\n// Auth\nimport Auth from \"../../utils/auth\";\n\n// Custom icons\nimport PostAddOutlinedIcon from '@mui/icons-material/PostAddOutlined';\nimport LoginIcon from '@mui/icons-material/Login';\nimport InboxIcon from '@mui/icons-material/Inbox';\nimport SearchIcon from '@mui/icons-material/Search';\nimport { GiKnifeFork, /*GiForkKnifeSpoon */ } from 'react-icons/gi';\nimport PersonAddAlt1Icon from '@mui/icons-material/PersonAddAlt1';\nimport LogoutIcon from '@mui/icons-material/Logout';\n\n// Queries/Mutations\nimport { useQuery } from '@apollo/client';\nimport { QUERY_ME_BASIC } from '../../utils/queries';\n\nexport default function Sidenav() {\n  const state = useSelector(state => state.global.sideNavVisible);\n  const dispatch = useDispatch();\n\n  const toggleDrawer = () => (event) => {\n    if (event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\n      return;\n    }\n    dispatch(sideNavVisible());\n  };\n\n  const handleLogout = () => {\n    console.log('logout called')\n    Auth.logout();\n  }\n\n  const { /*loading,*/ data } = useQuery(QUERY_ME_BASIC);\n\n  // if (loading) {\n  //   console.log('loading', loading)\n  // } else {\n  //   console.log(\"userData\", data);\n  // }\n\n  const userData = data?.me || {};\n\n  // const token = Auth.loggedIn() ? Auth.getToken() : null;\n  // console.log('token', token)\n\n  const loggedIn = Auth.loggedIn()\n\n  const imageData = [\n    {\n      img: 'https://i.pinimg.com/736x/16/27/b7/1627b7a21fffc3451299a03251c6b3fc.jpg',\n      title: 'delicious-food'\n    }\n  ]\n\n  // const menuItems = [\n  //   // {\n  //   //   name: \"Discover\",\n  //   //   icon: <RiCompassDiscoverLine />,\n  //   //   link: 'discover'\n  //   // },\n  //   // {\n  //   //   name: \"Search\",\n  //   //   icon: <MdSearch />,\n  //   //   link: 'search'\n  //   // },\n  //   // {\n  //   //   name: \"My Kit\",\n  //   //   icon: <GiForkKnifeSpoon />,\n  //   //   link: 'my-kit'\n  //   // },\n  //   // {\n  //   //   name: \"New Recipe\",\n  //   //   icon: <PostAddOutlinedIcon />,\n  //   //   link: 'new-recipe'\n  //   // },\n  //   // {\n  //   //   name: \"Shopping List\",\n  //   //   icon: <VscChecklist />,\n  //   //   link: 'my-kit/shopping-list'\n  //   // },\n  //   // {\n  //   //   name: \"Meal Planner\",\n  //   //   icon: <IoIosJournal />,\n  //   //   link: 'meal-planner'\n  //   // }\n  // ]\n\n  // const fnOption = () => {\n  //   if (token) {\n  //     return Auth.logout();\n  //   } else {\n  //     return\n  //   }\n  // }\n\n  // const settingsMenuItems = [\n  //   // {\n  //   //   name: \"Settings\",\n  //   //   icon: <MdSettings />,\n  //   //   link: \"settings\",\n  //   //   fn: null\n  //   // },\n  //   {\n  //     name: loginOption(),\n  //     icon: <IoIosLogIn />,\n  //     link: linkOption(),\n  //     fn: fnOption(),\n  //   }]\n\n  return (\n    <Drawer\n      anchor=\"left\"\n      open={state}\n      onClose={toggleDrawer()}\n      variant=\"temporary\"\n      ModalProps={{\n        keepMounted: true,\n      }}\n    >\n      <Box\n        sx={{ width: 250, display: 'flex', flexDirection: 'column', minHeight: '100vh' }}\n        role=\"presentation\"\n        onClick={toggleDrawer()}\n        onKeyDown={toggleDrawer()}\n      >\n        <Box sx={{ flexGrow: 1, display: 'flex', justifyContent: 'space-between', flexDirection: 'column', }}>\n          <Box>\n            <List>\n              <ListItem\n                sx={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center'\n                }}\n              >\n                {/* <ListItemIcon\n                  sx={{\n                    flexGrow: '1',\n                    marginRight: 1,\n                    fontSize: 28,\n                    textAlign: 'right'\n                  }}\n                > */}\n                <GiKnifeFork style={{ fontSize: 28, flexGrow: 1, marginRight: '8px' }} />\n                <ListItemText>\n                  <Typography variant=\"h4\" color=\"primary\" fontWeight=\"bold\" sx={{ m: 0, p: 0, textShadow: \"0px 4px 3px rgba(0,0,0,0.4), 0px 8px 13px rgba(0,0,0,0.1), 0px 18px 23px rgba(0,0,0,0.1)\", }}>\n                    Coo<Typography component=\"span\" variant=\"h4\" color=\"secondary\" fontStyle=\"italic\" fontWeight=\"bold\">Kit</Typography>\n                  </Typography>\n                </ListItemText>\n              </ListItem>\n              {loggedIn ?\n                (\n                  <ListItem>\n                    <ListItemText>\n                      <Typography>Hello, {userData.username}</Typography>\n                    </ListItemText>\n                  </ListItem>\n                )\n                :\n                ('')\n              }\n            </List>\n            <Divider />\n\n            <MenuList>\n              <Button component={Link} to=\"/discover\" variant=\"text\" sx={{ mt: 2 }}>\n                <MenuItem\n                  sx={{\n                    display: 'flex',\n                    alignItems: 'center',\n\n                  }}\n                >\n                  <ListItemIcon\n                    sx={{\n                      marginRight: '.1rem'\n                    }}\n                  >\n                    <SearchIcon />\n                  </ListItemIcon>\n                  <ListItemText>\n                    <Typography variant=\"h6\">\n                      Discover\n                    </Typography>\n                  </ ListItemText>\n                </MenuItem>\n              </Button>\n\n              {loggedIn && (\n                <Box>\n                  <Button component={Link} to=\"/my-kit\" variant=\"text\" sx={{ mt: 2 }}>\n                    <MenuItem\n                      sx={{\n                        display: 'flex',\n                        alignItems: 'center',\n                      }}\n                    >\n                      <ListItemIcon\n                        sx={{ marginRight: '.1rem', fontSize: 21 }}\n                      >\n                        <InboxIcon />\n                      </ListItemIcon>\n                      <ListItemText>\n                        <Typography variant=\"h6\">\n                          My Kit\n                        </Typography>\n                      </ListItemText>\n                    </MenuItem>\n                  </Button>\n\n                  <Button component={Link} to=\"/new-recipe\" variant=\"text\" sx={{ mt: 2 }}>\n                    <MenuItem\n                      sx={{\n                        display: 'flex',\n                        alignItems: 'center',\n                      }}\n                    >\n                      <ListItemIcon\n                        sx={{\n                          marginRight: '.1rem'\n                        }}\n                      >\n                        <PostAddOutlinedIcon />\n                      </ListItemIcon>\n                      <ListItemText>\n                        <Typography variant=\"h6\">\n                          New Recipe\n                        </Typography>\n                      </ ListItemText>\n                    </MenuItem>\n                  </Button>\n                </Box>\n              )}\n\n\n            </MenuList>\n          </Box>\n          <ImageList\n            variant=\"masonry\"\n            cols={1}\n            gap={0}\n            sx={{\n              padding: 0,\n              margin: 0,\n            }}\n          >\n            <ImageListItem\n              sx={{\n                boxShadow: 'inset 0 7px 9px -7px rgba(0,0,0,0.65), inset 0 -7px 9px -7px rgba(0,0,0,0.65)',\n              }}\n            >\n              <img\n                src={`${imageData[0].img}?w=248&fit=crop&auto=format`}\n                alt={imageData[0].title}\n                loading=\"lazy\"\n                style={{\n                  opacity: \".8\"\n                }}\n              />\n            </ImageListItem>\n          </ImageList>\n\n        </Box>\n        {/* Settings and Logout menu list */}\n        <MenuList\n        // sx={{ boxShadow: '0 7px 9px -7px rgba(0,0,0,0.6),' }}\n        >\n          {loggedIn ?\n            <Button\n              variant=\"text\"\n              value=\"Logout\"\n              onClick={handleLogout}\n              size=\"large\"\n            >\n              <MenuItem\n                sx={{\n                  display: 'flex',\n                  alignItems: 'center'\n                }}\n              >\n                <ListItemIcon\n                  sx={{\n                    marginRight: '.1rem',\n                    fontSize: 20,\n                    fontWeight: 'bold'\n                  }}>\n                  <LogoutIcon />\n                </ListItemIcon>\n                <ListItemText>\n                  <Typography variant=\"h6\">\n                    Logout\n                  </Typography>\n                </ListItemText>\n              </MenuItem>\n            </Button>\n            :\n            <Box sx={{ display: 'flex', justifyContent: \"space-between\" }}>\n              <Button\n                component={Link}\n                to=\"/login\"\n                variant=\"text\"\n                value=\"Login\"\n              // onClick={toggleDrawer()}\n              >\n                <MenuItem\n                  sx={{\n                    display: 'flex',\n                    alignItems: 'center'\n                  }}\n                >\n                  <ListItemIcon\n                    sx={{\n                      marginRight: '.1rem'\n                    }}>\n                    <LoginIcon />\n                  </ListItemIcon>\n                  <ListItemText>\n                    Login\n                  </ListItemText>\n                </MenuItem>\n              </Button>\n              <Button\n                component={Link}\n                to=\"/signup\"\n                variant=\"text\"\n                value=\"Signup\"\n              // onClick={toggleDrawer()}\n              >\n                <MenuItem\n                  sx={{\n                    display: 'flex',\n                    alignItems: 'center'\n                  }}\n                >\n                  <ListItemIcon\n                    sx={{\n                      marginRight: '.1rem'\n                    }}>\n                    <PersonAddAlt1Icon />\n                  </ListItemIcon>\n                  <ListItemText>\n                    Signup\n                  </ListItemText>\n                </MenuItem>\n              </Button>\n            </Box>\n          }\n        </MenuList>\n      </Box>\n    </Drawer>\n  )\n};","import React from 'react'\n\nimport {\n  Box, \n  Typography,\n} from '@mui/material'\nimport ErrorIcon from '@mui/icons-material/Error';\n\nexport default function UnknownPage() {\n  return (\n    <Box sx={{width: '100%', height: 'calc(100vh - 55px)', pt: 'calc(100vh - 80vh)', display: 'flex', flexDirection: 'column', alignContent: 'center', alignItems: 'center', }}>\n      <ErrorIcon sx={{fontSize: 80}} color='backdrop'/>\n      <Typography variant=\"h4\" sx={{textAlign:'center', pt: 2}} color='backdrop.main'>Uh-oh! It appears what you are looking for can't be found here!</Typography>\n    </Box>\n  )\n}","import React from 'react';\nimport { Route, Switch, useLocation } from 'react-router-dom';\n\n// Themes....\nimport './App.scss';\nimport theme from './theme.js'\n\n// React Router Pages....\nimport NewRecipePage from './pages/NewRecipe';\nimport ViewRecipe from './pages/ViewRecipe';\nimport EditRecipe from './pages/EditRecipe';\nimport MyKit from './pages/MyKit';\nimport LoginSignup from './pages/LoginSignup';\nimport RecipeFeed from './pages/RecipeFeed'\n\n// Components....\nimport { Box, ThemeProvider } from '@mui/system';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport Header from './components/Header'\nimport Sidenav from \"./components/Sidenav\";\nimport UnknownPage from './components/404';\n\nfunction App() {\n  let location = useLocation();\n  // console.log('location', location)\n  const hideHeader = (location.pathname.includes('login') || location.pathname.includes('signup') || location.pathname === ('/') /* || location.pathname === ('{ADD HEROKU LINK HERE}/')*/) ? true : false\n\n  return (\n    <Box className=\"App\" sx={{ minHeight: '100vh' }}>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <header>\n          <Sidenav />\n          {!hideHeader &&\n            <Header />\n          }\n        </header>\n\n        <Box sx={{\n          px: 2,\n          pt: '55px',\n          zIndex: 1,\n        }}>\n          <Switch>\n            <Route exact path=\"/\"><LoginSignup page={'/'} /></Route>\n            <Route exact path=\"/new-recipe\" component={NewRecipePage}></Route>\n            <Route exact path=\"/recipe/:id\" component={ViewRecipe}></Route>\n            <Route exact path=\"/recipe/:id/edit\" component={EditRecipe}></Route>\n            <Route exact path=\"/my-kit\" component={MyKit}></Route>\n            <Route exact path=\"/discover\" component={RecipeFeed}></Route>\n            <Route exact path=\"/login\" ><LoginSignup page={'login'} /></Route>\n            <Route exact path=\"/signup\" ><LoginSignup page={'signup'} /></Route>\n            <Route component={UnknownPage}/>\n          </Switch>\n        </Box>\n\n        <footer>\n\n        </footer>\n      </ThemeProvider>\n    </Box>\n  );\n}\n\nexport default App;\n","import { configureStore } from '@reduxjs/toolkit';\nimport reducer from '../utils/globalSlice';\n\nexport const store = configureStore({\n  reducer: {\n    global: reducer,\n  },\n});\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport { store } from './app/store';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\n\n// Apollo Client file \nimport {\n  ApolloClient,\n  InMemoryCache,\n  ApolloProvider,\n  createHttpLink,\n} from '@apollo/client';\nimport { setContext } from '@apollo/client/link/context';\nimport * as serviceWorker from './serviceWorker';\n\nconst httpLink = createHttpLink({\n  uri: '/graphql'\n});\n\nconst authorizationLink = setContext((_, { headers }) => {\n  const token = localStorage.getItem('id_token');\n  return {\n    headers: {\n      ...headers,\n      authorization: token ? `Bearer ${token}` : ''\n    }\n  }\n});\n\n\nconst client = new ApolloClient({\n  link: authorizationLink.concat(httpLink),\n  cache: new InMemoryCache()\n});\n\nReactDOM.render(\n  // <React.StrictMode>\n    <ApolloProvider client={client}>\n      <Provider store={store}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </Provider>\n    </ApolloProvider>,\n  // </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}